{
	"Id": "03bf64b6a0f07d5c63305d4e525e8a390506de02",
	"active": "true",
	"enabled": "true",
	"code": "c++",
	"date": "2024-10-20T01:10:26.443Z",
	"name": "C++",
	"remark": "LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoqKioqKioqKioqKioqKioqKioqKiAgICAgICAgQVBJIFNlcnZlciBTdHViIGZvciBDKysgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioNCioqKioqKioqKioqKioqKioqKioqIFZFUlNJT046IDIwMjQtMTAtMjBUMDE6MTA6MjQuMzYxWiAgKioqKioqKioqKioqKioqKioqKioNCioqKioqKioqKioqKioqKioqKioqICBTWVNURU06IGFwaXNlcnZlci9lc3B0ZXN0ICAgICAqKioqKioqKioqKioqKioqKioqKg0KKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovDQoNCg0KDQovKiBMaW51eCBydW5uZXI6DQp3Z2V0IC1xTy0gImh0dHBzOi8vYXJ6aG9zcGl0YWwuZ2l0aHViLmlvL2VzcHRlc3QvTm9kZV9UeXBlL0MrKy5qc29uIiB8IGpxIC1yICcucmVtYXJrIHwgQGJhc2U2NGQnIHwgZysrIC14IGMrKyAtDQoNCg0KKi8NCg0KDQojaW5jbHVkZSA8Y3RpbWU+DQojaW5jbHVkZSA8c3RyaW5nPg0KI2luY2x1ZGUgImJpdHMvc3RkYysrLmgiDQojaW5jbHVkZSA8Y2hyb25vPg0KI2luY2x1ZGUgImluY2x1ZGUvanNvbi5ocHAiDQojaW5jbHVkZSAibXF0dC9hc3luY19jbGllbnQuaCINCiNpbmNsdWRlICJtcXR0L3RvcGljLmgiDQoNCnVzaW5nIGpzb24gPSBubG9obWFubjo6anNvbjsNCg0KDQpuYW1lc3BhY2UgZXNwdGVzdHsKCQpuYW1lc3BhY2UgY29tewoJCm5hbWVzcGFjZSBuYW1tb3VyewoJCm5hbWVzcGFjZSBkY29tewoJDQogICAgDQogICAgY2xhc3MgQ29uZmlnX0dyb3Vwew0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBDb25maWdfR3JvdXAoKXsNCiAgICAgICAgICAgIH0NCiAgICAgICAgDQogICAgICAgICAgICB+Q29uZmlnX0dyb3VwKCl7DQogICAgICAgICAgICAgICAgLy8gZm9yIGV2ZXJ5ICJuZXciIHRoZXJlIG11c3QgYmUgYSAiZGVsZXRlIg0KICAgICAgICAgICAgfQ0KDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZ19Hcm91cC5hY3RpdmUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgYm9vbCBfYWN0aXZlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGJvb2wgYWN0aXZlKCk7DQogICAgICAgICAgICBDb25maWdfR3JvdXAmIGFjdGl2ZShib29sIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnX0dyb3VwLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZ19Hcm91cC5lbmFibGVkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2VuYWJsZWQ7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBlbmFibGVkKCk7DQogICAgICAgICAgICBDb25maWdfR3JvdXAmIGVuYWJsZWQoYm9vbCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZ19Hcm91cC5lbmFibGVkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnX0dyb3VwLmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX2NvZGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgY29kZSgpOw0KICAgICAgICAgICAgQ29uZmlnX0dyb3VwJiBjb2RlKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnX0dyb3VwLmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBDb25maWdfR3JvdXAub3JkZXIgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgaW50IF9vcmRlcjsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBpbnQgb3JkZXIoKTsNCiAgICAgICAgICAgIENvbmZpZ19Hcm91cCYgb3JkZXIoaW50IHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnX0dyb3VwLm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnX0dyb3VwLmRhdGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgdGltZV90IF9kYXRlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHRpbWVfdCBkYXRlKCk7DQogICAgICAgICAgICBDb25maWdfR3JvdXAmIGRhdGUodGltZV90IHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnX0dyb3VwLmRhdGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBDb25maWdfR3JvdXAubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfbmFtZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBuYW1lKCk7DQogICAgICAgICAgICBDb25maWdfR3JvdXAmIG5hbWUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBDb25maWdfR3JvdXAubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZ19Hcm91cC5yZW1hcmsgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX3JlbWFyazsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyByZW1hcmsoKTsNCiAgICAgICAgICAgIENvbmZpZ19Hcm91cCYgcmVtYXJrKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICANCiAgICAgICAgICAgIENvbmZpZ19Hcm91cCYgcmVtYXJrKGpzb24gdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBDb25maWdfR3JvdXAucmVtYXJrIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCg0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBDb25maWdfR3JvdXAuZ3JvdXBfQ29uZmlncyBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQoNCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiogX2dyb3VwX0NvbmZpZ3M7DQogICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiBncm91cF9Db25maWdzKCk7DQogICAgICAgICAgICBDb25maWdfR3JvdXAmIGdyb3VwX0NvbmZpZ3Moc3RkOjp2ZWN0b3I8c3RkOjphbnk+JiYgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZ19Hcm91cC5ncm91cF9Db25maWdzIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnX0dyb3VwLmdyb3VwX01hcHBpbmdzIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCg0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjp2ZWN0b3I8c3RkOjphbnk+KiBfZ3JvdXBfTWFwcGluZ3M7DQogICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiBncm91cF9NYXBwaW5ncygpOw0KICAgICAgICAgICAgQ29uZmlnX0dyb3VwJiBncm91cF9NYXBwaW5ncyhzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnX0dyb3VwLmdyb3VwX01hcHBpbmdzIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCg0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBDb25maWdfR3JvdXAmIF91bmlxdWUoKTsNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF90b0RvY3VtZW50KCk7DQogICAgICAgICAgICBDb25maWdfR3JvdXAmIF9mcm9tRG9jdW1lbnQoc3RkOjpzdHJpbmcgb2JqKTsNCiAgICANCiAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXAmIHN0b3JlKCk7DQogICAgDQogICAgICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwPiYgZmluZEFsbCgpOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cCYgZmluZCgpOw0KICAgIA0KICAgIH07DQogICAgDQogICAgY2xhc3MgTWFwcGluZ19Hcm91cHsNCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgTWFwcGluZ19Hcm91cCgpew0KICAgICAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgICAgIH5NYXBwaW5nX0dyb3VwKCl7DQogICAgICAgICAgICAgICAgLy8gZm9yIGV2ZXJ5ICJuZXciIHRoZXJlIG11c3QgYmUgYSAiZGVsZXRlIg0KICAgICAgICAgICAgfQ0KDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1hcHBpbmdfR3JvdXAuYWN0aXZlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2FjdGl2ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBib29sIGFjdGl2ZSgpOw0KICAgICAgICAgICAgTWFwcGluZ19Hcm91cCYgYWN0aXZlKGJvb2wgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nX0dyb3VwLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1hcHBpbmdfR3JvdXAuZW5hYmxlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9lbmFibGVkOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGJvb2wgZW5hYmxlZCgpOw0KICAgICAgICAgICAgTWFwcGluZ19Hcm91cCYgZW5hYmxlZChib29sIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWFwcGluZ19Hcm91cC5lbmFibGVkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWFwcGluZ19Hcm91cC5jb2RlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9jb2RlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIGNvZGUoKTsNCiAgICAgICAgICAgIE1hcHBpbmdfR3JvdXAmIGNvZGUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nX0dyb3VwLmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nX0dyb3VwLm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGludCBfb3JkZXI7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgaW50IG9yZGVyKCk7DQogICAgICAgICAgICBNYXBwaW5nX0dyb3VwJiBvcmRlcihpbnQgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nX0dyb3VwLm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWFwcGluZ19Hcm91cC5kYXRlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHRpbWVfdCBfZGF0ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICB0aW1lX3QgZGF0ZSgpOw0KICAgICAgICAgICAgTWFwcGluZ19Hcm91cCYgZGF0ZSh0aW1lX3Qgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nX0dyb3VwLmRhdGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nX0dyb3VwLm5hbWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX25hbWU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgbmFtZSgpOw0KICAgICAgICAgICAgTWFwcGluZ19Hcm91cCYgbmFtZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1hcHBpbmdfR3JvdXAubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1hcHBpbmdfR3JvdXAucmVtYXJrIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9yZW1hcms7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgcmVtYXJrKCk7DQogICAgICAgICAgICBNYXBwaW5nX0dyb3VwJiByZW1hcmsoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIA0KICAgICAgICAgICAgTWFwcGluZ19Hcm91cCYgcmVtYXJrKGpzb24gdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nX0dyb3VwLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQoNCiAgICANCg0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBNYXBwaW5nX0dyb3VwJiBfdW5pcXVlKCk7DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfdG9Eb2N1bWVudCgpOw0KICAgICAgICAgICAgTWFwcGluZ19Hcm91cCYgX2Zyb21Eb2N1bWVudChzdGQ6OnN0cmluZyBvYmopOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmdfR3JvdXAmIHN0b3JlKCk7DQogICAgDQogICAgICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cD4mIGZpbmRBbGwoKTsNCiAgICANCiAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nX0dyb3VwJiBmaW5kKCk7DQogICAgDQogICAgfTsNCiAgICANCiAgICBjbGFzcyBUb29sX1R5cGV7DQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIFRvb2xfVHlwZSgpew0KICAgICAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgICAgIH5Ub29sX1R5cGUoKXsNCiAgICAgICAgICAgICAgICAvLyBmb3IgZXZlcnkgIm5ldyIgdGhlcmUgbXVzdCBiZSBhICJkZWxldGUiDQogICAgICAgICAgICB9DQoNCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVG9vbF9UeXBlLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9hY3RpdmU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBhY3RpdmUoKTsNCiAgICAgICAgICAgIFRvb2xfVHlwZSYgYWN0aXZlKGJvb2wgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sX1R5cGUuYWN0aXZlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVG9vbF9UeXBlLmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgYm9vbCBfZW5hYmxlZDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBib29sIGVuYWJsZWQoKTsNCiAgICAgICAgICAgIFRvb2xfVHlwZSYgZW5hYmxlZChib29sIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVG9vbF9UeXBlLmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sX1R5cGUuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfY29kZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBjb2RlKCk7DQogICAgICAgICAgICBUb29sX1R5cGUmIGNvZGUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sX1R5cGUuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFRvb2xfVHlwZS5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBpbnQgX29yZGVyOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGludCBvcmRlcigpOw0KICAgICAgICAgICAgVG9vbF9UeXBlJiBvcmRlcihpbnQgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sX1R5cGUub3JkZXIgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sX1R5cGUuZGF0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICB0aW1lX3QgX2RhdGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgdGltZV90IGRhdGUoKTsNCiAgICAgICAgICAgIFRvb2xfVHlwZSYgZGF0ZSh0aW1lX3Qgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sX1R5cGUuZGF0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFRvb2xfVHlwZS5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9uYW1lOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIG5hbWUoKTsNCiAgICAgICAgICAgIFRvb2xfVHlwZSYgbmFtZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFRvb2xfVHlwZS5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVG9vbF9UeXBlLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfcmVtYXJrOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIHJlbWFyaygpOw0KICAgICAgICAgICAgVG9vbF9UeXBlJiByZW1hcmsoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIA0KICAgICAgICAgICAgVG9vbF9UeXBlJiByZW1hcmsoanNvbiB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFRvb2xfVHlwZS5yZW1hcmsgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFRvb2xfVHlwZS50eXBlX0NvbmZpZ3MgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnZlY3RvcjxzdGQ6OmFueT4qIF90eXBlX0NvbmZpZ3M7DQogICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiB0eXBlX0NvbmZpZ3MoKTsNCiAgICAgICAgICAgIFRvb2xfVHlwZSYgdHlwZV9Db25maWdzKHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sX1R5cGUudHlwZV9Db25maWdzIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVG9vbF9UeXBlLnR5cGVfVG9vbHMgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnZlY3RvcjxzdGQ6OmFueT4qIF90eXBlX1Rvb2xzOw0KICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjp2ZWN0b3I8c3RkOjphbnk+JiYgdHlwZV9Ub29scygpOw0KICAgICAgICAgICAgVG9vbF9UeXBlJiB0eXBlX1Rvb2xzKHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sX1R5cGUudHlwZV9Ub29scyBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFRvb2xfVHlwZS50eXBlX01hcHBpbmdzIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCg0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjp2ZWN0b3I8c3RkOjphbnk+KiBfdHlwZV9NYXBwaW5nczsNCiAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIHR5cGVfTWFwcGluZ3MoKTsNCiAgICAgICAgICAgIFRvb2xfVHlwZSYgdHlwZV9NYXBwaW5ncyhzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogVG9vbF9UeXBlLnR5cGVfTWFwcGluZ3MgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIFRvb2xfVHlwZSYgX3VuaXF1ZSgpOw0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX3RvRG9jdW1lbnQoKTsNCiAgICAgICAgICAgIFRvb2xfVHlwZSYgX2Zyb21Eb2N1bWVudChzdGQ6OnN0cmluZyBvYmopOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZSYgc3RvcmUoKTsNCiAgICANCiAgICAgICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGU+JiBmaW5kQWxsKCk7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlJiBmaW5kKCk7DQogICAgDQogICAgfTsNCiAgICANCiAgICBjbGFzcyBOb2RlX0NvbnRleHR7DQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIE5vZGVfQ29udGV4dCgpew0KICAgICAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgICAgIH5Ob2RlX0NvbnRleHQoKXsNCiAgICAgICAgICAgICAgICAvLyBmb3IgZXZlcnkgIm5ldyIgdGhlcmUgbXVzdCBiZSBhICJkZWxldGUiDQogICAgICAgICAgICB9DQoNCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9Db250ZXh0LmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9hY3RpdmU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBhY3RpdmUoKTsNCiAgICAgICAgICAgIE5vZGVfQ29udGV4dCYgYWN0aXZlKGJvb2wgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlX0NvbnRleHQuYWN0aXZlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9Db250ZXh0LmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgYm9vbCBfZW5hYmxlZDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBib29sIGVuYWJsZWQoKTsNCiAgICAgICAgICAgIE5vZGVfQ29udGV4dCYgZW5hYmxlZChib29sIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9Db250ZXh0LmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlX0NvbnRleHQuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfY29kZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBjb2RlKCk7DQogICAgICAgICAgICBOb2RlX0NvbnRleHQmIGNvZGUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlX0NvbnRleHQuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfQ29udGV4dC5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBpbnQgX29yZGVyOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGludCBvcmRlcigpOw0KICAgICAgICAgICAgTm9kZV9Db250ZXh0JiBvcmRlcihpbnQgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlX0NvbnRleHQub3JkZXIgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlX0NvbnRleHQuZGF0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICB0aW1lX3QgX2RhdGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgdGltZV90IGRhdGUoKTsNCiAgICAgICAgICAgIE5vZGVfQ29udGV4dCYgZGF0ZSh0aW1lX3Qgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlX0NvbnRleHQuZGF0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfQ29udGV4dC5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9uYW1lOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIG5hbWUoKTsNCiAgICAgICAgICAgIE5vZGVfQ29udGV4dCYgbmFtZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfQ29udGV4dC5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9Db250ZXh0LnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfcmVtYXJrOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIHJlbWFyaygpOw0KICAgICAgICAgICAgTm9kZV9Db250ZXh0JiByZW1hcmsoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIA0KICAgICAgICAgICAgTm9kZV9Db250ZXh0JiByZW1hcmsoanNvbiB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfQ29udGV4dC5yZW1hcmsgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfQ29udGV4dC5jb250ZXh0X05vZGVzIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCg0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjp2ZWN0b3I8c3RkOjphbnk+KiBfY29udGV4dF9Ob2RlczsNCiAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIGNvbnRleHRfTm9kZXMoKTsNCiAgICAgICAgICAgIE5vZGVfQ29udGV4dCYgY29udGV4dF9Ob2RlcyhzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9Db250ZXh0LmNvbnRleHRfTm9kZXMgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIE5vZGVfQ29udGV4dCYgX3VuaXF1ZSgpOw0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX3RvRG9jdW1lbnQoKTsNCiAgICAgICAgICAgIE5vZGVfQ29udGV4dCYgX2Zyb21Eb2N1bWVudChzdGQ6OnN0cmluZyBvYmopOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dCYgc3RvcmUoKTsNCiAgICANCiAgICAgICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQ+JiBmaW5kQWxsKCk7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Db250ZXh0JiBmaW5kKCk7DQogICAgDQogICAgfTsNCiAgICANCiAgICBjbGFzcyBOb2RlX0dyb3Vwew0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBOb2RlX0dyb3VwKCl7DQogICAgICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAgICAgfk5vZGVfR3JvdXAoKXsNCiAgICAgICAgICAgICAgICAvLyBmb3IgZXZlcnkgIm5ldyIgdGhlcmUgbXVzdCBiZSBhICJkZWxldGUiDQogICAgICAgICAgICB9DQoNCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9Hcm91cC5hY3RpdmUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgYm9vbCBfYWN0aXZlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGJvb2wgYWN0aXZlKCk7DQogICAgICAgICAgICBOb2RlX0dyb3VwJiBhY3RpdmUoYm9vbCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfR3JvdXAuYWN0aXZlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9Hcm91cC5lbmFibGVkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2VuYWJsZWQ7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBlbmFibGVkKCk7DQogICAgICAgICAgICBOb2RlX0dyb3VwJiBlbmFibGVkKGJvb2wgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlX0dyb3VwLmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlX0dyb3VwLmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX2NvZGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgY29kZSgpOw0KICAgICAgICAgICAgTm9kZV9Hcm91cCYgY29kZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfR3JvdXAuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfR3JvdXAub3JkZXIgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgaW50IF9vcmRlcjsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBpbnQgb3JkZXIoKTsNCiAgICAgICAgICAgIE5vZGVfR3JvdXAmIG9yZGVyKGludCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfR3JvdXAub3JkZXIgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlX0dyb3VwLmRhdGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgdGltZV90IF9kYXRlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHRpbWVfdCBkYXRlKCk7DQogICAgICAgICAgICBOb2RlX0dyb3VwJiBkYXRlKHRpbWVfdCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfR3JvdXAuZGF0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfR3JvdXAubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfbmFtZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBuYW1lKCk7DQogICAgICAgICAgICBOb2RlX0dyb3VwJiBuYW1lKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9Hcm91cC5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9Hcm91cC5yZW1hcmsgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX3JlbWFyazsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyByZW1hcmsoKTsNCiAgICAgICAgICAgIE5vZGVfR3JvdXAmIHJlbWFyayhzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgDQogICAgICAgICAgICBOb2RlX0dyb3VwJiByZW1hcmsoanNvbiB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfR3JvdXAucmVtYXJrIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCg0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlX0dyb3VwLmdyb3VwX05vZGVzIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCg0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjp2ZWN0b3I8c3RkOjphbnk+KiBfZ3JvdXBfTm9kZXM7DQogICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiBncm91cF9Ob2RlcygpOw0KICAgICAgICAgICAgTm9kZV9Hcm91cCYgZ3JvdXBfTm9kZXMoc3RkOjp2ZWN0b3I8c3RkOjphbnk+JiYgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfR3JvdXAuZ3JvdXBfTm9kZXMgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIE5vZGVfR3JvdXAmIF91bmlxdWUoKTsNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF90b0RvY3VtZW50KCk7DQogICAgICAgICAgICBOb2RlX0dyb3VwJiBfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iaik7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cCYgc3RvcmUoKTsNCiAgICANCiAgICAgICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwPiYgZmluZEFsbCgpOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXAmIGZpbmQoKTsNCiAgICANCiAgICB9Ow0KICAgIA0KICAgIGNsYXNzIE5vZGVfVHlwZXsNCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgTm9kZV9UeXBlKCl7DQogICAgICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAgICAgfk5vZGVfVHlwZSgpew0KICAgICAgICAgICAgICAgIC8vIGZvciBldmVyeSAibmV3IiB0aGVyZSBtdXN0IGJlIGEgImRlbGV0ZSINCiAgICAgICAgICAgIH0NCg0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlX1R5cGUuYWN0aXZlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2FjdGl2ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBib29sIGFjdGl2ZSgpOw0KICAgICAgICAgICAgTm9kZV9UeXBlJiBhY3RpdmUoYm9vbCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfVHlwZS5hY3RpdmUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlX1R5cGUuZW5hYmxlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9lbmFibGVkOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGJvb2wgZW5hYmxlZCgpOw0KICAgICAgICAgICAgTm9kZV9UeXBlJiBlbmFibGVkKGJvb2wgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlX1R5cGUuZW5hYmxlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfVHlwZS5jb2RlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9jb2RlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIGNvZGUoKTsNCiAgICAgICAgICAgIE5vZGVfVHlwZSYgY29kZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfVHlwZS5jb2RlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9UeXBlLm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGludCBfb3JkZXI7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgaW50IG9yZGVyKCk7DQogICAgICAgICAgICBOb2RlX1R5cGUmIG9yZGVyKGludCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfVHlwZS5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfVHlwZS5kYXRlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHRpbWVfdCBfZGF0ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICB0aW1lX3QgZGF0ZSgpOw0KICAgICAgICAgICAgTm9kZV9UeXBlJiBkYXRlKHRpbWVfdCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfVHlwZS5kYXRlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9UeXBlLm5hbWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX25hbWU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgbmFtZSgpOw0KICAgICAgICAgICAgTm9kZV9UeXBlJiBuYW1lKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9UeXBlLm5hbWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlX1R5cGUucmVtYXJrIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9yZW1hcms7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgcmVtYXJrKCk7DQogICAgICAgICAgICBOb2RlX1R5cGUmIHJlbWFyayhzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgDQogICAgICAgICAgICBOb2RlX1R5cGUmIHJlbWFyayhqc29uIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9UeXBlLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfVHlwZS5keW5hbWljIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2R5bmFtaWM7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBkeW5hbWljKCk7DQogICAgICAgICAgICBOb2RlX1R5cGUmIGR5bmFtaWMoYm9vbCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfVHlwZS5keW5hbWljIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCg0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlX1R5cGUudHlwZV9Ob2RlcyBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQoNCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiogX3R5cGVfTm9kZXM7DQogICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiB0eXBlX05vZGVzKCk7DQogICAgICAgICAgICBOb2RlX1R5cGUmIHR5cGVfTm9kZXMoc3RkOjp2ZWN0b3I8c3RkOjphbnk+JiYgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfVHlwZS50eXBlX05vZGVzIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCg0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBOb2RlX1R5cGUmIF91bmlxdWUoKTsNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF90b0RvY3VtZW50KCk7DQogICAgICAgICAgICBOb2RlX1R5cGUmIF9mcm9tRG9jdW1lbnQoc3RkOjpzdHJpbmcgb2JqKTsNCiAgICANCiAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGUmIHN0b3JlKCk7DQogICAgDQogICAgICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlPiYgZmluZEFsbCgpOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZSYgZmluZCgpOw0KICAgIA0KICAgIH07DQogICAgDQogICAgY2xhc3MgVG9vbHsNCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgVG9vbCgpew0KICAgICAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgICAgIH5Ub29sKCl7DQogICAgICAgICAgICAgICAgLy8gZm9yIGV2ZXJ5ICJuZXciIHRoZXJlIG11c3QgYmUgYSAiZGVsZXRlIg0KICAgICAgICAgICAgfQ0KDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFRvb2wuYWN0aXZlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2FjdGl2ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBib29sIGFjdGl2ZSgpOw0KICAgICAgICAgICAgVG9vbCYgYWN0aXZlKGJvb2wgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFRvb2wuZW5hYmxlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9lbmFibGVkOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGJvb2wgZW5hYmxlZCgpOw0KICAgICAgICAgICAgVG9vbCYgZW5hYmxlZChib29sIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVG9vbC5lbmFibGVkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVG9vbC5jb2RlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9jb2RlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIGNvZGUoKTsNCiAgICAgICAgICAgIFRvb2wmIGNvZGUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sLmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sLm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGludCBfb3JkZXI7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgaW50IG9yZGVyKCk7DQogICAgICAgICAgICBUb29sJiBvcmRlcihpbnQgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sLm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVG9vbC5kYXRlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHRpbWVfdCBfZGF0ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICB0aW1lX3QgZGF0ZSgpOw0KICAgICAgICAgICAgVG9vbCYgZGF0ZSh0aW1lX3Qgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sLmRhdGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sLm5hbWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX25hbWU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgbmFtZSgpOw0KICAgICAgICAgICAgVG9vbCYgbmFtZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFRvb2wubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFRvb2wucmVtYXJrIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9yZW1hcms7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgcmVtYXJrKCk7DQogICAgICAgICAgICBUb29sJiByZW1hcmsoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIA0KICAgICAgICAgICAgVG9vbCYgcmVtYXJrKGpzb24gdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFRvb2wudHlwZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZSogX3R5cGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGUqIHR5cGUoKTsNCiAgICAgICAgICAgIFRvb2wmIHR5cGUoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGUmIHYpOw0KICAgICAgICANCiAgICAgICAgICAgIFRvb2wmIHR5cGUoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGUqIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVG9vbC50eXBlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCg0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sLnRvb2xfQ29uZmlncyBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQoNCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiogX3Rvb2xfQ29uZmlnczsNCiAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIHRvb2xfQ29uZmlncygpOw0KICAgICAgICAgICAgVG9vbCYgdG9vbF9Db25maWdzKHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sLnRvb2xfQ29uZmlncyBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFRvb2wudG9vbF9NYXBwaW5ncyBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQoNCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiogX3Rvb2xfTWFwcGluZ3M7DQogICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiB0b29sX01hcHBpbmdzKCk7DQogICAgICAgICAgICBUb29sJiB0b29sX01hcHBpbmdzKHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sLnRvb2xfTWFwcGluZ3MgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIFRvb2wmIF91bmlxdWUoKTsNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF90b0RvY3VtZW50KCk7DQogICAgICAgICAgICBUb29sJiBfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iaik7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbCYgc3RvcmUoKTsNCiAgICANCiAgICAgICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sPiYgZmluZEFsbCgpOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2wmIGZpbmQoKTsNCiAgICANCiAgICB9Ow0KICAgIA0KICAgIGNsYXNzIE1hcHBpbmd7DQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIE1hcHBpbmcoKXsNCiAgICAgICAgICAgIH0NCiAgICAgICAgDQogICAgICAgICAgICB+TWFwcGluZygpew0KICAgICAgICAgICAgICAgIC8vIGZvciBldmVyeSAibmV3IiB0aGVyZSBtdXN0IGJlIGEgImRlbGV0ZSINCiAgICAgICAgICAgIH0NCg0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9hY3RpdmU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBhY3RpdmUoKTsNCiAgICAgICAgICAgIE1hcHBpbmcmIGFjdGl2ZShib29sIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWFwcGluZy5hY3RpdmUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nLmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgYm9vbCBfZW5hYmxlZDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBib29sIGVuYWJsZWQoKTsNCiAgICAgICAgICAgIE1hcHBpbmcmIGVuYWJsZWQoYm9vbCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1hcHBpbmcuZW5hYmxlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1hcHBpbmcub3JkZXIgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgaW50IF9vcmRlcjsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBpbnQgb3JkZXIoKTsNCiAgICAgICAgICAgIE1hcHBpbmcmIG9yZGVyKGludCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1hcHBpbmcub3JkZXIgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nLmNsYXNzTmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfY2xhc3NOYW1lOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIGNsYXNzTmFtZSgpOw0KICAgICAgICAgICAgTWFwcGluZyYgY2xhc3NOYW1lKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWFwcGluZy5jbGFzc05hbWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nLnNjb3BlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9zY29wZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBzY29wZSgpOw0KICAgICAgICAgICAgTWFwcGluZyYgc2NvcGUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nLnNjb3BlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWFwcGluZy5jb250ZXh0IEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9jb250ZXh0Ow0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIGNvbnRleHQoKTsNCiAgICAgICAgICAgIE1hcHBpbmcmIGNvbnRleHQoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nLmNvbnRleHQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nLnNvdXJjZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfc291cmNlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIHNvdXJjZSgpOw0KICAgICAgICAgICAgTWFwcGluZyYgc291cmNlKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWFwcGluZy5zb3VyY2UgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nLnRhcmdldCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfdGFyZ2V0Ow0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIHRhcmdldCgpOw0KICAgICAgICAgICAgTWFwcGluZyYgdGFyZ2V0KHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWFwcGluZy50YXJnZXQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nLmluU2NyaXB0IEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9pblNjcmlwdDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBpblNjcmlwdCgpOw0KICAgICAgICAgICAgTWFwcGluZyYgaW5TY3JpcHQoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIA0KICAgICAgICAgICAgTWFwcGluZyYgaW5TY3JpcHQoanNvbiB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1hcHBpbmcuaW5TY3JpcHQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nLm91dFNjcmlwdCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfb3V0U2NyaXB0Ow0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIG91dFNjcmlwdCgpOw0KICAgICAgICAgICAgTWFwcGluZyYgb3V0U2NyaXB0KHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICANCiAgICAgICAgICAgIE1hcHBpbmcmIG91dFNjcmlwdChqc29uIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWFwcGluZy5vdXRTY3JpcHQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nLnRvb2wgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sKiBfdG9vbDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2wqIHRvb2woKTsNCiAgICAgICAgICAgIE1hcHBpbmcmIHRvb2woZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sJiB2KTsNCiAgICAgICAgDQogICAgICAgICAgICBNYXBwaW5nJiB0b29sKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbCogdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nLnRvb2wgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nLmdyb3VwIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwKiBfZ3JvdXA7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXAqIGdyb3VwKCk7DQogICAgICAgICAgICBNYXBwaW5nJiBncm91cChlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cCYgdik7DQogICAgICAgIA0KICAgICAgICAgICAgTWFwcGluZyYgZ3JvdXAoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXAqIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWFwcGluZy5ncm91cCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1hcHBpbmcudHlwZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZSogX3R5cGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGUqIHR5cGUoKTsNCiAgICAgICAgICAgIE1hcHBpbmcmIHR5cGUoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGUmIHYpOw0KICAgICAgICANCiAgICAgICAgICAgIE1hcHBpbmcmIHR5cGUoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGUqIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWFwcGluZy50eXBlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCg0KICAgIA0KDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIE1hcHBpbmcmIF91bmlxdWUoKTsNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF90b0RvY3VtZW50KCk7DQogICAgICAgICAgICBNYXBwaW5nJiBfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iaik7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZyYgc3RvcmUoKTsNCiAgICANCiAgICAgICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nPiYgZmluZEFsbCgpOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmcmIGZpbmQoKTsNCiAgICANCiAgICB9Ow0KICAgIA0KICAgIGNsYXNzIE5vZGV7DQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIE5vZGUoKXsNCiAgICAgICAgICAgIH0NCiAgICAgICAgDQogICAgICAgICAgICB+Tm9kZSgpew0KICAgICAgICAgICAgICAgIC8vIGZvciBldmVyeSAibmV3IiB0aGVyZSBtdXN0IGJlIGEgImRlbGV0ZSINCiAgICAgICAgICAgIH0NCg0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9hY3RpdmU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBhY3RpdmUoKTsNCiAgICAgICAgICAgIE5vZGUmIGFjdGl2ZShib29sIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZS5hY3RpdmUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgYm9vbCBfZW5hYmxlZDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBib29sIGVuYWJsZWQoKTsNCiAgICAgICAgICAgIE5vZGUmIGVuYWJsZWQoYm9vbCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGUuZW5hYmxlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGUuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfY29kZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBjb2RlKCk7DQogICAgICAgICAgICBOb2RlJiBjb2RlKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZS5jb2RlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZS5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBpbnQgX29yZGVyOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGludCBvcmRlcigpOw0KICAgICAgICAgICAgTm9kZSYgb3JkZXIoaW50IHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZS5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGUuZGF0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICB0aW1lX3QgX2RhdGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgdGltZV90IGRhdGUoKTsNCiAgICAgICAgICAgIE5vZGUmIGRhdGUodGltZV90IHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZS5kYXRlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZS5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9uYW1lOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIG5hbWUoKTsNCiAgICAgICAgICAgIE5vZGUmIG5hbWUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLm5hbWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfcmVtYXJrOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIHJlbWFyaygpOw0KICAgICAgICAgICAgTm9kZSYgcmVtYXJrKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICANCiAgICAgICAgICAgIE5vZGUmIHJlbWFyayhqc29uIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZS5yZW1hcmsgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLmFkZHJlc3MgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX2FkZHJlc3M7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgYWRkcmVzcygpOw0KICAgICAgICAgICAgTm9kZSYgYWRkcmVzcyhzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGUuYWRkcmVzcyBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGUuYmFja3VwIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSogX2JhY2t1cDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUqIGJhY2t1cCgpOw0KICAgICAgICAgICAgTm9kZSYgYmFja3VwKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgdik7DQogICAgICAgIA0KICAgICAgICAgICAgTm9kZSYgYmFja3VwKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSogdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLmJhY2t1cCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGUucGFyZW50IEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSogX3BhcmVudDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUqIHBhcmVudCgpOw0KICAgICAgICAgICAgTm9kZSYgcGFyZW50KGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgdik7DQogICAgICAgIA0KICAgICAgICAgICAgTm9kZSYgcGFyZW50KGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSogdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLnBhcmVudCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGUuZ3JvdXAgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwKiBfZ3JvdXA7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwKiBncm91cCgpOw0KICAgICAgICAgICAgTm9kZSYgZ3JvdXAoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwJiB2KTsNCiAgICAgICAgDQogICAgICAgICAgICBOb2RlJiBncm91cChlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXAqIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZS5ncm91cCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGUuY29udGV4dCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dCogX2NvbnRleHQ7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQqIGNvbnRleHQoKTsNCiAgICAgICAgICAgIE5vZGUmIGNvbnRleHQoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQmIHYpOw0KICAgICAgICANCiAgICAgICAgICAgIE5vZGUmIGNvbnRleHQoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQqIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZS5jb250ZXh0IEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZS5wb3J0IEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGludCBfcG9ydDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBpbnQgcG9ydCgpOw0KICAgICAgICAgICAgTm9kZSYgcG9ydChpbnQgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLnBvcnQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLm9ubGluZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICB0aW1lX3QgX29ubGluZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICB0aW1lX3Qgb25saW5lKCk7DQogICAgICAgICAgICBOb2RlJiBvbmxpbmUodGltZV90IHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZS5vbmxpbmUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLnNlY3VyZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9zZWN1cmU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBzZWN1cmUoKTsNCiAgICAgICAgICAgIE5vZGUmIHNlY3VyZShib29sIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZS5zZWN1cmUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLnR5cGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGUqIF90eXBlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlKiB0eXBlKCk7DQogICAgICAgICAgICBOb2RlJiB0eXBlKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlJiB2KTsNCiAgICAgICAgDQogICAgICAgICAgICBOb2RlJiB0eXBlKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlKiB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGUudHlwZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQoNCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZS5jb250cm9sbGVyX0RldmljZXMgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnZlY3RvcjxzdGQ6OmFueT4qIF9jb250cm9sbGVyX0RldmljZXM7DQogICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiBjb250cm9sbGVyX0RldmljZXMoKTsNCiAgICAgICAgICAgIE5vZGUmIGNvbnRyb2xsZXJfRGV2aWNlcyhzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZS5jb250cm9sbGVyX0RldmljZXMgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLm5vZGVfQ29uZmlncyBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQoNCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiogX25vZGVfQ29uZmlnczsNCiAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIG5vZGVfQ29uZmlncygpOw0KICAgICAgICAgICAgTm9kZSYgbm9kZV9Db25maWdzKHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLm5vZGVfQ29uZmlncyBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGUuY2Fycmllcl9FdmVudHMgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnZlY3RvcjxzdGQ6OmFueT4qIF9jYXJyaWVyX0V2ZW50czsNCiAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIGNhcnJpZXJfRXZlbnRzKCk7DQogICAgICAgICAgICBOb2RlJiBjYXJyaWVyX0V2ZW50cyhzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZS5jYXJyaWVyX0V2ZW50cyBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGUuc2VuZGVyX0V2ZW50cyBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQoNCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiogX3NlbmRlcl9FdmVudHM7DQogICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiBzZW5kZXJfRXZlbnRzKCk7DQogICAgICAgICAgICBOb2RlJiBzZW5kZXJfRXZlbnRzKHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLnNlbmRlcl9FdmVudHMgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLnJlY2lwaWVudF9FdmVudHMgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnZlY3RvcjxzdGQ6OmFueT4qIF9yZWNpcGllbnRfRXZlbnRzOw0KICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjp2ZWN0b3I8c3RkOjphbnk+JiYgcmVjaXBpZW50X0V2ZW50cygpOw0KICAgICAgICAgICAgTm9kZSYgcmVjaXBpZW50X0V2ZW50cyhzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZS5yZWNpcGllbnRfRXZlbnRzIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZS5iYWNrdXBfTm9kZXMgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnZlY3RvcjxzdGQ6OmFueT4qIF9iYWNrdXBfTm9kZXM7DQogICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiBiYWNrdXBfTm9kZXMoKTsNCiAgICAgICAgICAgIE5vZGUmIGJhY2t1cF9Ob2RlcyhzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZS5iYWNrdXBfTm9kZXMgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLnBhcmVudF9Ob2RlcyBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQoNCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiogX3BhcmVudF9Ob2RlczsNCiAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIHBhcmVudF9Ob2RlcygpOw0KICAgICAgICAgICAgTm9kZSYgcGFyZW50X05vZGVzKHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLnBhcmVudF9Ob2RlcyBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQoNCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgTm9kZSYgX3VuaXF1ZSgpOw0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX3RvRG9jdW1lbnQoKTsNCiAgICAgICAgICAgIE5vZGUmIF9mcm9tRG9jdW1lbnQoc3RkOjpzdHJpbmcgb2JqKTsNCiAgICANCiAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiBzdG9yZSgpOw0KICAgIA0KICAgICAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU+JiBmaW5kQWxsKCk7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgZmluZCgpOw0KICAgIA0KICAgICAgICBqc29uIGF1dGhDb2RlKHN0ZDo6c3RyaW5nIGNvZGUsIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbCYgdG9vbCk7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgaW5pdChpbnQgb25saW5lLCBzdGQ6OnN0cmluZyBjb2RlLCBzdGQ6OnN0cmluZyB1aWQpOw0KICAgIA0KICAgIH07DQogICAgDQogICAgY2xhc3MgQ29uZmlnew0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBDb25maWcoKXsNCiAgICAgICAgICAgIH0NCiAgICAgICAgDQogICAgICAgICAgICB+Q29uZmlnKCl7DQogICAgICAgICAgICAgICAgLy8gZm9yIGV2ZXJ5ICJuZXciIHRoZXJlIG11c3QgYmUgYSAiZGVsZXRlIg0KICAgICAgICAgICAgfQ0KDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZy5hY3RpdmUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgYm9vbCBfYWN0aXZlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGJvb2wgYWN0aXZlKCk7DQogICAgICAgICAgICBDb25maWcmIGFjdGl2ZShib29sIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZy5lbmFibGVkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2VuYWJsZWQ7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBlbmFibGVkKCk7DQogICAgICAgICAgICBDb25maWcmIGVuYWJsZWQoYm9vbCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZy5lbmFibGVkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnLmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX2NvZGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgY29kZSgpOw0KICAgICAgICAgICAgQ29uZmlnJiBjb2RlKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnLmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBDb25maWcub3JkZXIgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgaW50IF9vcmRlcjsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBpbnQgb3JkZXIoKTsNCiAgICAgICAgICAgIENvbmZpZyYgb3JkZXIoaW50IHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnLm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnLmRhdGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgdGltZV90IF9kYXRlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHRpbWVfdCBkYXRlKCk7DQogICAgICAgICAgICBDb25maWcmIGRhdGUodGltZV90IHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnLmRhdGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBDb25maWcubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfbmFtZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBuYW1lKCk7DQogICAgICAgICAgICBDb25maWcmIG5hbWUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBDb25maWcubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZy5yZW1hcmsgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX3JlbWFyazsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyByZW1hcmsoKTsNCiAgICAgICAgICAgIENvbmZpZyYgcmVtYXJrKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICANCiAgICAgICAgICAgIENvbmZpZyYgcmVtYXJrKGpzb24gdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBDb25maWcucmVtYXJrIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnLnZhbHVlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF92YWx1ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyB2YWx1ZSgpOw0KICAgICAgICAgICAgQ29uZmlnJiB2YWx1ZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgDQogICAgICAgICAgICBDb25maWcmIHZhbHVlKGpzb24gdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBDb25maWcudmFsdWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBDb25maWcuc2NyaXB0IEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9zY3JpcHQ7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgc2NyaXB0KCk7DQogICAgICAgICAgICBDb25maWcmIHNjcmlwdChzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgDQogICAgICAgICAgICBDb25maWcmIHNjcmlwdChqc29uIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnLnNjcmlwdCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZy50b29sIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbCogX3Rvb2w7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sKiB0b29sKCk7DQogICAgICAgICAgICBDb25maWcmIHRvb2woZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sJiB2KTsNCiAgICAgICAgDQogICAgICAgICAgICBDb25maWcmIHRvb2woZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sKiB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZy50b29sIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnLmdyb3VwIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwKiBfZ3JvdXA7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXAqIGdyb3VwKCk7DQogICAgICAgICAgICBDb25maWcmIGdyb3VwKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwJiB2KTsNCiAgICAgICAgDQogICAgICAgICAgICBDb25maWcmIGdyb3VwKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwKiB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZy5ncm91cCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZy50eXBlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlKiBfdHlwZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZSogdHlwZSgpOw0KICAgICAgICAgICAgQ29uZmlnJiB0eXBlKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlJiB2KTsNCiAgICAgICAgDQogICAgICAgICAgICBDb25maWcmIHR5cGUoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGUqIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnLnR5cGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBDb25maWcubm9kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUqIF9ub2RlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSogbm9kZSgpOw0KICAgICAgICAgICAgQ29uZmlnJiBub2RlKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgdik7DQogICAgICAgIA0KICAgICAgICAgICAgQ29uZmlnJiBub2RlKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSogdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBDb25maWcubm9kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQoNCiAgICANCg0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBDb25maWcmIF91bmlxdWUoKTsNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF90b0RvY3VtZW50KCk7DQogICAgICAgICAgICBDb25maWcmIF9mcm9tRG9jdW1lbnQoc3RkOjpzdHJpbmcgb2JqKTsNCiAgICANCiAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWcmIHN0b3JlKCk7DQogICAgDQogICAgICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnPiYgZmluZEFsbCgpOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZyYgZmluZCgpOw0KICAgIA0KICAgIH07DQogICAgDQogICAgY2xhc3MgRXZlbnR7DQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIEV2ZW50KCl7DQogICAgICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAgICAgfkV2ZW50KCl7DQogICAgICAgICAgICAgICAgLy8gZm9yIGV2ZXJ5ICJuZXciIHRoZXJlIG11c3QgYmUgYSAiZGVsZXRlIg0KICAgICAgICAgICAgfQ0KDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIEV2ZW50LmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9hY3RpdmU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBhY3RpdmUoKTsNCiAgICAgICAgICAgIEV2ZW50JiBhY3RpdmUoYm9vbCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIEV2ZW50LmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIEV2ZW50LmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgYm9vbCBfZW5hYmxlZDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBib29sIGVuYWJsZWQoKTsNCiAgICAgICAgICAgIEV2ZW50JiBlbmFibGVkKGJvb2wgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBFdmVudC5lbmFibGVkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRXZlbnQuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfY29kZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBjb2RlKCk7DQogICAgICAgICAgICBFdmVudCYgY29kZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIEV2ZW50LmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBFdmVudC5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBpbnQgX29yZGVyOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGludCBvcmRlcigpOw0KICAgICAgICAgICAgRXZlbnQmIG9yZGVyKGludCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIEV2ZW50Lm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRXZlbnQuZGF0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICB0aW1lX3QgX2RhdGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgdGltZV90IGRhdGUoKTsNCiAgICAgICAgICAgIEV2ZW50JiBkYXRlKHRpbWVfdCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIEV2ZW50LmRhdGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBFdmVudC5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9uYW1lOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIG5hbWUoKTsNCiAgICAgICAgICAgIEV2ZW50JiBuYW1lKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRXZlbnQubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIEV2ZW50LnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfcmVtYXJrOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIHJlbWFyaygpOw0KICAgICAgICAgICAgRXZlbnQmIHJlbWFyayhzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgDQogICAgICAgICAgICBFdmVudCYgcmVtYXJrKGpzb24gdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBFdmVudC5yZW1hcmsgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBFdmVudC5jbGFzc05hbWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX2NsYXNzTmFtZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBjbGFzc05hbWUoKTsNCiAgICAgICAgICAgIEV2ZW50JiBjbGFzc05hbWUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBFdmVudC5jbGFzc05hbWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBFdmVudC5tZXRob2QgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX21ldGhvZDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBtZXRob2QoKTsNCiAgICAgICAgICAgIEV2ZW50JiBtZXRob2Qoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBFdmVudC5tZXRob2QgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBFdmVudC5wYXlsb2FkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9wYXlsb2FkOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIHBheWxvYWQoKTsNCiAgICAgICAgICAgIEV2ZW50JiBwYXlsb2FkKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICANCiAgICAgICAgICAgIEV2ZW50JiBwYXlsb2FkKGpzb24gdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBFdmVudC5wYXlsb2FkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRXZlbnQuY2FycmllciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUqIF9jYXJyaWVyOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSogY2FycmllcigpOw0KICAgICAgICAgICAgRXZlbnQmIGNhcnJpZXIoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiB2KTsNCiAgICAgICAgDQogICAgICAgICAgICBFdmVudCYgY2Fycmllcihlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUqIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRXZlbnQuY2FycmllciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIEV2ZW50LnNlbmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUqIF9zZW5kZXI7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlKiBzZW5kZXIoKTsNCiAgICAgICAgICAgIEV2ZW50JiBzZW5kZXIoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiB2KTsNCiAgICAgICAgDQogICAgICAgICAgICBFdmVudCYgc2VuZGVyKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSogdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBFdmVudC5zZW5kZXIgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBFdmVudC5yZWNpcGllbnQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlKiBfcmVjaXBpZW50Ow0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSogcmVjaXBpZW50KCk7DQogICAgICAgICAgICBFdmVudCYgcmVjaXBpZW50KGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgdik7DQogICAgICAgIA0KICAgICAgICAgICAgRXZlbnQmIHJlY2lwaWVudChlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUqIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRXZlbnQucmVjaXBpZW50IEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRXZlbnQucmVzcG9uc2VUbyBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KiBfcmVzcG9uc2VUbzsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KiByZXNwb25zZVRvKCk7DQogICAgICAgICAgICBFdmVudCYgcmVzcG9uc2VUbyhlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50JiB2KTsNCiAgICAgICAgDQogICAgICAgICAgICBFdmVudCYgcmVzcG9uc2VUbyhlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KiB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIEV2ZW50LnJlc3BvbnNlVG8gR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIEV2ZW50LnJlc3BvbnNlVG9fRXZlbnRzIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCg0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjp2ZWN0b3I8c3RkOjphbnk+KiBfcmVzcG9uc2VUb19FdmVudHM7DQogICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiByZXNwb25zZVRvX0V2ZW50cygpOw0KICAgICAgICAgICAgRXZlbnQmIHJlc3BvbnNlVG9fRXZlbnRzKHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBFdmVudC5yZXNwb25zZVRvX0V2ZW50cyBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQoNCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgRXZlbnQmIF91bmlxdWUoKTsNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF90b0RvY3VtZW50KCk7DQogICAgICAgICAgICBFdmVudCYgX2Zyb21Eb2N1bWVudChzdGQ6OnN0cmluZyBvYmopOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50JiBzdG9yZSgpOw0KICAgIA0KICAgICAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50PiYgZmluZEFsbCgpOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50JiBmaW5kKCk7DQogICAgDQogICAgICAgIGpzb24gbGlzdGVuKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgbm9kZSk7DQogICAgDQogICAgICAgIGpzb24gdHJpZ2dlcigpOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50JiBwcm9jZXNzKCk7DQogICAgDQogICAgfTsNCiAgICANCn0KCQp9CgkKfQoJCn0KCQ0KDQpuYW1lc3BhY2UgZXNwdGVzdHsKCQpuYW1lc3BhY2UgY29tewoJCm5hbWVzcGFjZSBuYW1tb3VyewoJCm5hbWVzcGFjZSBkaW90ewoJDQogICAgDQogICAgY2xhc3MgRGV2aWNlX0NhdGVnb3J5ew0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBEZXZpY2VfQ2F0ZWdvcnkoKXsNCiAgICAgICAgICAgIH0NCiAgICAgICAgDQogICAgICAgICAgICB+RGV2aWNlX0NhdGVnb3J5KCl7DQogICAgICAgICAgICAgICAgLy8gZm9yIGV2ZXJ5ICJuZXciIHRoZXJlIG11c3QgYmUgYSAiZGVsZXRlIg0KICAgICAgICAgICAgfQ0KDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9DYXRlZ29yeS5hY3RpdmUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgYm9vbCBfYWN0aXZlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGJvb2wgYWN0aXZlKCk7DQogICAgICAgICAgICBEZXZpY2VfQ2F0ZWdvcnkmIGFjdGl2ZShib29sIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0NhdGVnb3J5LmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9DYXRlZ29yeS5lbmFibGVkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2VuYWJsZWQ7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBlbmFibGVkKCk7DQogICAgICAgICAgICBEZXZpY2VfQ2F0ZWdvcnkmIGVuYWJsZWQoYm9vbCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9DYXRlZ29yeS5lbmFibGVkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0NhdGVnb3J5LmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX2NvZGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgY29kZSgpOw0KICAgICAgICAgICAgRGV2aWNlX0NhdGVnb3J5JiBjb2RlKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0NhdGVnb3J5LmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfQ2F0ZWdvcnkub3JkZXIgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgaW50IF9vcmRlcjsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBpbnQgb3JkZXIoKTsNCiAgICAgICAgICAgIERldmljZV9DYXRlZ29yeSYgb3JkZXIoaW50IHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0NhdGVnb3J5Lm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0NhdGVnb3J5LmRhdGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgdGltZV90IF9kYXRlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHRpbWVfdCBkYXRlKCk7DQogICAgICAgICAgICBEZXZpY2VfQ2F0ZWdvcnkmIGRhdGUodGltZV90IHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0NhdGVnb3J5LmRhdGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfQ2F0ZWdvcnkubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfbmFtZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBuYW1lKCk7DQogICAgICAgICAgICBEZXZpY2VfQ2F0ZWdvcnkmIG5hbWUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfQ2F0ZWdvcnkubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9DYXRlZ29yeS5yZW1hcmsgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX3JlbWFyazsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyByZW1hcmsoKTsNCiAgICAgICAgICAgIERldmljZV9DYXRlZ29yeSYgcmVtYXJrKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICANCiAgICAgICAgICAgIERldmljZV9DYXRlZ29yeSYgcmVtYXJrKGpzb24gdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfQ2F0ZWdvcnkucmVtYXJrIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0NhdGVnb3J5LnBhcmVudCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeSogX3BhcmVudDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeSogcGFyZW50KCk7DQogICAgICAgICAgICBEZXZpY2VfQ2F0ZWdvcnkmIHBhcmVudChlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeSYgdik7DQogICAgICAgIA0KICAgICAgICAgICAgRGV2aWNlX0NhdGVnb3J5JiBwYXJlbnQoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnkqIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0NhdGVnb3J5LnBhcmVudCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQoNCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0NhdGVnb3J5LnBhcmVudF9EZXZpY2VfQ2F0ZWdvcnlzIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCg0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjp2ZWN0b3I8c3RkOjphbnk+KiBfcGFyZW50X0RldmljZV9DYXRlZ29yeXM7DQogICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiBwYXJlbnRfRGV2aWNlX0NhdGVnb3J5cygpOw0KICAgICAgICAgICAgRGV2aWNlX0NhdGVnb3J5JiBwYXJlbnRfRGV2aWNlX0NhdGVnb3J5cyhzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0NhdGVnb3J5LnBhcmVudF9EZXZpY2VfQ2F0ZWdvcnlzIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0NhdGVnb3J5LmNhdGVnb3J5X0RldmljZV9UeXBlcyBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQoNCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiogX2NhdGVnb3J5X0RldmljZV9UeXBlczsNCiAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIGNhdGVnb3J5X0RldmljZV9UeXBlcygpOw0KICAgICAgICAgICAgRGV2aWNlX0NhdGVnb3J5JiBjYXRlZ29yeV9EZXZpY2VfVHlwZXMoc3RkOjp2ZWN0b3I8c3RkOjphbnk+JiYgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9DYXRlZ29yeS5jYXRlZ29yeV9EZXZpY2VfVHlwZXMgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIERldmljZV9DYXRlZ29yeSYgX3VuaXF1ZSgpOw0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX3RvRG9jdW1lbnQoKTsNCiAgICAgICAgICAgIERldmljZV9DYXRlZ29yeSYgX2Zyb21Eb2N1bWVudChzdGQ6OnN0cmluZyBvYmopOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeSYgc3RvcmUoKTsNCiAgICANCiAgICAgICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnk+JiBmaW5kQWxsKCk7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5JiBmaW5kKCk7DQogICAgDQogICAgfTsNCiAgICANCiAgICBjbGFzcyBNZXRyaWNfR3JvdXB7DQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIE1ldHJpY19Hcm91cCgpew0KICAgICAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgICAgIH5NZXRyaWNfR3JvdXAoKXsNCiAgICAgICAgICAgICAgICAvLyBmb3IgZXZlcnkgIm5ldyIgdGhlcmUgbXVzdCBiZSBhICJkZWxldGUiDQogICAgICAgICAgICB9DQoNCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX0dyb3VwLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9hY3RpdmU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBhY3RpdmUoKTsNCiAgICAgICAgICAgIE1ldHJpY19Hcm91cCYgYWN0aXZlKGJvb2wgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfR3JvdXAuYWN0aXZlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX0dyb3VwLmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgYm9vbCBfZW5hYmxlZDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBib29sIGVuYWJsZWQoKTsNCiAgICAgICAgICAgIE1ldHJpY19Hcm91cCYgZW5hYmxlZChib29sIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX0dyb3VwLmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfR3JvdXAuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfY29kZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBjb2RlKCk7DQogICAgICAgICAgICBNZXRyaWNfR3JvdXAmIGNvZGUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfR3JvdXAuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19Hcm91cC5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBpbnQgX29yZGVyOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGludCBvcmRlcigpOw0KICAgICAgICAgICAgTWV0cmljX0dyb3VwJiBvcmRlcihpbnQgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfR3JvdXAub3JkZXIgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfR3JvdXAuZGF0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICB0aW1lX3QgX2RhdGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgdGltZV90IGRhdGUoKTsNCiAgICAgICAgICAgIE1ldHJpY19Hcm91cCYgZGF0ZSh0aW1lX3Qgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfR3JvdXAuZGF0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19Hcm91cC5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9uYW1lOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIG5hbWUoKTsNCiAgICAgICAgICAgIE1ldHJpY19Hcm91cCYgbmFtZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19Hcm91cC5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX0dyb3VwLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfcmVtYXJrOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIHJlbWFyaygpOw0KICAgICAgICAgICAgTWV0cmljX0dyb3VwJiByZW1hcmsoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIA0KICAgICAgICAgICAgTWV0cmljX0dyb3VwJiByZW1hcmsoanNvbiB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19Hcm91cC5yZW1hcmsgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19Hcm91cC5ncm91cF9NZXRyaWNfVHlwZXMgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnZlY3RvcjxzdGQ6OmFueT4qIF9ncm91cF9NZXRyaWNfVHlwZXM7DQogICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiBncm91cF9NZXRyaWNfVHlwZXMoKTsNCiAgICAgICAgICAgIE1ldHJpY19Hcm91cCYgZ3JvdXBfTWV0cmljX1R5cGVzKHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfR3JvdXAuZ3JvdXBfTWV0cmljX1R5cGVzIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCg0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBNZXRyaWNfR3JvdXAmIF91bmlxdWUoKTsNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF90b0RvY3VtZW50KCk7DQogICAgICAgICAgICBNZXRyaWNfR3JvdXAmIF9mcm9tRG9jdW1lbnQoc3RkOjpzdHJpbmcgb2JqKTsNCiAgICANCiAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXAmIHN0b3JlKCk7DQogICAgDQogICAgICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwPiYgZmluZEFsbCgpOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19Hcm91cCYgZmluZCgpOw0KICAgIA0KICAgIH07DQogICAgDQogICAgY2xhc3MgRGV2aWNlX1R5cGV7DQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIERldmljZV9UeXBlKCl7DQogICAgICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAgICAgfkRldmljZV9UeXBlKCl7DQogICAgICAgICAgICAgICAgLy8gZm9yIGV2ZXJ5ICJuZXciIHRoZXJlIG11c3QgYmUgYSAiZGVsZXRlIg0KICAgICAgICAgICAgfQ0KDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9UeXBlLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9hY3RpdmU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBhY3RpdmUoKTsNCiAgICAgICAgICAgIERldmljZV9UeXBlJiBhY3RpdmUoYm9vbCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9UeXBlLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9UeXBlLmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgYm9vbCBfZW5hYmxlZDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBib29sIGVuYWJsZWQoKTsNCiAgICAgICAgICAgIERldmljZV9UeXBlJiBlbmFibGVkKGJvb2wgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfVHlwZS5lbmFibGVkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX1R5cGUuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfY29kZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBjb2RlKCk7DQogICAgICAgICAgICBEZXZpY2VfVHlwZSYgY29kZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9UeXBlLmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfVHlwZS5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBpbnQgX29yZGVyOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGludCBvcmRlcigpOw0KICAgICAgICAgICAgRGV2aWNlX1R5cGUmIG9yZGVyKGludCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9UeXBlLm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX1R5cGUuZGF0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICB0aW1lX3QgX2RhdGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgdGltZV90IGRhdGUoKTsNCiAgICAgICAgICAgIERldmljZV9UeXBlJiBkYXRlKHRpbWVfdCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9UeXBlLmRhdGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfVHlwZS5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9uYW1lOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIG5hbWUoKTsNCiAgICAgICAgICAgIERldmljZV9UeXBlJiBuYW1lKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX1R5cGUubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9UeXBlLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfcmVtYXJrOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIHJlbWFyaygpOw0KICAgICAgICAgICAgRGV2aWNlX1R5cGUmIHJlbWFyayhzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgDQogICAgICAgICAgICBEZXZpY2VfVHlwZSYgcmVtYXJrKGpzb24gdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfVHlwZS5yZW1hcmsgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfVHlwZS5jYXRlZ29yeSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeSogX2NhdGVnb3J5Ow0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5KiBjYXRlZ29yeSgpOw0KICAgICAgICAgICAgRGV2aWNlX1R5cGUmIGNhdGVnb3J5KGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5JiB2KTsNCiAgICAgICAgDQogICAgICAgICAgICBEZXZpY2VfVHlwZSYgY2F0ZWdvcnkoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnkqIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX1R5cGUuY2F0ZWdvcnkgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9UeXBlLmRldmljZVR5cGVfTWV0cmljcyBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQoNCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiogX2RldmljZVR5cGVfTWV0cmljczsNCiAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIGRldmljZVR5cGVfTWV0cmljcygpOw0KICAgICAgICAgICAgRGV2aWNlX1R5cGUmIGRldmljZVR5cGVfTWV0cmljcyhzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX1R5cGUuZGV2aWNlVHlwZV9NZXRyaWNzIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX1R5cGUudHlwZV9EZXZpY2VzIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCg0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjp2ZWN0b3I8c3RkOjphbnk+KiBfdHlwZV9EZXZpY2VzOw0KICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjp2ZWN0b3I8c3RkOjphbnk+JiYgdHlwZV9EZXZpY2VzKCk7DQogICAgICAgICAgICBEZXZpY2VfVHlwZSYgdHlwZV9EZXZpY2VzKHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfVHlwZS50eXBlX0RldmljZXMgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfVHlwZS5kZXZpY2VUeXBlX1R5cGVfQXR0cmlidXRlcyBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQoNCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiogX2RldmljZVR5cGVfVHlwZV9BdHRyaWJ1dGVzOw0KICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjp2ZWN0b3I8c3RkOjphbnk+JiYgZGV2aWNlVHlwZV9UeXBlX0F0dHJpYnV0ZXMoKTsNCiAgICAgICAgICAgIERldmljZV9UeXBlJiBkZXZpY2VUeXBlX1R5cGVfQXR0cmlidXRlcyhzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX1R5cGUuZGV2aWNlVHlwZV9UeXBlX0F0dHJpYnV0ZXMgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIERldmljZV9UeXBlJiBfdW5pcXVlKCk7DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfdG9Eb2N1bWVudCgpOw0KICAgICAgICAgICAgRGV2aWNlX1R5cGUmIF9mcm9tRG9jdW1lbnQoc3RkOjpzdHJpbmcgb2JqKTsNCiAgICANCiAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZSYgc3RvcmUoKTsNCiAgICANCiAgICAgICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZT4mIGZpbmRBbGwoKTsNCiAgICANCiAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZSYgZmluZCgpOw0KICAgIA0KICAgIH07DQogICAgDQogICAgY2xhc3MgTWV0cmljX1R5cGV7DQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIE1ldHJpY19UeXBlKCl7DQogICAgICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAgICAgfk1ldHJpY19UeXBlKCl7DQogICAgICAgICAgICAgICAgLy8gZm9yIGV2ZXJ5ICJuZXciIHRoZXJlIG11c3QgYmUgYSAiZGVsZXRlIg0KICAgICAgICAgICAgfQ0KDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19UeXBlLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9hY3RpdmU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBhY3RpdmUoKTsNCiAgICAgICAgICAgIE1ldHJpY19UeXBlJiBhY3RpdmUoYm9vbCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19UeXBlLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19UeXBlLmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgYm9vbCBfZW5hYmxlZDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBib29sIGVuYWJsZWQoKTsNCiAgICAgICAgICAgIE1ldHJpY19UeXBlJiBlbmFibGVkKGJvb2wgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfVHlwZS5lbmFibGVkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX1R5cGUuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfY29kZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBjb2RlKCk7DQogICAgICAgICAgICBNZXRyaWNfVHlwZSYgY29kZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19UeXBlLmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfVHlwZS5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBpbnQgX29yZGVyOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGludCBvcmRlcigpOw0KICAgICAgICAgICAgTWV0cmljX1R5cGUmIG9yZGVyKGludCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19UeXBlLm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX1R5cGUuZGF0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICB0aW1lX3QgX2RhdGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgdGltZV90IGRhdGUoKTsNCiAgICAgICAgICAgIE1ldHJpY19UeXBlJiBkYXRlKHRpbWVfdCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19UeXBlLmRhdGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfVHlwZS5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9uYW1lOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIG5hbWUoKTsNCiAgICAgICAgICAgIE1ldHJpY19UeXBlJiBuYW1lKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX1R5cGUubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19UeXBlLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfcmVtYXJrOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIHJlbWFyaygpOw0KICAgICAgICAgICAgTWV0cmljX1R5cGUmIHJlbWFyayhzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgDQogICAgICAgICAgICBNZXRyaWNfVHlwZSYgcmVtYXJrKGpzb24gdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfVHlwZS5yZW1hcmsgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfVHlwZS5ncm91cCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19Hcm91cCogX2dyb3VwOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwKiBncm91cCgpOw0KICAgICAgICAgICAgTWV0cmljX1R5cGUmIGdyb3VwKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwJiB2KTsNCiAgICAgICAgDQogICAgICAgICAgICBNZXRyaWNfVHlwZSYgZ3JvdXAoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXAqIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX1R5cGUuZ3JvdXAgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19UeXBlLnR5cGVfTWV0cmljcyBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQoNCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiogX3R5cGVfTWV0cmljczsNCiAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIHR5cGVfTWV0cmljcygpOw0KICAgICAgICAgICAgTWV0cmljX1R5cGUmIHR5cGVfTWV0cmljcyhzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX1R5cGUudHlwZV9NZXRyaWNzIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCg0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBNZXRyaWNfVHlwZSYgX3VuaXF1ZSgpOw0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX3RvRG9jdW1lbnQoKTsNCiAgICAgICAgICAgIE1ldHJpY19UeXBlJiBfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iaik7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGUmIHN0b3JlKCk7DQogICAgDQogICAgICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGU+JiBmaW5kQWxsKCk7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGUmIGZpbmQoKTsNCiAgICANCiAgICB9Ow0KICAgIA0KICAgIGNsYXNzIFR5cGVfQXR0cmlidXRlew0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBUeXBlX0F0dHJpYnV0ZSgpew0KICAgICAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgICAgIH5UeXBlX0F0dHJpYnV0ZSgpew0KICAgICAgICAgICAgICAgIC8vIGZvciBldmVyeSAibmV3IiB0aGVyZSBtdXN0IGJlIGEgImRlbGV0ZSINCiAgICAgICAgICAgIH0NCg0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBUeXBlX0F0dHJpYnV0ZS5hY3RpdmUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgYm9vbCBfYWN0aXZlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGJvb2wgYWN0aXZlKCk7DQogICAgICAgICAgICBUeXBlX0F0dHJpYnV0ZSYgYWN0aXZlKGJvb2wgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBUeXBlX0F0dHJpYnV0ZS5hY3RpdmUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBUeXBlX0F0dHJpYnV0ZS5lbmFibGVkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2VuYWJsZWQ7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBlbmFibGVkKCk7DQogICAgICAgICAgICBUeXBlX0F0dHJpYnV0ZSYgZW5hYmxlZChib29sIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVHlwZV9BdHRyaWJ1dGUuZW5hYmxlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFR5cGVfQXR0cmlidXRlLmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX2NvZGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgY29kZSgpOw0KICAgICAgICAgICAgVHlwZV9BdHRyaWJ1dGUmIGNvZGUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBUeXBlX0F0dHJpYnV0ZS5jb2RlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVHlwZV9BdHRyaWJ1dGUub3JkZXIgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgaW50IF9vcmRlcjsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBpbnQgb3JkZXIoKTsNCiAgICAgICAgICAgIFR5cGVfQXR0cmlidXRlJiBvcmRlcihpbnQgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBUeXBlX0F0dHJpYnV0ZS5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFR5cGVfQXR0cmlidXRlLmRhdGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgdGltZV90IF9kYXRlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHRpbWVfdCBkYXRlKCk7DQogICAgICAgICAgICBUeXBlX0F0dHJpYnV0ZSYgZGF0ZSh0aW1lX3Qgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBUeXBlX0F0dHJpYnV0ZS5kYXRlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVHlwZV9BdHRyaWJ1dGUubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfbmFtZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBuYW1lKCk7DQogICAgICAgICAgICBUeXBlX0F0dHJpYnV0ZSYgbmFtZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFR5cGVfQXR0cmlidXRlLm5hbWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBUeXBlX0F0dHJpYnV0ZS5yZW1hcmsgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX3JlbWFyazsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyByZW1hcmsoKTsNCiAgICAgICAgICAgIFR5cGVfQXR0cmlidXRlJiByZW1hcmsoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIA0KICAgICAgICAgICAgVHlwZV9BdHRyaWJ1dGUmIHJlbWFyayhqc29uIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVHlwZV9BdHRyaWJ1dGUucmVtYXJrIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVHlwZV9BdHRyaWJ1dGUuZGV2aWNlVHlwZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlKiBfZGV2aWNlVHlwZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlKiBkZXZpY2VUeXBlKCk7DQogICAgICAgICAgICBUeXBlX0F0dHJpYnV0ZSYgZGV2aWNlVHlwZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlJiB2KTsNCiAgICAgICAgDQogICAgICAgICAgICBUeXBlX0F0dHJpYnV0ZSYgZGV2aWNlVHlwZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlKiB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFR5cGVfQXR0cmlidXRlLmRldmljZVR5cGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFR5cGVfQXR0cmlidXRlLmF0dHJpYnV0ZV9EZXZpY2VfQXR0cmlidXRlcyBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQoNCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiogX2F0dHJpYnV0ZV9EZXZpY2VfQXR0cmlidXRlczsNCiAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIGF0dHJpYnV0ZV9EZXZpY2VfQXR0cmlidXRlcygpOw0KICAgICAgICAgICAgVHlwZV9BdHRyaWJ1dGUmIGF0dHJpYnV0ZV9EZXZpY2VfQXR0cmlidXRlcyhzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogVHlwZV9BdHRyaWJ1dGUuYXR0cmlidXRlX0RldmljZV9BdHRyaWJ1dGVzIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCg0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBUeXBlX0F0dHJpYnV0ZSYgX3VuaXF1ZSgpOw0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX3RvRG9jdW1lbnQoKTsNCiAgICAgICAgICAgIFR5cGVfQXR0cmlidXRlJiBfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iaik7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGUmIHN0b3JlKCk7DQogICAgDQogICAgICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGU+JiBmaW5kQWxsKCk7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGUmIGZpbmQoKTsNCiAgICANCiAgICB9Ow0KICAgIA0KICAgIGNsYXNzIE1ldHJpY3sNCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgTWV0cmljKCl7DQogICAgICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAgICAgfk1ldHJpYygpew0KICAgICAgICAgICAgICAgIC8vIGZvciBldmVyeSAibmV3IiB0aGVyZSBtdXN0IGJlIGEgImRlbGV0ZSINCiAgICAgICAgICAgIH0NCg0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWMuYWN0aXZlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2FjdGl2ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBib29sIGFjdGl2ZSgpOw0KICAgICAgICAgICAgTWV0cmljJiBhY3RpdmUoYm9vbCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpYy5hY3RpdmUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWMuZW5hYmxlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9lbmFibGVkOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGJvb2wgZW5hYmxlZCgpOw0KICAgICAgICAgICAgTWV0cmljJiBlbmFibGVkKGJvb2wgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWMuZW5hYmxlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpYy5jb2RlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9jb2RlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIGNvZGUoKTsNCiAgICAgICAgICAgIE1ldHJpYyYgY29kZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpYy5jb2RlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljLm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGludCBfb3JkZXI7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgaW50IG9yZGVyKCk7DQogICAgICAgICAgICBNZXRyaWMmIG9yZGVyKGludCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpYy5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpYy5kYXRlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHRpbWVfdCBfZGF0ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICB0aW1lX3QgZGF0ZSgpOw0KICAgICAgICAgICAgTWV0cmljJiBkYXRlKHRpbWVfdCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpYy5kYXRlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljLm5hbWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX25hbWU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgbmFtZSgpOw0KICAgICAgICAgICAgTWV0cmljJiBuYW1lKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljLm5hbWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWMucmVtYXJrIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9yZW1hcms7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgcmVtYXJrKCk7DQogICAgICAgICAgICBNZXRyaWMmIHJlbWFyayhzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgDQogICAgICAgICAgICBNZXRyaWMmIHJlbWFyayhqc29uIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpYy5zY3JpcHQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX3NjcmlwdDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBzY3JpcHQoKTsNCiAgICAgICAgICAgIE1ldHJpYyYgc2NyaXB0KHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICANCiAgICAgICAgICAgIE1ldHJpYyYgc2NyaXB0KGpzb24gdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWMuc2NyaXB0IEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljLnR5cGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZSogX3R5cGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZSogdHlwZSgpOw0KICAgICAgICAgICAgTWV0cmljJiB0eXBlKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGUmIHYpOw0KICAgICAgICANCiAgICAgICAgICAgIE1ldHJpYyYgdHlwZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19UeXBlKiB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpYy50eXBlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljLmRldmljZVR5cGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZSogX2RldmljZVR5cGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZSogZGV2aWNlVHlwZSgpOw0KICAgICAgICAgICAgTWV0cmljJiBkZXZpY2VUeXBlKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGUmIHYpOw0KICAgICAgICANCiAgICAgICAgICAgIE1ldHJpYyYgZGV2aWNlVHlwZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlKiB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpYy5kZXZpY2VUeXBlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCg0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWMubWV0cmljX01ldHJpY19WYWx1ZXMgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnZlY3RvcjxzdGQ6OmFueT4qIF9tZXRyaWNfTWV0cmljX1ZhbHVlczsNCiAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIG1ldHJpY19NZXRyaWNfVmFsdWVzKCk7DQogICAgICAgICAgICBNZXRyaWMmIG1ldHJpY19NZXRyaWNfVmFsdWVzKHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWMubWV0cmljX01ldHJpY19WYWx1ZXMgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIE1ldHJpYyYgX3VuaXF1ZSgpOw0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX3RvRG9jdW1lbnQoKTsNCiAgICAgICAgICAgIE1ldHJpYyYgX2Zyb21Eb2N1bWVudChzdGQ6OnN0cmluZyBvYmopOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYyYgc3RvcmUoKTsNCiAgICANCiAgICAgICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWM+JiBmaW5kQWxsKCk7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljJiBmaW5kKCk7DQogICAgDQogICAgfTsNCiAgICANCiAgICBjbGFzcyBEZXZpY2V7DQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIERldmljZSgpew0KICAgICAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgICAgIH5EZXZpY2UoKXsNCiAgICAgICAgICAgICAgICAvLyBmb3IgZXZlcnkgIm5ldyIgdGhlcmUgbXVzdCBiZSBhICJkZWxldGUiDQogICAgICAgICAgICB9DQoNCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9hY3RpdmU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBhY3RpdmUoKTsNCiAgICAgICAgICAgIERldmljZSYgYWN0aXZlKGJvb2wgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2UuYWN0aXZlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlLmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgYm9vbCBfZW5hYmxlZDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBib29sIGVuYWJsZWQoKTsNCiAgICAgICAgICAgIERldmljZSYgZW5hYmxlZChib29sIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlLmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2UuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfY29kZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBjb2RlKCk7DQogICAgICAgICAgICBEZXZpY2UmIGNvZGUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2UuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZS5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBpbnQgX29yZGVyOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGludCBvcmRlcigpOw0KICAgICAgICAgICAgRGV2aWNlJiBvcmRlcihpbnQgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2Uub3JkZXIgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2UuZGF0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICB0aW1lX3QgX2RhdGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgdGltZV90IGRhdGUoKTsNCiAgICAgICAgICAgIERldmljZSYgZGF0ZSh0aW1lX3Qgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2UuZGF0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZS5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9uYW1lOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIG5hbWUoKTsNCiAgICAgICAgICAgIERldmljZSYgbmFtZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZS5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfcmVtYXJrOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIHJlbWFyaygpOw0KICAgICAgICAgICAgRGV2aWNlJiByZW1hcmsoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIA0KICAgICAgICAgICAgRGV2aWNlJiByZW1hcmsoanNvbiB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZS5yZW1hcmsgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2UudHlwZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlKiBfdHlwZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlKiB0eXBlKCk7DQogICAgICAgICAgICBEZXZpY2UmIHR5cGUoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZSYgdik7DQogICAgICAgIA0KICAgICAgICAgICAgRGV2aWNlJiB0eXBlKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGUqIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlLnR5cGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2UuY29udHJvbGxlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUqIF9jb250cm9sbGVyOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSogY29udHJvbGxlcigpOw0KICAgICAgICAgICAgRGV2aWNlJiBjb250cm9sbGVyKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgdik7DQogICAgICAgIA0KICAgICAgICAgICAgRGV2aWNlJiBjb250cm9sbGVyKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSogdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2UuY29udHJvbGxlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQoNCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlLmRldmljZV9NZXRyaWNfVmFsdWVzIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCg0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjp2ZWN0b3I8c3RkOjphbnk+KiBfZGV2aWNlX01ldHJpY19WYWx1ZXM7DQogICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiBkZXZpY2VfTWV0cmljX1ZhbHVlcygpOw0KICAgICAgICAgICAgRGV2aWNlJiBkZXZpY2VfTWV0cmljX1ZhbHVlcyhzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlLmRldmljZV9NZXRyaWNfVmFsdWVzIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlLmRldmljZV9EZXZpY2VfQXR0cmlidXRlcyBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQoNCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiogX2RldmljZV9EZXZpY2VfQXR0cmlidXRlczsNCiAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIGRldmljZV9EZXZpY2VfQXR0cmlidXRlcygpOw0KICAgICAgICAgICAgRGV2aWNlJiBkZXZpY2VfRGV2aWNlX0F0dHJpYnV0ZXMoc3RkOjp2ZWN0b3I8c3RkOjphbnk+JiYgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZS5kZXZpY2VfRGV2aWNlX0F0dHJpYnV0ZXMgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIERldmljZSYgX3VuaXF1ZSgpOw0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX3RvRG9jdW1lbnQoKTsNCiAgICAgICAgICAgIERldmljZSYgX2Zyb21Eb2N1bWVudChzdGQ6OnN0cmluZyBvYmopOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZSYgc3RvcmUoKTsNCiAgICANCiAgICAgICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2U+JiBmaW5kQWxsKCk7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlJiBmaW5kKCk7DQogICAgDQogICAgfTsNCiAgICANCiAgICBjbGFzcyBEZXZpY2VfQXR0cmlidXRlew0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBEZXZpY2VfQXR0cmlidXRlKCl7DQogICAgICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAgICAgfkRldmljZV9BdHRyaWJ1dGUoKXsNCiAgICAgICAgICAgICAgICAvLyBmb3IgZXZlcnkgIm5ldyIgdGhlcmUgbXVzdCBiZSBhICJkZWxldGUiDQogICAgICAgICAgICB9DQoNCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0F0dHJpYnV0ZS5hY3RpdmUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgYm9vbCBfYWN0aXZlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGJvb2wgYWN0aXZlKCk7DQogICAgICAgICAgICBEZXZpY2VfQXR0cmlidXRlJiBhY3RpdmUoYm9vbCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9BdHRyaWJ1dGUuYWN0aXZlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0F0dHJpYnV0ZS5lbmFibGVkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2VuYWJsZWQ7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBlbmFibGVkKCk7DQogICAgICAgICAgICBEZXZpY2VfQXR0cmlidXRlJiBlbmFibGVkKGJvb2wgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfQXR0cmlidXRlLmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfQXR0cmlidXRlLmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX2NvZGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgY29kZSgpOw0KICAgICAgICAgICAgRGV2aWNlX0F0dHJpYnV0ZSYgY29kZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9BdHRyaWJ1dGUuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9BdHRyaWJ1dGUub3JkZXIgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgaW50IF9vcmRlcjsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBpbnQgb3JkZXIoKTsNCiAgICAgICAgICAgIERldmljZV9BdHRyaWJ1dGUmIG9yZGVyKGludCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9BdHRyaWJ1dGUub3JkZXIgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfQXR0cmlidXRlLmRhdGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgdGltZV90IF9kYXRlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHRpbWVfdCBkYXRlKCk7DQogICAgICAgICAgICBEZXZpY2VfQXR0cmlidXRlJiBkYXRlKHRpbWVfdCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9BdHRyaWJ1dGUuZGF0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9BdHRyaWJ1dGUubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfbmFtZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBuYW1lKCk7DQogICAgICAgICAgICBEZXZpY2VfQXR0cmlidXRlJiBuYW1lKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0F0dHJpYnV0ZS5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0F0dHJpYnV0ZS5yZW1hcmsgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX3JlbWFyazsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyByZW1hcmsoKTsNCiAgICAgICAgICAgIERldmljZV9BdHRyaWJ1dGUmIHJlbWFyayhzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgDQogICAgICAgICAgICBEZXZpY2VfQXR0cmlidXRlJiByZW1hcmsoanNvbiB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9BdHRyaWJ1dGUucmVtYXJrIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0F0dHJpYnV0ZS52YWx1ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfdmFsdWU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgdmFsdWUoKTsNCiAgICAgICAgICAgIERldmljZV9BdHRyaWJ1dGUmIHZhbHVlKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0F0dHJpYnV0ZS52YWx1ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9BdHRyaWJ1dGUuZGV2aWNlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlKiBfZGV2aWNlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlKiBkZXZpY2UoKTsNCiAgICAgICAgICAgIERldmljZV9BdHRyaWJ1dGUmIGRldmljZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZSYgdik7DQogICAgICAgIA0KICAgICAgICAgICAgRGV2aWNlX0F0dHJpYnV0ZSYgZGV2aWNlKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlKiB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9BdHRyaWJ1dGUuZGV2aWNlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0F0dHJpYnV0ZS5hdHRyaWJ1dGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZSogX2F0dHJpYnV0ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlKiBhdHRyaWJ1dGUoKTsNCiAgICAgICAgICAgIERldmljZV9BdHRyaWJ1dGUmIGF0dHJpYnV0ZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlJiB2KTsNCiAgICAgICAgDQogICAgICAgICAgICBEZXZpY2VfQXR0cmlidXRlJiBhdHRyaWJ1dGUoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZSogdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfQXR0cmlidXRlLmF0dHJpYnV0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQoNCiAgICANCg0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBEZXZpY2VfQXR0cmlidXRlJiBfdW5pcXVlKCk7DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfdG9Eb2N1bWVudCgpOw0KICAgICAgICAgICAgRGV2aWNlX0F0dHJpYnV0ZSYgX2Zyb21Eb2N1bWVudChzdGQ6OnN0cmluZyBvYmopOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGUmIHN0b3JlKCk7DQogICAgDQogICAgICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZT4mIGZpbmRBbGwoKTsNCiAgICANCiAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlJiBmaW5kKCk7DQogICAgDQogICAgfTsNCiAgICANCiAgICBjbGFzcyBNZXRyaWNfVmFsdWV7DQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIE1ldHJpY19WYWx1ZSgpew0KICAgICAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgICAgIH5NZXRyaWNfVmFsdWUoKXsNCiAgICAgICAgICAgICAgICAvLyBmb3IgZXZlcnkgIm5ldyIgdGhlcmUgbXVzdCBiZSBhICJkZWxldGUiDQogICAgICAgICAgICB9DQoNCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX1ZhbHVlLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9hY3RpdmU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBhY3RpdmUoKTsNCiAgICAgICAgICAgIE1ldHJpY19WYWx1ZSYgYWN0aXZlKGJvb2wgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfVmFsdWUuYWN0aXZlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX1ZhbHVlLmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgYm9vbCBfZW5hYmxlZDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBib29sIGVuYWJsZWQoKTsNCiAgICAgICAgICAgIE1ldHJpY19WYWx1ZSYgZW5hYmxlZChib29sIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX1ZhbHVlLmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfVmFsdWUuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfY29kZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBjb2RlKCk7DQogICAgICAgICAgICBNZXRyaWNfVmFsdWUmIGNvZGUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfVmFsdWUuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19WYWx1ZS5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBpbnQgX29yZGVyOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGludCBvcmRlcigpOw0KICAgICAgICAgICAgTWV0cmljX1ZhbHVlJiBvcmRlcihpbnQgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfVmFsdWUub3JkZXIgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfVmFsdWUuZGF0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICB0aW1lX3QgX2RhdGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgdGltZV90IGRhdGUoKTsNCiAgICAgICAgICAgIE1ldHJpY19WYWx1ZSYgZGF0ZSh0aW1lX3Qgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfVmFsdWUuZGF0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19WYWx1ZS5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9uYW1lOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIG5hbWUoKTsNCiAgICAgICAgICAgIE1ldHJpY19WYWx1ZSYgbmFtZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19WYWx1ZS5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX1ZhbHVlLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfcmVtYXJrOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIHJlbWFyaygpOw0KICAgICAgICAgICAgTWV0cmljX1ZhbHVlJiByZW1hcmsoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIA0KICAgICAgICAgICAgTWV0cmljX1ZhbHVlJiByZW1hcmsoanNvbiB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19WYWx1ZS5yZW1hcmsgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfVmFsdWUudmFsdWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX3ZhbHVlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIHZhbHVlKCk7DQogICAgICAgICAgICBNZXRyaWNfVmFsdWUmIHZhbHVlKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX1ZhbHVlLnZhbHVlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX1ZhbHVlLm1lYXN1cmVkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHRpbWVfdCBfbWVhc3VyZWQ7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgdGltZV90IG1lYXN1cmVkKCk7DQogICAgICAgICAgICBNZXRyaWNfVmFsdWUmIG1lYXN1cmVkKHRpbWVfdCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19WYWx1ZS5tZWFzdXJlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19WYWx1ZS5tZXRyaWMgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWMqIF9tZXRyaWM7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWMqIG1ldHJpYygpOw0KICAgICAgICAgICAgTWV0cmljX1ZhbHVlJiBtZXRyaWMoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWMmIHYpOw0KICAgICAgICANCiAgICAgICAgICAgIE1ldHJpY19WYWx1ZSYgbWV0cmljKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljKiB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19WYWx1ZS5tZXRyaWMgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfVmFsdWUuZGV2aWNlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlKiBfZGV2aWNlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlKiBkZXZpY2UoKTsNCiAgICAgICAgICAgIE1ldHJpY19WYWx1ZSYgZGV2aWNlKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlJiB2KTsNCiAgICAgICAgDQogICAgICAgICAgICBNZXRyaWNfVmFsdWUmIGRldmljZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZSogdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfVmFsdWUuZGV2aWNlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCg0KICAgIA0KDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIE1ldHJpY19WYWx1ZSYgX3VuaXF1ZSgpOw0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX3RvRG9jdW1lbnQoKTsNCiAgICAgICAgICAgIE1ldHJpY19WYWx1ZSYgX2Zyb21Eb2N1bWVudChzdGQ6OnN0cmluZyBvYmopOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZSYgc3RvcmUoKTsNCiAgICANCiAgICAgICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWU+JiBmaW5kQWxsKCk7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlJiBmaW5kKCk7DQogICAgDQogICAgfTsNCiAgICANCn0KCQp9CgkKfQoJCn0KCQ0KDQpuYW1lc3BhY2UgZXNwdGVzdHsKCQ0KICAgIA0KICAgIGNsYXNzIFVzZXJ7DQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIFVzZXIoKXsNCiAgICAgICAgICAgIH0NCiAgICAgICAgDQogICAgICAgICAgICB+VXNlcigpew0KICAgICAgICAgICAgICAgIC8vIGZvciBldmVyeSAibmV3IiB0aGVyZSBtdXN0IGJlIGEgImRlbGV0ZSINCiAgICAgICAgICAgIH0NCg0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBVc2VyLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9hY3RpdmU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBhY3RpdmUoKTsNCiAgICAgICAgICAgIFVzZXImIGFjdGl2ZShib29sIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVXNlci5hY3RpdmUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBVc2VyLmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgYm9vbCBfZW5hYmxlZDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBib29sIGVuYWJsZWQoKTsNCiAgICAgICAgICAgIFVzZXImIGVuYWJsZWQoYm9vbCB2KTsNCiAgICAgICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFVzZXIuZW5hYmxlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFVzZXIuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfY29kZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBjb2RlKCk7DQogICAgICAgICAgICBVc2VyJiBjb2RlKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVXNlci5jb2RlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVXNlci5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBpbnQgX29yZGVyOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGludCBvcmRlcigpOw0KICAgICAgICAgICAgVXNlciYgb3JkZXIoaW50IHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVXNlci5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFVzZXIuZGF0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICB0aW1lX3QgX2RhdGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgdGltZV90IGRhdGUoKTsNCiAgICAgICAgICAgIFVzZXImIGRhdGUodGltZV90IHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVXNlci5kYXRlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVXNlci5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9uYW1lOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIG5hbWUoKTsNCiAgICAgICAgICAgIFVzZXImIG5hbWUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBVc2VyLm5hbWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBVc2VyLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfcmVtYXJrOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIHJlbWFyaygpOw0KICAgICAgICAgICAgVXNlciYgcmVtYXJrKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICANCiAgICAgICAgICAgIFVzZXImIHJlbWFyayhqc29uIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVXNlci5yZW1hcmsgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBVc2VyLnVzZXJuYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF91c2VybmFtZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyB1c2VybmFtZSgpOw0KICAgICAgICAgICAgVXNlciYgdXNlcm5hbWUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBVc2VyLnVzZXJuYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVXNlci5wYXNzd29yZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfcGFzc3dvcmQ7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgcGFzc3dvcmQoKTsNCiAgICAgICAgICAgIFVzZXImIHBhc3N3b3JkKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVXNlci5wYXNzd29yZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQoNCiAgICANCg0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBVc2VyJiBfdW5pcXVlKCk7DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfdG9Eb2N1bWVudCgpOw0KICAgICAgICAgICAgVXNlciYgX2Zyb21Eb2N1bWVudChzdGQ6OnN0cmluZyBvYmopOw0KICAgIA0KICAgICAgICBlc3B0ZXN0OjpVc2VyJiBzdG9yZSgpOw0KICAgIA0KICAgICAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0OjpVc2VyPiYgZmluZEFsbCgpOw0KICAgIA0KICAgICAgICBlc3B0ZXN0OjpVc2VyJiBmaW5kKCk7DQogICAgDQogICAgICAgIGpzb24gaW5pdCgpOw0KICAgIA0KICAgIH07DQogICAgDQp9CgkNCg0KLyoqKioqKioqKioqKiogSGVhZGVyIEZpbGUgRU5EICoqKioqKioqKioqKioqKioqKioqKiovDQoNCg0Kc3RhdGljIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgdGhpc05vZGUgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSgpKS0+Y29kZSgiYWJjIikuYWN0aXZlKHRydWUpLmVuYWJsZWQodHJ1ZSk7DQoNCg0KICAgIA0KDQplc3B0ZXN0OjpVc2VyJiBlc3B0ZXN0OjpVc2VyOjphY3RpdmUoYm9vbCB2KXsNCiAgICB0aGlzLT5fYWN0aXZlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmJvb2wgZXNwdGVzdDo6VXNlcjo6YWN0aXZlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9hY3RpdmU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OlVzZXImIGVzcHRlc3Q6OlVzZXI6OmVuYWJsZWQoYm9vbCB2KXsNCiAgICB0aGlzLT5fZW5hYmxlZCA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpib29sIGVzcHRlc3Q6OlVzZXI6OmVuYWJsZWQoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2VuYWJsZWQ7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OlVzZXImIGVzcHRlc3Q6OlVzZXI6OmNvZGUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X2NvZGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6VXNlcjo6Y29kZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fY29kZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6VXNlciYgZXNwdGVzdDo6VXNlcjo6b3JkZXIoaW50IHYpew0KICAgIHRoaXMtPl9vcmRlciA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQppbnQgZXNwdGVzdDo6VXNlcjo6b3JkZXIoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X29yZGVyOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0OjpVc2VyJiBlc3B0ZXN0OjpVc2VyOjpkYXRlKHRpbWVfdCB2KXsNCiAgICB0aGlzLT5fZGF0ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQp0aW1lX3QgZXNwdGVzdDo6VXNlcjo6ZGF0ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fZGF0ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6VXNlciYgZXNwdGVzdDo6VXNlcjo6bmFtZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fbmFtZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0OjpVc2VyOjpuYW1lKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9uYW1lOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0OjpVc2VyJiBlc3B0ZXN0OjpVc2VyOjpyZW1hcmsoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X3JlbWFyayA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KZXNwdGVzdDo6VXNlciYgZXNwdGVzdDo6VXNlcjo6cmVtYXJrKGpzb24gdil7DQogICAgLy90aGlzLT5fcmVtYXJrDQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0OjpVc2VyOjpyZW1hcmsoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3JlbWFyazsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6VXNlciYgZXNwdGVzdDo6VXNlcjo6dXNlcm5hbWUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X3VzZXJuYW1lID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OlVzZXI6OnVzZXJuYW1lKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl91c2VybmFtZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6VXNlciYgZXNwdGVzdDo6VXNlcjo6cGFzc3dvcmQoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X3Bhc3N3b3JkID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OlVzZXI6OnBhc3N3b3JkKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9wYXNzd29yZDsNCiAgICANCn0NCiAgICANCg0KICAgIA0KDQoNCmVzcHRlc3Q6OlVzZXImIGVzcHRlc3Q6OlVzZXI6Ol91bmlxdWUoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIlVzZXI6Ol91bmlxdWUoKTogIjsNCg0KICAgIFVzZXIqIHJldCA9IG5ldyBVc2VyKCk7DQogICAgLy9pZih0aGlzLklkKSByZXQuSWQgPSB0aGlzLklkOw0KICAgIA0KICAgICAgICANCiAgICBpZih0aGlzLT5jb2RlKCkuZW1wdHkoKSkNCiAgICAgICAgDQogICAgICAgIHJldC0+Y29kZSh0aGlzLT5jb2RlKCkpOw0KICAgIA0KICAgICAgICANCiAgICBpZih0aGlzLT51c2VybmFtZSgpLmVtcHR5KCkpDQogICAgICAgIA0KICAgICAgICByZXQtPnVzZXJuYW1lKHRoaXMtPnVzZXJuYW1lKCkpOw0KICAgIA0KDQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQplc3B0ZXN0OjpVc2VyJiBlc3B0ZXN0OjpVc2VyOjpfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iail7DQogICAganNvbiBkYXRhID0ganNvbjo6cGFyc2Uob2JqKTsNCiAgICANCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OlVzZXI6Ol90b0RvY3VtZW50KCl7DQogICAgcmV0dXJuICIiOw0KfQ0KDQogICAgDQplc3B0ZXN0OjpVc2VyJiBlc3B0ZXN0OjpVc2VyOjpzdG9yZSgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiVXNlcjo6c3RvcmUoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK3RoaXNOb2RlLmNvZGUoKSsiQHRpbWUiKyJdLlVzZXIuc3RvcmUoKSIpLm1ldGhvZCgic3RvcmUiKS5jbGFzc05hbWUoIlVzZXIiKS5jYXJyaWVyKHRoaXNOb2RlKS5zZW5kZXIodGhpc05vZGUpLnJlY2lwaWVudCh0aGlzTm9kZS5wYXJlbnQoKSk7DQoNCiAgICBlc3B0ZXN0OjpVc2VyKiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlciE9bnVsbHB0cil7DQogICAgDQoNCiAgICANCiAgICAgICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgICAgICANCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAganNvbiBfalJldDsNCiAgICAgICAgX2pSZXRbIl9fdGhpcyJdID0gdGhpcy0+X3RvRG9jdW1lbnQoKTsNCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKF9qUmV0KTsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiB0aGlzLT5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgLy9fX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0Kc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6VXNlcj4mIGVzcHRlc3Q6OlVzZXI6OmZpbmRBbGwoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIlVzZXI6OmZpbmRBbGwoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK3RoaXNOb2RlLmNvZGUoKSsiQHRpbWUiKyJdLlVzZXIuZmluZEFsbCgpIikubWV0aG9kKCJmaW5kQWxsIikuY2xhc3NOYW1lKCJVc2VyIikuY2Fycmllcih0aGlzTm9kZSkuc2VuZGVyKHRoaXNOb2RlKS5yZWNpcGllbnQodGhpc05vZGUucGFyZW50KCkpOw0KDQogICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6VXNlcj4qIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyLT5lbXB0eSgpKXsNCiAgICANCg0KICAgIA0KICAgICAgICANCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICAgICAgDQogICAgDQogICAgfWVsc2V7DQogICAgICAgIGpzb24gX2pSZXQ7DQogICAgICAgIF9qUmV0WyJfX3RoaXMiXSA9IHRoaXMtPl90b0RvY3VtZW50KCk7DQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChfalJldCk7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogdGhpcy0+X3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIC8vX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCmVzcHRlc3Q6OlVzZXImIGVzcHRlc3Q6OlVzZXI6OmZpbmQoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIlVzZXI6OmZpbmQoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK3RoaXNOb2RlLmNvZGUoKSsiQHRpbWUiKyJdLlVzZXIuZmluZCgpIikubWV0aG9kKCJmaW5kIikuY2xhc3NOYW1lKCJVc2VyIikuY2Fycmllcih0aGlzTm9kZSkuc2VuZGVyKHRoaXNOb2RlKS5yZWNpcGllbnQodGhpc05vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6VXNlciogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICAgICAgDQogICAgDQogICAgfWVsc2V7DQogICAgICAgIGpzb24gX2pSZXQ7DQogICAgICAgIF9qUmV0WyJfX3RoaXMiXSA9IHRoaXMtPl90b0RvY3VtZW50KCk7DQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChfalJldCk7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogdGhpcy0+X3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIC8vX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCmpzb24gZXNwdGVzdDo6VXNlcjo6aW5pdCgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiVXNlcjo6aW5pdCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uVXNlci5pbml0KCkiKS5tZXRob2QoImluaXQiKS5jbGFzc05hbWUoIlVzZXIiKS5jYXJyaWVyKHRoaXNOb2RlKS5zZW5kZXIodGhpc05vZGUpLnJlY2lwaWVudCh0aGlzTm9kZS5wYXJlbnQoKSk7DQoNCiAgICBqc29uIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCgoc3RkOjpzdHJpbmcpYW5zd2VyKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAganNvbiBfalJldDsNCiAgICAgICAgX2pSZXRbIl9fdGhpcyJdID0gdGhpcy0+X3RvRG9jdW1lbnQoKTsNCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKF9qUmV0KTsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiB0aGlzLT5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgLy9fX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiBhbnN3ZXI7DQp9DQogICAgDQoNCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWMmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljOjphY3RpdmUoYm9vbCB2KXsNCiAgICB0aGlzLT5fYWN0aXZlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmJvb2wgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWM6OmFjdGl2ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fYWN0aXZlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWM6OmVuYWJsZWQoYm9vbCB2KXsNCiAgICB0aGlzLT5fZW5hYmxlZCA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljOjplbmFibGVkKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9lbmFibGVkOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWM6OmNvZGUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X2NvZGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWM6OmNvZGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2NvZGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYzo6b3JkZXIoaW50IHYpew0KICAgIHRoaXMtPl9vcmRlciA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQppbnQgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWM6Om9yZGVyKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9vcmRlcjsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWMmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljOjpkYXRlKHRpbWVfdCB2KXsNCiAgICB0aGlzLT5fZGF0ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQp0aW1lX3QgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWM6OmRhdGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2RhdGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYzo6bmFtZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fbmFtZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYzo6bmFtZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fbmFtZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWMmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljOjpyZW1hcmsoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X3JlbWFyayA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWMmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljOjpyZW1hcmsoanNvbiB2KXsNCiAgICAvL3RoaXMtPl9yZW1hcmsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljOjpyZW1hcmsoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3JlbWFyazsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWMmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljOjpzY3JpcHQoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X3NjcmlwdCA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWMmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljOjpzY3JpcHQoanNvbiB2KXsNCiAgICAvL3RoaXMtPl9zY3JpcHQNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljOjpzY3JpcHQoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3NjcmlwdDsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWMmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljOjp0eXBlKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGUmIHYpew0KICAgIHRoaXMtPl90eXBlID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWMmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljOjp0eXBlKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGUqIHYpew0KICAgIHRoaXMtPl90eXBlID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19UeXBlKiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYzo6dHlwZSgpew0KICAgIA0KICAgIHJldHVybiAqKHRoaXMtPl90eXBlKTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWMmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljOjpkZXZpY2VUeXBlKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGUmIHYpew0KICAgIHRoaXMtPl9kZXZpY2VUeXBlID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWMmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljOjpkZXZpY2VUeXBlKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGUqIHYpew0KICAgIHRoaXMtPl9kZXZpY2VUeXBlID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlKiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYzo6ZGV2aWNlVHlwZSgpew0KICAgIA0KICAgIHJldHVybiAqKHRoaXMtPl9kZXZpY2VUeXBlKTsNCiAgICANCn0NCiAgICANCg0KICAgIA0Kc3RkOjp2ZWN0b3I8c3RkOjphbnk+JiYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWM6Om1ldHJpY19NZXRyaWNfVmFsdWVzKCl7DQogICAgcmV0dXJuIG1vdmUoKih0aGlzLT5fbWV0cmljX01ldHJpY19WYWx1ZXMpKTsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWMmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljOjptZXRyaWNfTWV0cmljX1ZhbHVlcyhzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiB2KXsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWMmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljOjpfdW5pcXVlKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJNZXRyaWM6Ol91bmlxdWUoKTogIjsNCg0KICAgIE1ldHJpYyogcmV0ID0gbmV3IE1ldHJpYygpOw0KICAgIC8vaWYodGhpcy5JZCkgcmV0LklkID0gdGhpcy5JZDsNCiAgICANCiAgICAgICAgDQogICAgaWYodGhpcy0+Y29kZSgpLmVtcHR5KCkpDQogICAgICAgIA0KICAgICAgICByZXQtPmNvZGUodGhpcy0+Y29kZSgpKTsNCiAgICANCg0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWMmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljOjpfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iail7DQogICAganNvbiBkYXRhID0ganNvbjo6cGFyc2Uob2JqKTsNCiAgICANCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljOjpfdG9Eb2N1bWVudCgpew0KICAgIHJldHVybiAiIjsNCn0NCg0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWMmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljOjpzdG9yZSgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiTWV0cmljOjpzdG9yZSgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uTWV0cmljLnN0b3JlKCkiKS5tZXRob2QoInN0b3JlIikuY2xhc3NOYW1lKCJNZXRyaWMiKS5jYXJyaWVyKHRoaXNOb2RlKS5zZW5kZXIodGhpc05vZGUpLnJlY2lwaWVudCh0aGlzTm9kZS5wYXJlbnQoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYyogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICAgICAgDQogICAgDQogICAgfWVsc2V7DQogICAgICAgIGpzb24gX2pSZXQ7DQogICAgICAgIF9qUmV0WyJfX3RoaXMiXSA9IHRoaXMtPl90b0RvY3VtZW50KCk7DQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChfalJldCk7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogdGhpcy0+X3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIC8vX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCnN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljPiYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWM6OmZpbmRBbGwoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIk1ldHJpYzo6ZmluZEFsbCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uTWV0cmljLmZpbmRBbGwoKSIpLm1ldGhvZCgiZmluZEFsbCIpLmNsYXNzTmFtZSgiTWV0cmljIikuY2Fycmllcih0aGlzTm9kZSkuc2VuZGVyKHRoaXNOb2RlKS5yZWNpcGllbnQodGhpc05vZGUucGFyZW50KCkpOw0KDQogICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWM+KiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlci0+ZW1wdHkoKSl7DQogICAgDQoNCiAgICANCiAgICAgICAgDQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgICAgIA0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICBqc29uIF9qUmV0Ow0KICAgICAgICBfalJldFsiX190aGlzIl0gPSB0aGlzLT5fdG9Eb2N1bWVudCgpOw0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoX2pSZXQpOw0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHRoaXMtPl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICAvL19fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWM6OmZpbmQoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIk1ldHJpYzo6ZmluZCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uTWV0cmljLmZpbmQoKSIpLm1ldGhvZCgiZmluZCIpLmNsYXNzTmFtZSgiTWV0cmljIikuY2Fycmllcih0aGlzTm9kZSkuc2VuZGVyKHRoaXNOb2RlKS5yZWNpcGllbnQodGhpc05vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWMqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgICAgIA0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICBqc29uIF9qUmV0Ow0KICAgICAgICBfalJldFsiX190aGlzIl0gPSB0aGlzLT5fdG9Eb2N1bWVudCgpOw0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoX2pSZXQpOw0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHRoaXMtPl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICAvL19fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQoNCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlOjphY3RpdmUoYm9vbCB2KXsNCiAgICB0aGlzLT5fYWN0aXZlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmJvb2wgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWU6OmFjdGl2ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fYWN0aXZlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWU6OmVuYWJsZWQoYm9vbCB2KXsNCiAgICB0aGlzLT5fZW5hYmxlZCA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlOjplbmFibGVkKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9lbmFibGVkOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWU6OmNvZGUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X2NvZGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWU6OmNvZGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2NvZGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZTo6b3JkZXIoaW50IHYpew0KICAgIHRoaXMtPl9vcmRlciA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQppbnQgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWU6Om9yZGVyKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9vcmRlcjsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlOjpkYXRlKHRpbWVfdCB2KXsNCiAgICB0aGlzLT5fZGF0ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQp0aW1lX3QgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWU6OmRhdGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2RhdGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZTo6bmFtZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fbmFtZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZTo6bmFtZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fbmFtZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlOjpyZW1hcmsoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X3JlbWFyayA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlOjpyZW1hcmsoanNvbiB2KXsNCiAgICAvL3RoaXMtPl9yZW1hcmsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlOjpyZW1hcmsoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3JlbWFyazsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlOjp2YWx1ZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fdmFsdWUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWU6OnZhbHVlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl92YWx1ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlOjptZWFzdXJlZCh0aW1lX3Qgdil7DQogICAgdGhpcy0+X21lYXN1cmVkID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnRpbWVfdCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZTo6bWVhc3VyZWQoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X21lYXN1cmVkOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWU6Om1ldHJpYyhlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYyYgdil7DQogICAgdGhpcy0+X21ldHJpYyA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZTo6bWV0cmljKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljKiB2KXsNCiAgICB0aGlzLT5fbWV0cmljID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYyogZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWU6Om1ldHJpYygpew0KICAgIA0KICAgIHJldHVybiAqKHRoaXMtPl9tZXRyaWMpOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWU6OmRldmljZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZSYgdil7DQogICAgdGhpcy0+X2RldmljZSA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZTo6ZGV2aWNlKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlKiB2KXsNCiAgICB0aGlzLT5fZGV2aWNlID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZSogZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWU6OmRldmljZSgpew0KICAgIA0KICAgIHJldHVybiAqKHRoaXMtPl9kZXZpY2UpOw0KICAgIA0KfQ0KICAgIA0KDQogICAgDQoNCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlOjpfdW5pcXVlKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJNZXRyaWNfVmFsdWU6Ol91bmlxdWUoKTogIjsNCg0KICAgIE1ldHJpY19WYWx1ZSogcmV0ID0gbmV3IE1ldHJpY19WYWx1ZSgpOw0KICAgIC8vaWYodGhpcy5JZCkgcmV0LklkID0gdGhpcy5JZDsNCiAgICANCiAgICAgICAgDQogICAgaWYodGhpcy0+bWV0cmljKCkhPW51bGxwdHIpDQogICAgICAgIA0KICAgICAgICByZXQtPm1ldHJpYyh0aGlzLT5tZXRyaWMoKS5fdW5pcXVlKCkpOw0KICAgIA0KICAgICAgICANCiAgICBpZih0aGlzLT5kZXZpY2UoKSE9bnVsbHB0cikNCiAgICAgICAgDQogICAgICAgIHJldC0+ZGV2aWNlKHRoaXMtPmRldmljZSgpLl91bmlxdWUoKSk7DQogICAgDQoNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZTo6X2Zyb21Eb2N1bWVudChzdGQ6OnN0cmluZyBvYmopew0KICAgIGpzb24gZGF0YSA9IGpzb246OnBhcnNlKG9iaik7DQogICAgDQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZTo6X3RvRG9jdW1lbnQoKXsNCiAgICByZXR1cm4gIiI7DQp9DQoNCiAgICANCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZTo6c3RvcmUoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIk1ldHJpY19WYWx1ZTo6c3RvcmUoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK3RoaXNOb2RlLmNvZGUoKSsiQHRpbWUiKyJdLk1ldHJpY19WYWx1ZS5zdG9yZSgpIikubWV0aG9kKCJzdG9yZSIpLmNsYXNzTmFtZSgiTWV0cmljX1ZhbHVlIikuY2Fycmllcih0aGlzTm9kZSkuc2VuZGVyKHRoaXNOb2RlKS5yZWNpcGllbnQodGhpc05vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWUqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgICAgIA0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICBqc29uIF9qUmV0Ow0KICAgICAgICBfalJldFsiX190aGlzIl0gPSB0aGlzLT5fdG9Eb2N1bWVudCgpOw0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoX2pSZXQpOw0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHRoaXMtPl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICAvL19fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQpzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZT4mIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlOjpmaW5kQWxsKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJNZXRyaWNfVmFsdWU6OmZpbmRBbGwoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK3RoaXNOb2RlLmNvZGUoKSsiQHRpbWUiKyJdLk1ldHJpY19WYWx1ZS5maW5kQWxsKCkiKS5tZXRob2QoImZpbmRBbGwiKS5jbGFzc05hbWUoIk1ldHJpY19WYWx1ZSIpLmNhcnJpZXIodGhpc05vZGUpLnNlbmRlcih0aGlzTm9kZSkucmVjaXBpZW50KHRoaXNOb2RlLnBhcmVudCgpKTsNCg0KICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlPiogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXItPmVtcHR5KCkpew0KICAgIA0KDQogICAgDQogICAgICAgIA0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgICAgICANCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAganNvbiBfalJldDsNCiAgICAgICAgX2pSZXRbIl9fdGhpcyJdID0gdGhpcy0+X3RvRG9jdW1lbnQoKTsNCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKF9qUmV0KTsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiB0aGlzLT5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgLy9fX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlOjpmaW5kKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJNZXRyaWNfVmFsdWU6OmZpbmQoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK3RoaXNOb2RlLmNvZGUoKSsiQHRpbWUiKyJdLk1ldHJpY19WYWx1ZS5maW5kKCkiKS5tZXRob2QoImZpbmQiKS5jbGFzc05hbWUoIk1ldHJpY19WYWx1ZSIpLmNhcnJpZXIodGhpc05vZGUpLnNlbmRlcih0aGlzTm9kZSkucmVjaXBpZW50KHRoaXNOb2RlLnBhcmVudCgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlKiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlciE9bnVsbHB0cil7DQogICAgDQoNCiAgICANCiAgICAgICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgICAgICANCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAganNvbiBfalJldDsNCiAgICAgICAgX2pSZXRbIl9fdGhpcyJdID0gdGhpcy0+X3RvRG9jdW1lbnQoKTsNCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKF9qUmV0KTsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiB0aGlzLT5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgLy9fX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KDQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZTo6YWN0aXZlKGJvb2wgdil7DQogICAgdGhpcy0+X2FjdGl2ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlOjphY3RpdmUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2FjdGl2ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2UmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlOjplbmFibGVkKGJvb2wgdil7DQogICAgdGhpcy0+X2VuYWJsZWQgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KYm9vbCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZTo6ZW5hYmxlZCgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fZW5hYmxlZDsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2UmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlOjpjb2RlKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9jb2RlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlOjpjb2RlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9jb2RlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2U6Om9yZGVyKGludCB2KXsNCiAgICB0aGlzLT5fb3JkZXIgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KaW50IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlOjpvcmRlcigpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fb3JkZXI7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZTo6ZGF0ZSh0aW1lX3Qgdil7DQogICAgdGhpcy0+X2RhdGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KdGltZV90IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlOjpkYXRlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9kYXRlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2U6Om5hbWUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X25hbWUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2U6Om5hbWUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X25hbWU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZTo6cmVtYXJrKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9yZW1hcmsgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZTo6cmVtYXJrKGpzb24gdil7DQogICAgLy90aGlzLT5fcmVtYXJrDQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZTo6cmVtYXJrKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9yZW1hcms7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZTo6dHlwZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlJiB2KXsNCiAgICB0aGlzLT5fdHlwZSA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZTo6dHlwZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlKiB2KXsNCiAgICB0aGlzLT5fdHlwZSA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZSogZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2U6OnR5cGUoKXsNCiAgICANCiAgICByZXR1cm4gKih0aGlzLT5fdHlwZSk7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZTo6Y29udHJvbGxlcihlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIHYpew0KICAgIHRoaXMtPl9jb250cm9sbGVyID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2UmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlOjpjb250cm9sbGVyKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSogdil7DQogICAgdGhpcy0+X2NvbnRyb2xsZXIgPSAmdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSogZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2U6OmNvbnRyb2xsZXIoKXsNCiAgICANCiAgICByZXR1cm4gKih0aGlzLT5fY29udHJvbGxlcik7DQogICAgDQp9DQogICAgDQoNCiAgICANCnN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlOjpkZXZpY2VfTWV0cmljX1ZhbHVlcygpew0KICAgIHJldHVybiBtb3ZlKCoodGhpcy0+X2RldmljZV9NZXRyaWNfVmFsdWVzKSk7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZTo6ZGV2aWNlX01ldHJpY19WYWx1ZXMoc3RkOjp2ZWN0b3I8c3RkOjphbnk+JiYgdil7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0Kc3RkOjp2ZWN0b3I8c3RkOjphbnk+JiYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2U6OmRldmljZV9EZXZpY2VfQXR0cmlidXRlcygpew0KICAgIHJldHVybiBtb3ZlKCoodGhpcy0+X2RldmljZV9EZXZpY2VfQXR0cmlidXRlcykpOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2U6OmRldmljZV9EZXZpY2VfQXR0cmlidXRlcyhzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiB2KXsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2UmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlOjpfdW5pcXVlKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJEZXZpY2U6Ol91bmlxdWUoKTogIjsNCg0KICAgIERldmljZSogcmV0ID0gbmV3IERldmljZSgpOw0KICAgIC8vaWYodGhpcy5JZCkgcmV0LklkID0gdGhpcy5JZDsNCiAgICANCiAgICAgICAgDQogICAgaWYodGhpcy0+Y29kZSgpLmVtcHR5KCkpDQogICAgICAgIA0KICAgICAgICByZXQtPmNvZGUodGhpcy0+Y29kZSgpKTsNCiAgICANCg0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2UmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlOjpfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iail7DQogICAganNvbiBkYXRhID0ganNvbjo6cGFyc2Uob2JqKTsNCiAgICANCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlOjpfdG9Eb2N1bWVudCgpew0KICAgIHJldHVybiAiIjsNCn0NCg0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2UmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlOjpzdG9yZSgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiRGV2aWNlOjpzdG9yZSgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uRGV2aWNlLnN0b3JlKCkiKS5tZXRob2QoInN0b3JlIikuY2xhc3NOYW1lKCJEZXZpY2UiKS5jYXJyaWVyKHRoaXNOb2RlKS5zZW5kZXIodGhpc05vZGUpLnJlY2lwaWVudCh0aGlzTm9kZS5wYXJlbnQoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZSogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICAgICAgDQogICAgDQogICAgfWVsc2V7DQogICAgICAgIGpzb24gX2pSZXQ7DQogICAgICAgIF9qUmV0WyJfX3RoaXMiXSA9IHRoaXMtPl90b0RvY3VtZW50KCk7DQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChfalJldCk7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogdGhpcy0+X3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIC8vX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCnN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlPiYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2U6OmZpbmRBbGwoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIkRldmljZTo6ZmluZEFsbCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uRGV2aWNlLmZpbmRBbGwoKSIpLm1ldGhvZCgiZmluZEFsbCIpLmNsYXNzTmFtZSgiRGV2aWNlIikuY2Fycmllcih0aGlzTm9kZSkuc2VuZGVyKHRoaXNOb2RlKS5yZWNpcGllbnQodGhpc05vZGUucGFyZW50KCkpOw0KDQogICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2U+KiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlci0+ZW1wdHkoKSl7DQogICAgDQoNCiAgICANCiAgICAgICAgDQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgICAgIA0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICBqc29uIF9qUmV0Ow0KICAgICAgICBfalJldFsiX190aGlzIl0gPSB0aGlzLT5fdG9Eb2N1bWVudCgpOw0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoX2pSZXQpOw0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHRoaXMtPl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICAvL19fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2U6OmZpbmQoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIkRldmljZTo6ZmluZCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uRGV2aWNlLmZpbmQoKSIpLm1ldGhvZCgiZmluZCIpLmNsYXNzTmFtZSgiRGV2aWNlIikuY2Fycmllcih0aGlzTm9kZSkuc2VuZGVyKHRoaXNOb2RlKS5yZWNpcGllbnQodGhpc05vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2UqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgICAgIA0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICBqc29uIF9qUmV0Ow0KICAgICAgICBfalJldFsiX190aGlzIl0gPSB0aGlzLT5fdG9Eb2N1bWVudCgpOw0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoX2pSZXQpOw0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHRoaXMtPl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICAvL19fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQoNCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGU6OmFjdGl2ZShib29sIHYpew0KICAgIHRoaXMtPl9hY3RpdmUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KYm9vbCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGU6OmFjdGl2ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fYWN0aXZlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZTo6ZW5hYmxlZChib29sIHYpew0KICAgIHRoaXMtPl9lbmFibGVkID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmJvb2wgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlOjplbmFibGVkKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9lbmFibGVkOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZTo6Y29kZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fY29kZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGU6OmNvZGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2NvZGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlOjpvcmRlcihpbnQgdil7DQogICAgdGhpcy0+X29yZGVyID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmludCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGU6Om9yZGVyKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9vcmRlcjsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGU6OmRhdGUodGltZV90IHYpew0KICAgIHRoaXMtPl9kYXRlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnRpbWVfdCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGU6OmRhdGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2RhdGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlOjpuYW1lKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9uYW1lID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZTo6bmFtZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fbmFtZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGU6OnJlbWFyayhzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fcmVtYXJrID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZTo6cmVtYXJrKGpzb24gdil7DQogICAgLy90aGlzLT5fcmVtYXJrDQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGU6OnJlbWFyaygpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fcmVtYXJrOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZTo6dmFsdWUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X3ZhbHVlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZTo6dmFsdWUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3ZhbHVlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZTo6ZGV2aWNlKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlJiB2KXsNCiAgICB0aGlzLT5fZGV2aWNlID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGU6OmRldmljZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZSogdil7DQogICAgdGhpcy0+X2RldmljZSA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2UqIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZTo6ZGV2aWNlKCl7DQogICAgDQogICAgcmV0dXJuICoodGhpcy0+X2RldmljZSk7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlOjphdHRyaWJ1dGUoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZSYgdil7DQogICAgdGhpcy0+X2F0dHJpYnV0ZSA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlOjphdHRyaWJ1dGUoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZSogdil7DQogICAgdGhpcy0+X2F0dHJpYnV0ZSA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZSogZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlOjphdHRyaWJ1dGUoKXsNCiAgICANCiAgICByZXR1cm4gKih0aGlzLT5fYXR0cmlidXRlKTsNCiAgICANCn0NCiAgICANCg0KICAgIA0KDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlOjpfdW5pcXVlKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJEZXZpY2VfQXR0cmlidXRlOjpfdW5pcXVlKCk6ICI7DQoNCiAgICBEZXZpY2VfQXR0cmlidXRlKiByZXQgPSBuZXcgRGV2aWNlX0F0dHJpYnV0ZSgpOw0KICAgIC8vaWYodGhpcy5JZCkgcmV0LklkID0gdGhpcy5JZDsNCiAgICANCiAgICAgICAgDQogICAgaWYodGhpcy0+ZGV2aWNlKCkhPW51bGxwdHIpDQogICAgICAgIA0KICAgICAgICByZXQtPmRldmljZSh0aGlzLT5kZXZpY2UoKS5fdW5pcXVlKCkpOw0KICAgIA0KICAgICAgICANCiAgICBpZih0aGlzLT5hdHRyaWJ1dGUoKSE9bnVsbHB0cikNCiAgICAgICAgDQogICAgICAgIHJldC0+YXR0cmlidXRlKHRoaXMtPmF0dHJpYnV0ZSgpLl91bmlxdWUoKSk7DQogICAgDQoNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlOjpfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iail7DQogICAganNvbiBkYXRhID0ganNvbjo6cGFyc2Uob2JqKTsNCiAgICANCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZTo6X3RvRG9jdW1lbnQoKXsNCiAgICByZXR1cm4gIiI7DQp9DQoNCiAgICANCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlOjpzdG9yZSgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiRGV2aWNlX0F0dHJpYnV0ZTo6c3RvcmUoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK3RoaXNOb2RlLmNvZGUoKSsiQHRpbWUiKyJdLkRldmljZV9BdHRyaWJ1dGUuc3RvcmUoKSIpLm1ldGhvZCgic3RvcmUiKS5jbGFzc05hbWUoIkRldmljZV9BdHRyaWJ1dGUiKS5jYXJyaWVyKHRoaXNOb2RlKS5zZW5kZXIodGhpc05vZGUpLnJlY2lwaWVudCh0aGlzTm9kZS5wYXJlbnQoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGUqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgICAgIA0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICBqc29uIF9qUmV0Ow0KICAgICAgICBfalJldFsiX190aGlzIl0gPSB0aGlzLT5fdG9Eb2N1bWVudCgpOw0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoX2pSZXQpOw0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHRoaXMtPl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICAvL19fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQpzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGU+JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGU6OmZpbmRBbGwoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIkRldmljZV9BdHRyaWJ1dGU6OmZpbmRBbGwoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK3RoaXNOb2RlLmNvZGUoKSsiQHRpbWUiKyJdLkRldmljZV9BdHRyaWJ1dGUuZmluZEFsbCgpIikubWV0aG9kKCJmaW5kQWxsIikuY2xhc3NOYW1lKCJEZXZpY2VfQXR0cmlidXRlIikuY2Fycmllcih0aGlzTm9kZSkuc2VuZGVyKHRoaXNOb2RlKS5yZWNpcGllbnQodGhpc05vZGUucGFyZW50KCkpOw0KDQogICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlPiogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXItPmVtcHR5KCkpew0KICAgIA0KDQogICAgDQogICAgICAgIA0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgICAgICANCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAganNvbiBfalJldDsNCiAgICAgICAgX2pSZXRbIl9fdGhpcyJdID0gdGhpcy0+X3RvRG9jdW1lbnQoKTsNCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKF9qUmV0KTsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiB0aGlzLT5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgLy9fX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGU6OmZpbmQoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIkRldmljZV9BdHRyaWJ1dGU6OmZpbmQoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK3RoaXNOb2RlLmNvZGUoKSsiQHRpbWUiKyJdLkRldmljZV9BdHRyaWJ1dGUuZmluZCgpIikubWV0aG9kKCJmaW5kIikuY2xhc3NOYW1lKCJEZXZpY2VfQXR0cmlidXRlIikuY2Fycmllcih0aGlzTm9kZSkuc2VuZGVyKHRoaXNOb2RlKS5yZWNpcGllbnQodGhpc05vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlKiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlciE9bnVsbHB0cil7DQogICAgDQoNCiAgICANCiAgICAgICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgICAgICANCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAganNvbiBfalJldDsNCiAgICAgICAgX2pSZXRbIl9fdGhpcyJdID0gdGhpcy0+X3RvRG9jdW1lbnQoKTsNCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKF9qUmV0KTsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiB0aGlzLT5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgLy9fX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KDQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGU6OmFjdGl2ZShib29sIHYpew0KICAgIHRoaXMtPl9hY3RpdmUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KYm9vbCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlOjphY3RpdmUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2FjdGl2ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZTo6ZW5hYmxlZChib29sIHYpew0KICAgIHRoaXMtPl9lbmFibGVkID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmJvb2wgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZTo6ZW5hYmxlZCgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fZW5hYmxlZDsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZTo6Y29kZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fY29kZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlOjpjb2RlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9jb2RlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlOjpvcmRlcihpbnQgdil7DQogICAgdGhpcy0+X29yZGVyID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmludCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlOjpvcmRlcigpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fb3JkZXI7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGU6OmRhdGUodGltZV90IHYpew0KICAgIHRoaXMtPl9kYXRlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnRpbWVfdCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlOjpkYXRlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9kYXRlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlOjpuYW1lKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9uYW1lID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGU6Om5hbWUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X25hbWU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGU6OnJlbWFyayhzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fcmVtYXJrID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlOjpyZW1hcmsoanNvbiB2KXsNCiAgICAvL3RoaXMtPl9yZW1hcmsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGU6OnJlbWFyaygpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fcmVtYXJrOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlOjpkZXZpY2VUeXBlKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGUmIHYpew0KICAgIHRoaXMtPl9kZXZpY2VUeXBlID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZTo6ZGV2aWNlVHlwZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlKiB2KXsNCiAgICB0aGlzLT5fZGV2aWNlVHlwZSA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZSogZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZTo6ZGV2aWNlVHlwZSgpew0KICAgIA0KICAgIHJldHVybiAqKHRoaXMtPl9kZXZpY2VUeXBlKTsNCiAgICANCn0NCiAgICANCg0KICAgIA0Kc3RkOjp2ZWN0b3I8c3RkOjphbnk+JiYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZTo6YXR0cmlidXRlX0RldmljZV9BdHRyaWJ1dGVzKCl7DQogICAgcmV0dXJuIG1vdmUoKih0aGlzLT5fYXR0cmlidXRlX0RldmljZV9BdHRyaWJ1dGVzKSk7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGU6OmF0dHJpYnV0ZV9EZXZpY2VfQXR0cmlidXRlcyhzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiB2KXsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZTo6X3VuaXF1ZSgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiVHlwZV9BdHRyaWJ1dGU6Ol91bmlxdWUoKTogIjsNCg0KICAgIFR5cGVfQXR0cmlidXRlKiByZXQgPSBuZXcgVHlwZV9BdHRyaWJ1dGUoKTsNCiAgICAvL2lmKHRoaXMuSWQpIHJldC5JZCA9IHRoaXMuSWQ7DQogICAgDQogICAgICAgIA0KICAgIGlmKHRoaXMtPmNvZGUoKS5lbXB0eSgpKQ0KICAgICAgICANCiAgICAgICAgcmV0LT5jb2RlKHRoaXMtPmNvZGUoKSk7DQogICAgDQogICAgICAgIA0KICAgIGlmKHRoaXMtPmRldmljZVR5cGUoKSE9bnVsbHB0cikNCiAgICAgICAgDQogICAgICAgIHJldC0+ZGV2aWNlVHlwZSh0aGlzLT5kZXZpY2VUeXBlKCkuX3VuaXF1ZSgpKTsNCiAgICANCg0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZTo6X2Zyb21Eb2N1bWVudChzdGQ6OnN0cmluZyBvYmopew0KICAgIGpzb24gZGF0YSA9IGpzb246OnBhcnNlKG9iaik7DQogICAgDQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlOjpfdG9Eb2N1bWVudCgpew0KICAgIHJldHVybiAiIjsNCn0NCg0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZTo6c3RvcmUoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIlR5cGVfQXR0cmlidXRlOjpzdG9yZSgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uVHlwZV9BdHRyaWJ1dGUuc3RvcmUoKSIpLm1ldGhvZCgic3RvcmUiKS5jbGFzc05hbWUoIlR5cGVfQXR0cmlidXRlIikuY2Fycmllcih0aGlzTm9kZSkuc2VuZGVyKHRoaXNOb2RlKS5yZWNpcGllbnQodGhpc05vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZSogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICAgICAgDQogICAgDQogICAgfWVsc2V7DQogICAgICAgIGpzb24gX2pSZXQ7DQogICAgICAgIF9qUmV0WyJfX3RoaXMiXSA9IHRoaXMtPl90b0RvY3VtZW50KCk7DQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChfalJldCk7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogdGhpcy0+X3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIC8vX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCnN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGU+JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlOjpmaW5kQWxsKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJUeXBlX0F0dHJpYnV0ZTo6ZmluZEFsbCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uVHlwZV9BdHRyaWJ1dGUuZmluZEFsbCgpIikubWV0aG9kKCJmaW5kQWxsIikuY2xhc3NOYW1lKCJUeXBlX0F0dHJpYnV0ZSIpLmNhcnJpZXIodGhpc05vZGUpLnNlbmRlcih0aGlzTm9kZSkucmVjaXBpZW50KHRoaXNOb2RlLnBhcmVudCgpKTsNCg0KICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGU+KiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlci0+ZW1wdHkoKSl7DQogICAgDQoNCiAgICANCiAgICAgICAgDQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgICAgIA0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICBqc29uIF9qUmV0Ow0KICAgICAgICBfalJldFsiX190aGlzIl0gPSB0aGlzLT5fdG9Eb2N1bWVudCgpOw0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoX2pSZXQpOw0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHRoaXMtPl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICAvL19fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlOjpmaW5kKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJUeXBlX0F0dHJpYnV0ZTo6ZmluZCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uVHlwZV9BdHRyaWJ1dGUuZmluZCgpIikubWV0aG9kKCJmaW5kIikuY2xhc3NOYW1lKCJUeXBlX0F0dHJpYnV0ZSIpLmNhcnJpZXIodGhpc05vZGUpLnNlbmRlcih0aGlzTm9kZSkucmVjaXBpZW50KHRoaXNOb2RlLnBhcmVudCgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGUqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgICAgIA0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICBqc29uIF9qUmV0Ow0KICAgICAgICBfalJldFsiX190aGlzIl0gPSB0aGlzLT5fdG9Eb2N1bWVudCgpOw0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoX2pSZXQpOw0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHRoaXMtPl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICAvL19fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQoNCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnkmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5OjphY3RpdmUoYm9vbCB2KXsNCiAgICB0aGlzLT5fYWN0aXZlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmJvb2wgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnk6OmFjdGl2ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fYWN0aXZlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnk6OmVuYWJsZWQoYm9vbCB2KXsNCiAgICB0aGlzLT5fZW5hYmxlZCA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5OjplbmFibGVkKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9lbmFibGVkOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnk6OmNvZGUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X2NvZGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnk6OmNvZGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2NvZGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeTo6b3JkZXIoaW50IHYpew0KICAgIHRoaXMtPl9vcmRlciA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQppbnQgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnk6Om9yZGVyKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9vcmRlcjsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnkmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5OjpkYXRlKHRpbWVfdCB2KXsNCiAgICB0aGlzLT5fZGF0ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQp0aW1lX3QgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnk6OmRhdGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2RhdGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeTo6bmFtZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fbmFtZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeTo6bmFtZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fbmFtZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnkmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5OjpyZW1hcmsoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X3JlbWFyayA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnkmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5OjpyZW1hcmsoanNvbiB2KXsNCiAgICAvL3RoaXMtPl9yZW1hcmsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5OjpyZW1hcmsoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3JlbWFyazsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnkmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5OjpwYXJlbnQoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnkmIHYpew0KICAgIHRoaXMtPl9wYXJlbnQgPSAmdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnk6OnBhcmVudChlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeSogdil7DQogICAgdGhpcy0+X3BhcmVudCA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnkqIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5OjpwYXJlbnQoKXsNCiAgICANCiAgICByZXR1cm4gKih0aGlzLT5fcGFyZW50KTsNCiAgICANCn0NCiAgICANCg0KICAgIA0Kc3RkOjp2ZWN0b3I8c3RkOjphbnk+JiYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnk6OnBhcmVudF9EZXZpY2VfQ2F0ZWdvcnlzKCl7DQogICAgcmV0dXJuIG1vdmUoKih0aGlzLT5fcGFyZW50X0RldmljZV9DYXRlZ29yeXMpKTsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnkmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5OjpwYXJlbnRfRGV2aWNlX0NhdGVnb3J5cyhzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiB2KXsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQpzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeTo6Y2F0ZWdvcnlfRGV2aWNlX1R5cGVzKCl7DQogICAgcmV0dXJuIG1vdmUoKih0aGlzLT5fY2F0ZWdvcnlfRGV2aWNlX1R5cGVzKSk7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeTo6Y2F0ZWdvcnlfRGV2aWNlX1R5cGVzKHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIHYpew0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnk6Ol91bmlxdWUoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIkRldmljZV9DYXRlZ29yeTo6X3VuaXF1ZSgpOiAiOw0KDQogICAgRGV2aWNlX0NhdGVnb3J5KiByZXQgPSBuZXcgRGV2aWNlX0NhdGVnb3J5KCk7DQogICAgLy9pZih0aGlzLklkKSByZXQuSWQgPSB0aGlzLklkOw0KICAgIA0KICAgICAgICANCiAgICBpZih0aGlzLT5jb2RlKCkuZW1wdHkoKSkNCiAgICAgICAgDQogICAgICAgIHJldC0+Y29kZSh0aGlzLT5jb2RlKCkpOw0KICAgIA0KDQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnk6Ol9mcm9tRG9jdW1lbnQoc3RkOjpzdHJpbmcgb2JqKXsNCiAgICBqc29uIGRhdGEgPSBqc29uOjpwYXJzZShvYmopOw0KICAgIA0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnk6Ol90b0RvY3VtZW50KCl7DQogICAgcmV0dXJuICIiOw0KfQ0KDQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnk6OnN0b3JlKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJEZXZpY2VfQ2F0ZWdvcnk6OnN0b3JlKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIit0aGlzTm9kZS5jb2RlKCkrIkB0aW1lIisiXS5EZXZpY2VfQ2F0ZWdvcnkuc3RvcmUoKSIpLm1ldGhvZCgic3RvcmUiKS5jbGFzc05hbWUoIkRldmljZV9DYXRlZ29yeSIpLmNhcnJpZXIodGhpc05vZGUpLnNlbmRlcih0aGlzTm9kZSkucmVjaXBpZW50KHRoaXNOb2RlLnBhcmVudCgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5KiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlciE9bnVsbHB0cil7DQogICAgDQoNCiAgICANCiAgICAgICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgICAgICANCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAganNvbiBfalJldDsNCiAgICAgICAgX2pSZXRbIl9fdGhpcyJdID0gdGhpcy0+X3RvRG9jdW1lbnQoKTsNCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKF9qUmV0KTsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiB0aGlzLT5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgLy9fX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0Kc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnk+JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeTo6ZmluZEFsbCgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiRGV2aWNlX0NhdGVnb3J5OjpmaW5kQWxsKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIit0aGlzTm9kZS5jb2RlKCkrIkB0aW1lIisiXS5EZXZpY2VfQ2F0ZWdvcnkuZmluZEFsbCgpIikubWV0aG9kKCJmaW5kQWxsIikuY2xhc3NOYW1lKCJEZXZpY2VfQ2F0ZWdvcnkiKS5jYXJyaWVyKHRoaXNOb2RlKS5zZW5kZXIodGhpc05vZGUpLnJlY2lwaWVudCh0aGlzTm9kZS5wYXJlbnQoKSk7DQoNCiAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeT4qIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyLT5lbXB0eSgpKXsNCiAgICANCg0KICAgIA0KICAgICAgICANCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICAgICAgDQogICAgDQogICAgfWVsc2V7DQogICAgICAgIGpzb24gX2pSZXQ7DQogICAgICAgIF9qUmV0WyJfX3RoaXMiXSA9IHRoaXMtPl90b0RvY3VtZW50KCk7DQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChfalJldCk7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogdGhpcy0+X3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIC8vX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeTo6ZmluZCgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiRGV2aWNlX0NhdGVnb3J5OjpmaW5kKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIit0aGlzTm9kZS5jb2RlKCkrIkB0aW1lIisiXS5EZXZpY2VfQ2F0ZWdvcnkuZmluZCgpIikubWV0aG9kKCJmaW5kIikuY2xhc3NOYW1lKCJEZXZpY2VfQ2F0ZWdvcnkiKS5jYXJyaWVyKHRoaXNOb2RlKS5zZW5kZXIodGhpc05vZGUpLnJlY2lwaWVudCh0aGlzTm9kZS5wYXJlbnQoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeSogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICAgICAgDQogICAgDQogICAgfWVsc2V7DQogICAgICAgIGpzb24gX2pSZXQ7DQogICAgICAgIF9qUmV0WyJfX3RoaXMiXSA9IHRoaXMtPl90b0RvY3VtZW50KCk7DQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChfalJldCk7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogdGhpcy0+X3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIC8vX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCg0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlOjphY3RpdmUoYm9vbCB2KXsNCiAgICB0aGlzLT5fYWN0aXZlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmJvb2wgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZTo6YWN0aXZlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9hY3RpdmU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGU6OmVuYWJsZWQoYm9vbCB2KXsNCiAgICB0aGlzLT5fZW5hYmxlZCA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGU6OmVuYWJsZWQoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2VuYWJsZWQ7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGU6OmNvZGUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X2NvZGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZTo6Y29kZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fY29kZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZTo6b3JkZXIoaW50IHYpew0KICAgIHRoaXMtPl9vcmRlciA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQppbnQgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZTo6b3JkZXIoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X29yZGVyOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlOjpkYXRlKHRpbWVfdCB2KXsNCiAgICB0aGlzLT5fZGF0ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQp0aW1lX3QgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZTo6ZGF0ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fZGF0ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZTo6bmFtZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fbmFtZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlOjpuYW1lKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9uYW1lOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlOjpyZW1hcmsoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X3JlbWFyayA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZTo6cmVtYXJrKGpzb24gdil7DQogICAgLy90aGlzLT5fcmVtYXJrDQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlOjpyZW1hcmsoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3JlbWFyazsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZTo6Y2F0ZWdvcnkoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnkmIHYpew0KICAgIHRoaXMtPl9jYXRlZ29yeSA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGU6OmNhdGVnb3J5KGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5KiB2KXsNCiAgICB0aGlzLT5fY2F0ZWdvcnkgPSAmdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5KiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlOjpjYXRlZ29yeSgpew0KICAgIA0KICAgIHJldHVybiAqKHRoaXMtPl9jYXRlZ29yeSk7DQogICAgDQp9DQogICAgDQoNCiAgICANCnN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGU6OmRldmljZVR5cGVfTWV0cmljcygpew0KICAgIHJldHVybiBtb3ZlKCoodGhpcy0+X2RldmljZVR5cGVfTWV0cmljcykpOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlOjpkZXZpY2VUeXBlX01ldHJpY3Moc3RkOjp2ZWN0b3I8c3RkOjphbnk+JiYgdil7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0Kc3RkOjp2ZWN0b3I8c3RkOjphbnk+JiYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZTo6dHlwZV9EZXZpY2VzKCl7DQogICAgcmV0dXJuIG1vdmUoKih0aGlzLT5fdHlwZV9EZXZpY2VzKSk7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGU6OnR5cGVfRGV2aWNlcyhzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiB2KXsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQpzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlOjpkZXZpY2VUeXBlX1R5cGVfQXR0cmlidXRlcygpew0KICAgIHJldHVybiBtb3ZlKCoodGhpcy0+X2RldmljZVR5cGVfVHlwZV9BdHRyaWJ1dGVzKSk7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGU6OmRldmljZVR5cGVfVHlwZV9BdHRyaWJ1dGVzKHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIHYpew0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlOjpfdW5pcXVlKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJEZXZpY2VfVHlwZTo6X3VuaXF1ZSgpOiAiOw0KDQogICAgRGV2aWNlX1R5cGUqIHJldCA9IG5ldyBEZXZpY2VfVHlwZSgpOw0KICAgIC8vaWYodGhpcy5JZCkgcmV0LklkID0gdGhpcy5JZDsNCiAgICANCiAgICAgICAgDQogICAgaWYodGhpcy0+Y29kZSgpLmVtcHR5KCkpDQogICAgICAgIA0KICAgICAgICByZXQtPmNvZGUodGhpcy0+Y29kZSgpKTsNCiAgICANCg0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZTo6X2Zyb21Eb2N1bWVudChzdGQ6OnN0cmluZyBvYmopew0KICAgIGpzb24gZGF0YSA9IGpzb246OnBhcnNlKG9iaik7DQogICAgDQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlOjpfdG9Eb2N1bWVudCgpew0KICAgIHJldHVybiAiIjsNCn0NCg0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZTo6c3RvcmUoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIkRldmljZV9UeXBlOjpzdG9yZSgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uRGV2aWNlX1R5cGUuc3RvcmUoKSIpLm1ldGhvZCgic3RvcmUiKS5jbGFzc05hbWUoIkRldmljZV9UeXBlIikuY2Fycmllcih0aGlzTm9kZSkuc2VuZGVyKHRoaXNOb2RlKS5yZWNpcGllbnQodGhpc05vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZSogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICAgICAgDQogICAgDQogICAgfWVsc2V7DQogICAgICAgIGpzb24gX2pSZXQ7DQogICAgICAgIF9qUmV0WyJfX3RoaXMiXSA9IHRoaXMtPl90b0RvY3VtZW50KCk7DQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChfalJldCk7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogdGhpcy0+X3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIC8vX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCnN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGU+JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlOjpmaW5kQWxsKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJEZXZpY2VfVHlwZTo6ZmluZEFsbCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uRGV2aWNlX1R5cGUuZmluZEFsbCgpIikubWV0aG9kKCJmaW5kQWxsIikuY2xhc3NOYW1lKCJEZXZpY2VfVHlwZSIpLmNhcnJpZXIodGhpc05vZGUpLnNlbmRlcih0aGlzTm9kZSkucmVjaXBpZW50KHRoaXNOb2RlLnBhcmVudCgpKTsNCg0KICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGU+KiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlci0+ZW1wdHkoKSl7DQogICAgDQoNCiAgICANCiAgICAgICAgDQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgICAgIA0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICBqc29uIF9qUmV0Ow0KICAgICAgICBfalJldFsiX190aGlzIl0gPSB0aGlzLT5fdG9Eb2N1bWVudCgpOw0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoX2pSZXQpOw0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHRoaXMtPl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICAvL19fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlOjpmaW5kKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJEZXZpY2VfVHlwZTo6ZmluZCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uRGV2aWNlX1R5cGUuZmluZCgpIikubWV0aG9kKCJmaW5kIikuY2xhc3NOYW1lKCJEZXZpY2VfVHlwZSIpLmNhcnJpZXIodGhpc05vZGUpLnNlbmRlcih0aGlzTm9kZSkucmVjaXBpZW50KHRoaXNOb2RlLnBhcmVudCgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGUqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgICAgIA0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICBqc29uIF9qUmV0Ow0KICAgICAgICBfalJldFsiX190aGlzIl0gPSB0aGlzLT5fdG9Eb2N1bWVudCgpOw0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoX2pSZXQpOw0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHRoaXMtPl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICAvL19fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQoNCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwOjphY3RpdmUoYm9vbCB2KXsNCiAgICB0aGlzLT5fYWN0aXZlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmJvb2wgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXA6OmFjdGl2ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fYWN0aXZlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXA6OmVuYWJsZWQoYm9vbCB2KXsNCiAgICB0aGlzLT5fZW5hYmxlZCA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwOjplbmFibGVkKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9lbmFibGVkOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXA6OmNvZGUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X2NvZGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXA6OmNvZGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2NvZGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19Hcm91cDo6b3JkZXIoaW50IHYpew0KICAgIHRoaXMtPl9vcmRlciA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQppbnQgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXA6Om9yZGVyKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9vcmRlcjsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwOjpkYXRlKHRpbWVfdCB2KXsNCiAgICB0aGlzLT5fZGF0ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQp0aW1lX3QgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXA6OmRhdGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2RhdGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19Hcm91cDo6bmFtZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fbmFtZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19Hcm91cDo6bmFtZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fbmFtZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwOjpyZW1hcmsoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X3JlbWFyayA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwOjpyZW1hcmsoanNvbiB2KXsNCiAgICAvL3RoaXMtPl9yZW1hcmsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwOjpyZW1hcmsoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3JlbWFyazsNCiAgICANCn0NCiAgICANCg0KICAgIA0Kc3RkOjp2ZWN0b3I8c3RkOjphbnk+JiYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXA6Omdyb3VwX01ldHJpY19UeXBlcygpew0KICAgIHJldHVybiBtb3ZlKCoodGhpcy0+X2dyb3VwX01ldHJpY19UeXBlcykpOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXA6Omdyb3VwX01ldHJpY19UeXBlcyhzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiB2KXsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwOjpfdW5pcXVlKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJNZXRyaWNfR3JvdXA6Ol91bmlxdWUoKTogIjsNCg0KICAgIE1ldHJpY19Hcm91cCogcmV0ID0gbmV3IE1ldHJpY19Hcm91cCgpOw0KICAgIC8vaWYodGhpcy5JZCkgcmV0LklkID0gdGhpcy5JZDsNCiAgICANCiAgICAgICAgDQogICAgaWYodGhpcy0+Y29kZSgpLmVtcHR5KCkpDQogICAgICAgIA0KICAgICAgICByZXQtPmNvZGUodGhpcy0+Y29kZSgpKTsNCiAgICANCg0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwOjpfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iail7DQogICAganNvbiBkYXRhID0ganNvbjo6cGFyc2Uob2JqKTsNCiAgICANCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwOjpfdG9Eb2N1bWVudCgpew0KICAgIHJldHVybiAiIjsNCn0NCg0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwOjpzdG9yZSgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiTWV0cmljX0dyb3VwOjpzdG9yZSgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uTWV0cmljX0dyb3VwLnN0b3JlKCkiKS5tZXRob2QoInN0b3JlIikuY2xhc3NOYW1lKCJNZXRyaWNfR3JvdXAiKS5jYXJyaWVyKHRoaXNOb2RlKS5zZW5kZXIodGhpc05vZGUpLnJlY2lwaWVudCh0aGlzTm9kZS5wYXJlbnQoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19Hcm91cCogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICAgICAgDQogICAgDQogICAgfWVsc2V7DQogICAgICAgIGpzb24gX2pSZXQ7DQogICAgICAgIF9qUmV0WyJfX3RoaXMiXSA9IHRoaXMtPl90b0RvY3VtZW50KCk7DQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChfalJldCk7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogdGhpcy0+X3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIC8vX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCnN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwPiYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXA6OmZpbmRBbGwoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIk1ldHJpY19Hcm91cDo6ZmluZEFsbCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uTWV0cmljX0dyb3VwLmZpbmRBbGwoKSIpLm1ldGhvZCgiZmluZEFsbCIpLmNsYXNzTmFtZSgiTWV0cmljX0dyb3VwIikuY2Fycmllcih0aGlzTm9kZSkuc2VuZGVyKHRoaXNOb2RlKS5yZWNpcGllbnQodGhpc05vZGUucGFyZW50KCkpOw0KDQogICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXA+KiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlci0+ZW1wdHkoKSl7DQogICAgDQoNCiAgICANCiAgICAgICAgDQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgICAgIA0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICBqc29uIF9qUmV0Ow0KICAgICAgICBfalJldFsiX190aGlzIl0gPSB0aGlzLT5fdG9Eb2N1bWVudCgpOw0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoX2pSZXQpOw0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHRoaXMtPl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICAvL19fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXA6OmZpbmQoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIk1ldHJpY19Hcm91cDo6ZmluZCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uTWV0cmljX0dyb3VwLmZpbmQoKSIpLm1ldGhvZCgiZmluZCIpLmNsYXNzTmFtZSgiTWV0cmljX0dyb3VwIikuY2Fycmllcih0aGlzTm9kZSkuc2VuZGVyKHRoaXNOb2RlKS5yZWNpcGllbnQodGhpc05vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXAqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgICAgIA0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICBqc29uIF9qUmV0Ow0KICAgICAgICBfalJldFsiX190aGlzIl0gPSB0aGlzLT5fdG9Eb2N1bWVudCgpOw0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoX2pSZXQpOw0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHRoaXMtPl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICAvL19fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQoNCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZTo6YWN0aXZlKGJvb2wgdil7DQogICAgdGhpcy0+X2FjdGl2ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGU6OmFjdGl2ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fYWN0aXZlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19UeXBlOjplbmFibGVkKGJvb2wgdil7DQogICAgdGhpcy0+X2VuYWJsZWQgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KYm9vbCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19UeXBlOjplbmFibGVkKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9lbmFibGVkOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19UeXBlOjpjb2RlKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9jb2RlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGU6OmNvZGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2NvZGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGU6Om9yZGVyKGludCB2KXsNCiAgICB0aGlzLT5fb3JkZXIgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KaW50IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGU6Om9yZGVyKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9vcmRlcjsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZTo6ZGF0ZSh0aW1lX3Qgdil7DQogICAgdGhpcy0+X2RhdGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KdGltZV90IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGU6OmRhdGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2RhdGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGU6Om5hbWUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X25hbWUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZTo6bmFtZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fbmFtZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZTo6cmVtYXJrKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9yZW1hcmsgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGU6OnJlbWFyayhqc29uIHYpew0KICAgIC8vdGhpcy0+X3JlbWFyaw0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZTo6cmVtYXJrKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9yZW1hcms7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGU6Omdyb3VwKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwJiB2KXsNCiAgICB0aGlzLT5fZ3JvdXAgPSAmdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19UeXBlOjpncm91cChlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19Hcm91cCogdil7DQogICAgdGhpcy0+X2dyb3VwID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19Hcm91cCogZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZTo6Z3JvdXAoKXsNCiAgICANCiAgICByZXR1cm4gKih0aGlzLT5fZ3JvdXApOw0KICAgIA0KfQ0KICAgIA0KDQogICAgDQpzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19UeXBlOjp0eXBlX01ldHJpY3MoKXsNCiAgICByZXR1cm4gbW92ZSgqKHRoaXMtPl90eXBlX01ldHJpY3MpKTsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZTo6dHlwZV9NZXRyaWNzKHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIHYpew0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19UeXBlOjpfdW5pcXVlKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJNZXRyaWNfVHlwZTo6X3VuaXF1ZSgpOiAiOw0KDQogICAgTWV0cmljX1R5cGUqIHJldCA9IG5ldyBNZXRyaWNfVHlwZSgpOw0KICAgIC8vaWYodGhpcy5JZCkgcmV0LklkID0gdGhpcy5JZDsNCiAgICANCiAgICAgICAgDQogICAgaWYodGhpcy0+Y29kZSgpLmVtcHR5KCkpDQogICAgICAgIA0KICAgICAgICByZXQtPmNvZGUodGhpcy0+Y29kZSgpKTsNCiAgICANCg0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZTo6X2Zyb21Eb2N1bWVudChzdGQ6OnN0cmluZyBvYmopew0KICAgIGpzb24gZGF0YSA9IGpzb246OnBhcnNlKG9iaik7DQogICAgDQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19UeXBlOjpfdG9Eb2N1bWVudCgpew0KICAgIHJldHVybiAiIjsNCn0NCg0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZTo6c3RvcmUoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIk1ldHJpY19UeXBlOjpzdG9yZSgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uTWV0cmljX1R5cGUuc3RvcmUoKSIpLm1ldGhvZCgic3RvcmUiKS5jbGFzc05hbWUoIk1ldHJpY19UeXBlIikuY2Fycmllcih0aGlzTm9kZSkuc2VuZGVyKHRoaXNOb2RlKS5yZWNpcGllbnQodGhpc05vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZSogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICAgICAgDQogICAgDQogICAgfWVsc2V7DQogICAgICAgIGpzb24gX2pSZXQ7DQogICAgICAgIF9qUmV0WyJfX3RoaXMiXSA9IHRoaXMtPl90b0RvY3VtZW50KCk7DQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChfalJldCk7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogdGhpcy0+X3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIC8vX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCnN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGU+JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19UeXBlOjpmaW5kQWxsKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJNZXRyaWNfVHlwZTo6ZmluZEFsbCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uTWV0cmljX1R5cGUuZmluZEFsbCgpIikubWV0aG9kKCJmaW5kQWxsIikuY2xhc3NOYW1lKCJNZXRyaWNfVHlwZSIpLmNhcnJpZXIodGhpc05vZGUpLnNlbmRlcih0aGlzTm9kZSkucmVjaXBpZW50KHRoaXNOb2RlLnBhcmVudCgpKTsNCg0KICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGU+KiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlci0+ZW1wdHkoKSl7DQogICAgDQoNCiAgICANCiAgICAgICAgDQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgICAgIA0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICBqc29uIF9qUmV0Ow0KICAgICAgICBfalJldFsiX190aGlzIl0gPSB0aGlzLT5fdG9Eb2N1bWVudCgpOw0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoX2pSZXQpOw0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHRoaXMtPl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICAvL19fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19UeXBlOjpmaW5kKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJNZXRyaWNfVHlwZTo6ZmluZCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uTWV0cmljX1R5cGUuZmluZCgpIikubWV0aG9kKCJmaW5kIikuY2xhc3NOYW1lKCJNZXRyaWNfVHlwZSIpLmNhcnJpZXIodGhpc05vZGUpLnNlbmRlcih0aGlzTm9kZSkucmVjaXBpZW50KHRoaXNOb2RlLnBhcmVudCgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGUqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgICAgIA0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICBqc29uIF9qUmV0Ow0KICAgICAgICBfalJldFsiX190aGlzIl0gPSB0aGlzLT5fdG9Eb2N1bWVudCgpOw0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoX2pSZXQpOw0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHRoaXMtPl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICAvL19fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQoNCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnOjphY3RpdmUoYm9vbCB2KXsNCiAgICB0aGlzLT5fYWN0aXZlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmJvb2wgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWc6OmFjdGl2ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fYWN0aXZlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWc6OmVuYWJsZWQoYm9vbCB2KXsNCiAgICB0aGlzLT5fZW5hYmxlZCA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnOjplbmFibGVkKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9lbmFibGVkOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWc6OmNvZGUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X2NvZGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWc6OmNvZGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2NvZGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZzo6b3JkZXIoaW50IHYpew0KICAgIHRoaXMtPl9vcmRlciA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQppbnQgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWc6Om9yZGVyKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9vcmRlcjsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnOjpkYXRlKHRpbWVfdCB2KXsNCiAgICB0aGlzLT5fZGF0ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQp0aW1lX3QgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWc6OmRhdGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2RhdGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZzo6bmFtZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fbmFtZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZzo6bmFtZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fbmFtZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnOjpyZW1hcmsoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X3JlbWFyayA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnOjpyZW1hcmsoanNvbiB2KXsNCiAgICAvL3RoaXMtPl9yZW1hcmsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnOjpyZW1hcmsoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3JlbWFyazsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnOjp2YWx1ZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fdmFsdWUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZzo6dmFsdWUoanNvbiB2KXsNCiAgICAvL3RoaXMtPl92YWx1ZQ0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWc6OnZhbHVlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl92YWx1ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnOjpzY3JpcHQoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X3NjcmlwdCA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnOjpzY3JpcHQoanNvbiB2KXsNCiAgICAvL3RoaXMtPl9zY3JpcHQNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnOjpzY3JpcHQoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3NjcmlwdDsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnOjp0b29sKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbCYgdil7DQogICAgdGhpcy0+X3Rvb2wgPSAmdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWc6OnRvb2woZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sKiB2KXsNCiAgICB0aGlzLT5fdG9vbCA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sKiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZzo6dG9vbCgpew0KICAgIA0KICAgIHJldHVybiAqKHRoaXMtPl90b29sKTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnOjpncm91cChlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cCYgdil7DQogICAgdGhpcy0+X2dyb3VwID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnOjpncm91cChlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cCogdil7DQogICAgdGhpcy0+X2dyb3VwID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cCogZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWc6Omdyb3VwKCl7DQogICAgDQogICAgcmV0dXJuICoodGhpcy0+X2dyb3VwKTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnOjp0eXBlKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlJiB2KXsNCiAgICB0aGlzLT5fdHlwZSA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZzo6dHlwZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZSogdil7DQogICAgdGhpcy0+X3R5cGUgPSAmdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlKiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZzo6dHlwZSgpew0KICAgIA0KICAgIHJldHVybiAqKHRoaXMtPl90eXBlKTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnOjpub2RlKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgdil7DQogICAgdGhpcy0+X25vZGUgPSAmdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWc6Om5vZGUoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlKiB2KXsNCiAgICB0aGlzLT5fbm9kZSA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlKiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZzo6bm9kZSgpew0KICAgIA0KICAgIHJldHVybiAqKHRoaXMtPl9ub2RlKTsNCiAgICANCn0NCiAgICANCg0KICAgIA0KDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZzo6X3VuaXF1ZSgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiQ29uZmlnOjpfdW5pcXVlKCk6ICI7DQoNCiAgICBDb25maWcqIHJldCA9IG5ldyBDb25maWcoKTsNCiAgICAvL2lmKHRoaXMuSWQpIHJldC5JZCA9IHRoaXMuSWQ7DQogICAgDQogICAgICAgIA0KICAgIGlmKHRoaXMtPm5hbWUoKS5lbXB0eSgpKQ0KICAgICAgICANCiAgICAgICAgcmV0LT5uYW1lKHRoaXMtPm5hbWUoKSk7DQogICAgDQoNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZzo6X2Zyb21Eb2N1bWVudChzdGQ6OnN0cmluZyBvYmopew0KICAgIGpzb24gZGF0YSA9IGpzb246OnBhcnNlKG9iaik7DQogICAgDQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZzo6X3RvRG9jdW1lbnQoKXsNCiAgICByZXR1cm4gIiI7DQp9DQoNCiAgICANCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZzo6c3RvcmUoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIkNvbmZpZzo6c3RvcmUoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK3RoaXNOb2RlLmNvZGUoKSsiQHRpbWUiKyJdLkNvbmZpZy5zdG9yZSgpIikubWV0aG9kKCJzdG9yZSIpLmNsYXNzTmFtZSgiQ29uZmlnIikuY2Fycmllcih0aGlzTm9kZSkuc2VuZGVyKHRoaXNOb2RlKS5yZWNpcGllbnQodGhpc05vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWcqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgICAgIA0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICBqc29uIF9qUmV0Ow0KICAgICAgICBfalJldFsiX190aGlzIl0gPSB0aGlzLT5fdG9Eb2N1bWVudCgpOw0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoX2pSZXQpOw0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHRoaXMtPl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICAvL19fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQpzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZz4mIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnOjpmaW5kQWxsKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJDb25maWc6OmZpbmRBbGwoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK3RoaXNOb2RlLmNvZGUoKSsiQHRpbWUiKyJdLkNvbmZpZy5maW5kQWxsKCkiKS5tZXRob2QoImZpbmRBbGwiKS5jbGFzc05hbWUoIkNvbmZpZyIpLmNhcnJpZXIodGhpc05vZGUpLnNlbmRlcih0aGlzTm9kZSkucmVjaXBpZW50KHRoaXNOb2RlLnBhcmVudCgpKTsNCg0KICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnPiogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXItPmVtcHR5KCkpew0KICAgIA0KDQogICAgDQogICAgICAgIA0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgICAgICANCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAganNvbiBfalJldDsNCiAgICAgICAgX2pSZXRbIl9fdGhpcyJdID0gdGhpcy0+X3RvRG9jdW1lbnQoKTsNCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKF9qUmV0KTsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiB0aGlzLT5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgLy9fX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnOjpmaW5kKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJDb25maWc6OmZpbmQoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK3RoaXNOb2RlLmNvZGUoKSsiQHRpbWUiKyJdLkNvbmZpZy5maW5kKCkiKS5tZXRob2QoImZpbmQiKS5jbGFzc05hbWUoIkNvbmZpZyIpLmNhcnJpZXIodGhpc05vZGUpLnNlbmRlcih0aGlzTm9kZSkucmVjaXBpZW50KHRoaXNOb2RlLnBhcmVudCgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnKiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlciE9bnVsbHB0cil7DQogICAgDQoNCiAgICANCiAgICAgICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgICAgICANCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAganNvbiBfalJldDsNCiAgICAgICAgX2pSZXRbIl9fdGhpcyJdID0gdGhpcy0+X3RvRG9jdW1lbnQoKTsNCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKF9qUmV0KTsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiB0aGlzLT5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgLy9fX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KDQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sOjphY3RpdmUoYm9vbCB2KXsNCiAgICB0aGlzLT5fYWN0aXZlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmJvb2wgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sOjphY3RpdmUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2FjdGl2ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2w6OmVuYWJsZWQoYm9vbCB2KXsNCiAgICB0aGlzLT5fZW5hYmxlZCA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbDo6ZW5hYmxlZCgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fZW5hYmxlZDsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2w6OmNvZGUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X2NvZGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sOjpjb2RlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9jb2RlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2wmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbDo6b3JkZXIoaW50IHYpew0KICAgIHRoaXMtPl9vcmRlciA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQppbnQgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sOjpvcmRlcigpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fb3JkZXI7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sOjpkYXRlKHRpbWVfdCB2KXsNCiAgICB0aGlzLT5fZGF0ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQp0aW1lX3QgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sOjpkYXRlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9kYXRlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2wmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbDo6bmFtZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fbmFtZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2w6Om5hbWUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X25hbWU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sOjpyZW1hcmsoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X3JlbWFyayA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2w6OnJlbWFyayhqc29uIHYpew0KICAgIC8vdGhpcy0+X3JlbWFyaw0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sOjpyZW1hcmsoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3JlbWFyazsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2w6OnR5cGUoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGUmIHYpew0KICAgIHRoaXMtPl90eXBlID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2w6OnR5cGUoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGUqIHYpew0KICAgIHRoaXMtPl90eXBlID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZSogZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sOjp0eXBlKCl7DQogICAgDQogICAgcmV0dXJuICoodGhpcy0+X3R5cGUpOw0KICAgIA0KfQ0KICAgIA0KDQogICAgDQpzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2w6OnRvb2xfQ29uZmlncygpew0KICAgIHJldHVybiBtb3ZlKCoodGhpcy0+X3Rvb2xfQ29uZmlncykpOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2wmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbDo6dG9vbF9Db25maWdzKHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIHYpew0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCnN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbDo6dG9vbF9NYXBwaW5ncygpew0KICAgIHJldHVybiBtb3ZlKCoodGhpcy0+X3Rvb2xfTWFwcGluZ3MpKTsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2w6OnRvb2xfTWFwcGluZ3Moc3RkOjp2ZWN0b3I8c3RkOjphbnk+JiYgdil7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sOjpfdW5pcXVlKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJUb29sOjpfdW5pcXVlKCk6ICI7DQoNCiAgICBUb29sKiByZXQgPSBuZXcgVG9vbCgpOw0KICAgIC8vaWYodGhpcy5JZCkgcmV0LklkID0gdGhpcy5JZDsNCiAgICANCiAgICAgICAgDQogICAgaWYodGhpcy0+bmFtZSgpLmVtcHR5KCkpDQogICAgICAgIA0KICAgICAgICByZXQtPm5hbWUodGhpcy0+bmFtZSgpKTsNCiAgICANCg0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2w6Ol9mcm9tRG9jdW1lbnQoc3RkOjpzdHJpbmcgb2JqKXsNCiAgICBqc29uIGRhdGEgPSBqc29uOjpwYXJzZShvYmopOw0KICAgIA0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sOjpfdG9Eb2N1bWVudCgpew0KICAgIHJldHVybiAiIjsNCn0NCg0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2w6OnN0b3JlKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJUb29sOjpzdG9yZSgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uVG9vbC5zdG9yZSgpIikubWV0aG9kKCJzdG9yZSIpLmNsYXNzTmFtZSgiVG9vbCIpLmNhcnJpZXIodGhpc05vZGUpLnNlbmRlcih0aGlzTm9kZSkucmVjaXBpZW50KHRoaXNOb2RlLnBhcmVudCgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbCogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICAgICAgDQogICAgDQogICAgfWVsc2V7DQogICAgICAgIGpzb24gX2pSZXQ7DQogICAgICAgIF9qUmV0WyJfX3RoaXMiXSA9IHRoaXMtPl90b0RvY3VtZW50KCk7DQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChfalJldCk7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogdGhpcy0+X3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIC8vX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCnN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbD4mIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbDo6ZmluZEFsbCgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiVG9vbDo6ZmluZEFsbCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uVG9vbC5maW5kQWxsKCkiKS5tZXRob2QoImZpbmRBbGwiKS5jbGFzc05hbWUoIlRvb2wiKS5jYXJyaWVyKHRoaXNOb2RlKS5zZW5kZXIodGhpc05vZGUpLnJlY2lwaWVudCh0aGlzTm9kZS5wYXJlbnQoKSk7DQoNCiAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2w+KiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlci0+ZW1wdHkoKSl7DQogICAgDQoNCiAgICANCiAgICAgICAgDQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgICAgIA0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICBqc29uIF9qUmV0Ow0KICAgICAgICBfalJldFsiX190aGlzIl0gPSB0aGlzLT5fdG9Eb2N1bWVudCgpOw0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoX2pSZXQpOw0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHRoaXMtPl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICAvL19fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2wmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbDo6ZmluZCgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiVG9vbDo6ZmluZCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uVG9vbC5maW5kKCkiKS5tZXRob2QoImZpbmQiKS5jbGFzc05hbWUoIlRvb2wiKS5jYXJyaWVyKHRoaXNOb2RlKS5zZW5kZXIodGhpc05vZGUpLnJlY2lwaWVudCh0aGlzTm9kZS5wYXJlbnQoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2wqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgICAgIA0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICBqc29uIF9qUmV0Ow0KICAgICAgICBfalJldFsiX190aGlzIl0gPSB0aGlzLT5fdG9Eb2N1bWVudCgpOw0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoX2pSZXQpOw0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHRoaXMtPl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICAvL19fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQoNCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwOjphY3RpdmUoYm9vbCB2KXsNCiAgICB0aGlzLT5fYWN0aXZlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmJvb2wgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXA6OmFjdGl2ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fYWN0aXZlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXA6OmVuYWJsZWQoYm9vbCB2KXsNCiAgICB0aGlzLT5fZW5hYmxlZCA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwOjplbmFibGVkKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9lbmFibGVkOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXA6OmNvZGUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X2NvZGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXA6OmNvZGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2NvZGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cDo6b3JkZXIoaW50IHYpew0KICAgIHRoaXMtPl9vcmRlciA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQppbnQgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXA6Om9yZGVyKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9vcmRlcjsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwOjpkYXRlKHRpbWVfdCB2KXsNCiAgICB0aGlzLT5fZGF0ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQp0aW1lX3QgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXA6OmRhdGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2RhdGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cDo6bmFtZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fbmFtZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cDo6bmFtZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fbmFtZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwOjpyZW1hcmsoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X3JlbWFyayA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwOjpyZW1hcmsoanNvbiB2KXsNCiAgICAvL3RoaXMtPl9yZW1hcmsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwOjpyZW1hcmsoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3JlbWFyazsNCiAgICANCn0NCiAgICANCg0KICAgIA0Kc3RkOjp2ZWN0b3I8c3RkOjphbnk+JiYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXA6Omdyb3VwX0NvbmZpZ3MoKXsNCiAgICByZXR1cm4gbW92ZSgqKHRoaXMtPl9ncm91cF9Db25maWdzKSk7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cDo6Z3JvdXBfQ29uZmlncyhzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiB2KXsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQpzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cDo6Z3JvdXBfTWFwcGluZ3MoKXsNCiAgICByZXR1cm4gbW92ZSgqKHRoaXMtPl9ncm91cF9NYXBwaW5ncykpOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXA6Omdyb3VwX01hcHBpbmdzKHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIHYpew0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXA6Ol91bmlxdWUoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIkNvbmZpZ19Hcm91cDo6X3VuaXF1ZSgpOiAiOw0KDQogICAgQ29uZmlnX0dyb3VwKiByZXQgPSBuZXcgQ29uZmlnX0dyb3VwKCk7DQogICAgLy9pZih0aGlzLklkKSByZXQuSWQgPSB0aGlzLklkOw0KICAgIA0KICAgICAgICANCiAgICBpZih0aGlzLT5jb2RlKCkuZW1wdHkoKSkNCiAgICAgICAgDQogICAgICAgIHJldC0+Y29kZSh0aGlzLT5jb2RlKCkpOw0KICAgIA0KDQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXA6Ol9mcm9tRG9jdW1lbnQoc3RkOjpzdHJpbmcgb2JqKXsNCiAgICBqc29uIGRhdGEgPSBqc29uOjpwYXJzZShvYmopOw0KICAgIA0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXA6Ol90b0RvY3VtZW50KCl7DQogICAgcmV0dXJuICIiOw0KfQ0KDQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXA6OnN0b3JlKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJDb25maWdfR3JvdXA6OnN0b3JlKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIit0aGlzTm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Db25maWdfR3JvdXAuc3RvcmUoKSIpLm1ldGhvZCgic3RvcmUiKS5jbGFzc05hbWUoIkNvbmZpZ19Hcm91cCIpLmNhcnJpZXIodGhpc05vZGUpLnNlbmRlcih0aGlzTm9kZSkucmVjaXBpZW50KHRoaXNOb2RlLnBhcmVudCgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwKiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlciE9bnVsbHB0cil7DQogICAgDQoNCiAgICANCiAgICAgICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgICAgICANCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAganNvbiBfalJldDsNCiAgICAgICAgX2pSZXRbIl9fdGhpcyJdID0gdGhpcy0+X3RvRG9jdW1lbnQoKTsNCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKF9qUmV0KTsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiB0aGlzLT5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgLy9fX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0Kc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXA+JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cDo6ZmluZEFsbCgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiQ29uZmlnX0dyb3VwOjpmaW5kQWxsKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIit0aGlzTm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Db25maWdfR3JvdXAuZmluZEFsbCgpIikubWV0aG9kKCJmaW5kQWxsIikuY2xhc3NOYW1lKCJDb25maWdfR3JvdXAiKS5jYXJyaWVyKHRoaXNOb2RlKS5zZW5kZXIodGhpc05vZGUpLnJlY2lwaWVudCh0aGlzTm9kZS5wYXJlbnQoKSk7DQoNCiAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cD4qIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyLT5lbXB0eSgpKXsNCiAgICANCg0KICAgIA0KICAgICAgICANCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICAgICAgDQogICAgDQogICAgfWVsc2V7DQogICAgICAgIGpzb24gX2pSZXQ7DQogICAgICAgIF9qUmV0WyJfX3RoaXMiXSA9IHRoaXMtPl90b0RvY3VtZW50KCk7DQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChfalJldCk7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogdGhpcy0+X3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIC8vX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cDo6ZmluZCgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiQ29uZmlnX0dyb3VwOjpmaW5kKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIit0aGlzTm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Db25maWdfR3JvdXAuZmluZCgpIikubWV0aG9kKCJmaW5kIikuY2xhc3NOYW1lKCJDb25maWdfR3JvdXAiKS5jYXJyaWVyKHRoaXNOb2RlKS5zZW5kZXIodGhpc05vZGUpLnJlY2lwaWVudCh0aGlzTm9kZS5wYXJlbnQoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cCogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICAgICAgDQogICAgDQogICAgfWVsc2V7DQogICAgICAgIGpzb24gX2pSZXQ7DQogICAgICAgIF9qUmV0WyJfX3RoaXMiXSA9IHRoaXMtPl90b0RvY3VtZW50KCk7DQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChfalJldCk7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogdGhpcy0+X3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIC8vX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCg0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmdfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cDo6YWN0aXZlKGJvb2wgdil7DQogICAgdGhpcy0+X2FjdGl2ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cDo6YWN0aXZlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9hY3RpdmU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nX0dyb3VwOjplbmFibGVkKGJvb2wgdil7DQogICAgdGhpcy0+X2VuYWJsZWQgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KYm9vbCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmdfR3JvdXA6OmVuYWJsZWQoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2VuYWJsZWQ7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nX0dyb3VwOjpjb2RlKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9jb2RlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cDo6Y29kZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fY29kZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmdfR3JvdXA6Om9yZGVyKGludCB2KXsNCiAgICB0aGlzLT5fb3JkZXIgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KaW50IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cDo6b3JkZXIoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X29yZGVyOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmdfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cDo6ZGF0ZSh0aW1lX3Qgdil7DQogICAgdGhpcy0+X2RhdGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KdGltZV90IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cDo6ZGF0ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fZGF0ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmdfR3JvdXA6Om5hbWUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X25hbWUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nX0dyb3VwOjpuYW1lKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9uYW1lOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmdfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cDo6cmVtYXJrKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9yZW1hcmsgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nX0dyb3VwOjpyZW1hcmsoanNvbiB2KXsNCiAgICAvL3RoaXMtPl9yZW1hcmsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cDo6cmVtYXJrKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9yZW1hcms7DQogICAgDQp9DQogICAgDQoNCiAgICANCg0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmdfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cDo6X3VuaXF1ZSgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiTWFwcGluZ19Hcm91cDo6X3VuaXF1ZSgpOiAiOw0KDQogICAgTWFwcGluZ19Hcm91cCogcmV0ID0gbmV3IE1hcHBpbmdfR3JvdXAoKTsNCiAgICAvL2lmKHRoaXMuSWQpIHJldC5JZCA9IHRoaXMuSWQ7DQogICAgDQogICAgICAgIA0KICAgIGlmKHRoaXMtPmNvZGUoKS5lbXB0eSgpKQ0KICAgICAgICANCiAgICAgICAgcmV0LT5jb2RlKHRoaXMtPmNvZGUoKSk7DQogICAgDQoNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nX0dyb3VwOjpfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iail7DQogICAganNvbiBkYXRhID0ganNvbjo6cGFyc2Uob2JqKTsNCiAgICANCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cDo6X3RvRG9jdW1lbnQoKXsNCiAgICByZXR1cm4gIiI7DQp9DQoNCiAgICANCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nX0dyb3VwOjpzdG9yZSgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiTWFwcGluZ19Hcm91cDo6c3RvcmUoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK3RoaXNOb2RlLmNvZGUoKSsiQHRpbWUiKyJdLk1hcHBpbmdfR3JvdXAuc3RvcmUoKSIpLm1ldGhvZCgic3RvcmUiKS5jbGFzc05hbWUoIk1hcHBpbmdfR3JvdXAiKS5jYXJyaWVyKHRoaXNOb2RlKS5zZW5kZXIodGhpc05vZGUpLnJlY2lwaWVudCh0aGlzTm9kZS5wYXJlbnQoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmdfR3JvdXAqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgICAgIA0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICBqc29uIF9qUmV0Ow0KICAgICAgICBfalJldFsiX190aGlzIl0gPSB0aGlzLT5fdG9Eb2N1bWVudCgpOw0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoX2pSZXQpOw0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHRoaXMtPl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICAvL19fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQpzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmdfR3JvdXA+JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmdfR3JvdXA6OmZpbmRBbGwoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIk1hcHBpbmdfR3JvdXA6OmZpbmRBbGwoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK3RoaXNOb2RlLmNvZGUoKSsiQHRpbWUiKyJdLk1hcHBpbmdfR3JvdXAuZmluZEFsbCgpIikubWV0aG9kKCJmaW5kQWxsIikuY2xhc3NOYW1lKCJNYXBwaW5nX0dyb3VwIikuY2Fycmllcih0aGlzTm9kZSkuc2VuZGVyKHRoaXNOb2RlKS5yZWNpcGllbnQodGhpc05vZGUucGFyZW50KCkpOw0KDQogICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nX0dyb3VwPiogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXItPmVtcHR5KCkpew0KICAgIA0KDQogICAgDQogICAgICAgIA0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgICAgICANCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAganNvbiBfalJldDsNCiAgICAgICAgX2pSZXRbIl9fdGhpcyJdID0gdGhpcy0+X3RvRG9jdW1lbnQoKTsNCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKF9qUmV0KTsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiB0aGlzLT5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgLy9fX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmdfR3JvdXA6OmZpbmQoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIk1hcHBpbmdfR3JvdXA6OmZpbmQoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK3RoaXNOb2RlLmNvZGUoKSsiQHRpbWUiKyJdLk1hcHBpbmdfR3JvdXAuZmluZCgpIikubWV0aG9kKCJmaW5kIikuY2xhc3NOYW1lKCJNYXBwaW5nX0dyb3VwIikuY2Fycmllcih0aGlzTm9kZSkuc2VuZGVyKHRoaXNOb2RlKS5yZWNpcGllbnQodGhpc05vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nX0dyb3VwKiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlciE9bnVsbHB0cil7DQogICAgDQoNCiAgICANCiAgICAgICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgICAgICANCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAganNvbiBfalJldDsNCiAgICAgICAgX2pSZXRbIl9fdGhpcyJdID0gdGhpcy0+X3RvRG9jdW1lbnQoKTsNCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKF9qUmV0KTsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiB0aGlzLT5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgLy9fX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KDQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZTo6YWN0aXZlKGJvb2wgdil7DQogICAgdGhpcy0+X2FjdGl2ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlOjphY3RpdmUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2FjdGl2ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlOjplbmFibGVkKGJvb2wgdil7DQogICAgdGhpcy0+X2VuYWJsZWQgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KYm9vbCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZTo6ZW5hYmxlZCgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fZW5hYmxlZDsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlOjpjb2RlKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9jb2RlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlOjpjb2RlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9jb2RlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGU6Om9yZGVyKGludCB2KXsNCiAgICB0aGlzLT5fb3JkZXIgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KaW50IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlOjpvcmRlcigpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fb3JkZXI7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZTo6ZGF0ZSh0aW1lX3Qgdil7DQogICAgdGhpcy0+X2RhdGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KdGltZV90IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlOjpkYXRlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9kYXRlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGU6Om5hbWUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X25hbWUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGU6Om5hbWUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X25hbWU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZTo6cmVtYXJrKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9yZW1hcmsgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZTo6cmVtYXJrKGpzb24gdil7DQogICAgLy90aGlzLT5fcmVtYXJrDQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZTo6cmVtYXJrKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9yZW1hcms7DQogICAgDQp9DQogICAgDQoNCiAgICANCnN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlOjp0eXBlX0NvbmZpZ3MoKXsNCiAgICByZXR1cm4gbW92ZSgqKHRoaXMtPl90eXBlX0NvbmZpZ3MpKTsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlOjp0eXBlX0NvbmZpZ3Moc3RkOjp2ZWN0b3I8c3RkOjphbnk+JiYgdil7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0Kc3RkOjp2ZWN0b3I8c3RkOjphbnk+JiYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGU6OnR5cGVfVG9vbHMoKXsNCiAgICByZXR1cm4gbW92ZSgqKHRoaXMtPl90eXBlX1Rvb2xzKSk7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZTo6dHlwZV9Ub29scyhzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiB2KXsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQpzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZTo6dHlwZV9NYXBwaW5ncygpew0KICAgIHJldHVybiBtb3ZlKCoodGhpcy0+X3R5cGVfTWFwcGluZ3MpKTsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlOjp0eXBlX01hcHBpbmdzKHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIHYpew0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGU6Ol91bmlxdWUoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIlRvb2xfVHlwZTo6X3VuaXF1ZSgpOiAiOw0KDQogICAgVG9vbF9UeXBlKiByZXQgPSBuZXcgVG9vbF9UeXBlKCk7DQogICAgLy9pZih0aGlzLklkKSByZXQuSWQgPSB0aGlzLklkOw0KICAgIA0KICAgICAgICANCiAgICBpZih0aGlzLT5uYW1lKCkuZW1wdHkoKSkNCiAgICAgICAgDQogICAgICAgIHJldC0+bmFtZSh0aGlzLT5uYW1lKCkpOw0KICAgIA0KDQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGU6Ol9mcm9tRG9jdW1lbnQoc3RkOjpzdHJpbmcgb2JqKXsNCiAgICBqc29uIGRhdGEgPSBqc29uOjpwYXJzZShvYmopOw0KICAgIA0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGU6Ol90b0RvY3VtZW50KCl7DQogICAgcmV0dXJuICIiOw0KfQ0KDQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGU6OnN0b3JlKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJUb29sX1R5cGU6OnN0b3JlKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIit0aGlzTm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Ub29sX1R5cGUuc3RvcmUoKSIpLm1ldGhvZCgic3RvcmUiKS5jbGFzc05hbWUoIlRvb2xfVHlwZSIpLmNhcnJpZXIodGhpc05vZGUpLnNlbmRlcih0aGlzTm9kZSkucmVjaXBpZW50KHRoaXNOb2RlLnBhcmVudCgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlKiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlciE9bnVsbHB0cil7DQogICAgDQoNCiAgICANCiAgICAgICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgICAgICANCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAganNvbiBfalJldDsNCiAgICAgICAgX2pSZXRbIl9fdGhpcyJdID0gdGhpcy0+X3RvRG9jdW1lbnQoKTsNCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKF9qUmV0KTsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiB0aGlzLT5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgLy9fX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0Kc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGU+JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZTo6ZmluZEFsbCgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiVG9vbF9UeXBlOjpmaW5kQWxsKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIit0aGlzTm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Ub29sX1R5cGUuZmluZEFsbCgpIikubWV0aG9kKCJmaW5kQWxsIikuY2xhc3NOYW1lKCJUb29sX1R5cGUiKS5jYXJyaWVyKHRoaXNOb2RlKS5zZW5kZXIodGhpc05vZGUpLnJlY2lwaWVudCh0aGlzTm9kZS5wYXJlbnQoKSk7DQoNCiAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZT4qIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyLT5lbXB0eSgpKXsNCiAgICANCg0KICAgIA0KICAgICAgICANCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICAgICAgDQogICAgDQogICAgfWVsc2V7DQogICAgICAgIGpzb24gX2pSZXQ7DQogICAgICAgIF9qUmV0WyJfX3RoaXMiXSA9IHRoaXMtPl90b0RvY3VtZW50KCk7DQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChfalJldCk7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogdGhpcy0+X3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIC8vX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZTo6ZmluZCgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiVG9vbF9UeXBlOjpmaW5kKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIit0aGlzTm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Ub29sX1R5cGUuZmluZCgpIikubWV0aG9kKCJmaW5kIikuY2xhc3NOYW1lKCJUb29sX1R5cGUiKS5jYXJyaWVyKHRoaXNOb2RlKS5zZW5kZXIodGhpc05vZGUpLnJlY2lwaWVudCh0aGlzTm9kZS5wYXJlbnQoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZSogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICAgICAgDQogICAgDQogICAgfWVsc2V7DQogICAgICAgIGpzb24gX2pSZXQ7DQogICAgICAgIF9qUmV0WyJfX3RoaXMiXSA9IHRoaXMtPl90b0RvY3VtZW50KCk7DQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChfalJldCk7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogdGhpcy0+X3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIC8vX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCg0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50OjphY3RpdmUoYm9vbCB2KXsNCiAgICB0aGlzLT5fYWN0aXZlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmJvb2wgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6YWN0aXZlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9hY3RpdmU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQ6OmVuYWJsZWQoYm9vbCB2KXsNCiAgICB0aGlzLT5fZW5hYmxlZCA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQ6OmVuYWJsZWQoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2VuYWJsZWQ7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQ6OmNvZGUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X2NvZGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6Y29kZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fY29kZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6b3JkZXIoaW50IHYpew0KICAgIHRoaXMtPl9vcmRlciA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQppbnQgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6b3JkZXIoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X29yZGVyOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50OjpkYXRlKHRpbWVfdCB2KXsNCiAgICB0aGlzLT5fZGF0ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQp0aW1lX3QgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6ZGF0ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fZGF0ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6bmFtZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fbmFtZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50OjpuYW1lKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9uYW1lOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50OjpyZW1hcmsoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X3JlbWFyayA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6cmVtYXJrKGpzb24gdil7DQogICAgLy90aGlzLT5fcmVtYXJrDQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50OjpyZW1hcmsoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3JlbWFyazsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6Y2xhc3NOYW1lKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9jbGFzc05hbWUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6Y2xhc3NOYW1lKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9jbGFzc05hbWU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQ6Om1ldGhvZChzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fbWV0aG9kID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQ6Om1ldGhvZCgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fbWV0aG9kOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50OjpwYXlsb2FkKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9wYXlsb2FkID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50OjpwYXlsb2FkKGpzb24gdil7DQogICAgLy90aGlzLT5fcGF5bG9hZA0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6cGF5bG9hZCgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fcGF5bG9hZDsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6Y2Fycmllcihlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIHYpew0KICAgIHRoaXMtPl9jYXJyaWVyID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6Y2Fycmllcihlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUqIHYpew0KICAgIHRoaXMtPl9jYXJyaWVyID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUqIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQ6OmNhcnJpZXIoKXsNCiAgICANCiAgICByZXR1cm4gKih0aGlzLT5fY2Fycmllcik7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQ6OnNlbmRlcihlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIHYpew0KICAgIHRoaXMtPl9zZW5kZXIgPSAmdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50OjpzZW5kZXIoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlKiB2KXsNCiAgICB0aGlzLT5fc2VuZGVyID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUqIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQ6OnNlbmRlcigpew0KICAgIA0KICAgIHJldHVybiAqKHRoaXMtPl9zZW5kZXIpOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50OjpyZWNpcGllbnQoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiB2KXsNCiAgICB0aGlzLT5fcmVjaXBpZW50ID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6cmVjaXBpZW50KGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSogdil7DQogICAgdGhpcy0+X3JlY2lwaWVudCA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlKiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50OjpyZWNpcGllbnQoKXsNCiAgICANCiAgICByZXR1cm4gKih0aGlzLT5fcmVjaXBpZW50KTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6cmVzcG9uc2VUbyhlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50JiB2KXsNCiAgICB0aGlzLT5fcmVzcG9uc2VUbyA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQ6OnJlc3BvbnNlVG8oZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCogdil7DQogICAgdGhpcy0+X3Jlc3BvbnNlVG8gPSAmdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQqIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQ6OnJlc3BvbnNlVG8oKXsNCiAgICANCiAgICByZXR1cm4gKih0aGlzLT5fcmVzcG9uc2VUbyk7DQogICAgDQp9DQogICAgDQoNCiAgICANCnN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQ6OnJlc3BvbnNlVG9fRXZlbnRzKCl7DQogICAgcmV0dXJuIG1vdmUoKih0aGlzLT5fcmVzcG9uc2VUb19FdmVudHMpKTsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6cmVzcG9uc2VUb19FdmVudHMoc3RkOjp2ZWN0b3I8c3RkOjphbnk+JiYgdil7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQ6Ol91bmlxdWUoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIkV2ZW50OjpfdW5pcXVlKCk6ICI7DQoNCiAgICBFdmVudCogcmV0ID0gbmV3IEV2ZW50KCk7DQogICAgLy9pZih0aGlzLklkKSByZXQuSWQgPSB0aGlzLklkOw0KICAgIA0KICAgICAgICANCiAgICBpZih0aGlzLT5jb2RlKCkuZW1wdHkoKSkNCiAgICAgICAgDQogICAgICAgIHJldC0+Y29kZSh0aGlzLT5jb2RlKCkpOw0KICAgIA0KDQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50OjpfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iail7DQogICAganNvbiBkYXRhID0ganNvbjo6cGFyc2Uob2JqKTsNCiAgICANCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQ6Ol90b0RvY3VtZW50KCl7DQogICAgcmV0dXJuICIiOw0KfQ0KDQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50OjpzdG9yZSgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiRXZlbnQ6OnN0b3JlKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIit0aGlzTm9kZS5jb2RlKCkrIkB0aW1lIisiXS5FdmVudC5zdG9yZSgpIikubWV0aG9kKCJzdG9yZSIpLmNsYXNzTmFtZSgiRXZlbnQiKS5jYXJyaWVyKHRoaXNOb2RlKS5zZW5kZXIodGhpc05vZGUpLnJlY2lwaWVudCh0aGlzTm9kZS5wYXJlbnQoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlciE9bnVsbHB0cil7DQogICAgDQoNCiAgICANCiAgICAgICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgICAgICANCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAganNvbiBfalJldDsNCiAgICAgICAgX2pSZXRbIl9fdGhpcyJdID0gdGhpcy0+X3RvRG9jdW1lbnQoKTsNCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKF9qUmV0KTsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiB0aGlzLT5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgLy9fX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0Kc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudD4mIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQ6OmZpbmRBbGwoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIkV2ZW50OjpmaW5kQWxsKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIit0aGlzTm9kZS5jb2RlKCkrIkB0aW1lIisiXS5FdmVudC5maW5kQWxsKCkiKS5tZXRob2QoImZpbmRBbGwiKS5jbGFzc05hbWUoIkV2ZW50IikuY2Fycmllcih0aGlzTm9kZSkuc2VuZGVyKHRoaXNOb2RlKS5yZWNpcGllbnQodGhpc05vZGUucGFyZW50KCkpOw0KDQogICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudD4qIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyLT5lbXB0eSgpKXsNCiAgICANCg0KICAgIA0KICAgICAgICANCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICAgICAgDQogICAgDQogICAgfWVsc2V7DQogICAgICAgIGpzb24gX2pSZXQ7DQogICAgICAgIF9qUmV0WyJfX3RoaXMiXSA9IHRoaXMtPl90b0RvY3VtZW50KCk7DQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChfalJldCk7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogdGhpcy0+X3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIC8vX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQ6OmZpbmQoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIkV2ZW50OjpmaW5kKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIit0aGlzTm9kZS5jb2RlKCkrIkB0aW1lIisiXS5FdmVudC5maW5kKCkiKS5tZXRob2QoImZpbmQiKS5jbGFzc05hbWUoIkV2ZW50IikuY2Fycmllcih0aGlzTm9kZSkuc2VuZGVyKHRoaXNOb2RlKS5yZWNpcGllbnQodGhpc05vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICAgICAgDQogICAgDQogICAgfWVsc2V7DQogICAgICAgIGpzb24gX2pSZXQ7DQogICAgICAgIF9qUmV0WyJfX3RoaXMiXSA9IHRoaXMtPl90b0RvY3VtZW50KCk7DQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChfalJldCk7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogdGhpcy0+X3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIC8vX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCmpzb24gZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6bGlzdGVuKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgbm9kZSl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJFdmVudDo6bGlzdGVuKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIit0aGlzTm9kZS5jb2RlKCkrIkB0aW1lIisiXS5FdmVudC5saXN0ZW4oKSIpLm1ldGhvZCgibGlzdGVuIikuY2xhc3NOYW1lKCJFdmVudCIpLmNhcnJpZXIodGhpc05vZGUpLnNlbmRlcih0aGlzTm9kZSkucmVjaXBpZW50KHRoaXNOb2RlLnBhcmVudCgpKTsNCg0KICAgIGpzb24gYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKChzdGQ6OnN0cmluZylhbnN3ZXIpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICBqc29uIF9qUmV0Ow0KICAgICAgICBfalJldFsiX190aGlzIl0gPSB0aGlzLT5fdG9Eb2N1bWVudCgpOw0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoX2pSZXQpOw0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHRoaXMtPl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICAvL19fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuIGFuc3dlcjsNCn0NCiAgICANCmpzb24gZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6dHJpZ2dlcigpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiRXZlbnQ6OnRyaWdnZXIoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK3RoaXNOb2RlLmNvZGUoKSsiQHRpbWUiKyJdLkV2ZW50LnRyaWdnZXIoKSIpLm1ldGhvZCgidHJpZ2dlciIpLmNsYXNzTmFtZSgiRXZlbnQiKS5jYXJyaWVyKHRoaXNOb2RlKS5zZW5kZXIodGhpc05vZGUpLnJlY2lwaWVudCh0aGlzTm9kZS5wYXJlbnQoKSk7DQoNCiAgICBqc29uIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCgoc3RkOjpzdHJpbmcpYW5zd2VyKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAganNvbiBfalJldDsNCiAgICAgICAgX2pSZXRbIl9fdGhpcyJdID0gdGhpcy0+X3RvRG9jdW1lbnQoKTsNCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKF9qUmV0KTsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiB0aGlzLT5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgLy9fX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiBhbnN3ZXI7DQp9DQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50Ojpwcm9jZXNzKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJFdmVudDo6cHJvY2VzcygpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uRXZlbnQucHJvY2VzcygpIikubWV0aG9kKCJwcm9jZXNzIikuY2xhc3NOYW1lKCJFdmVudCIpLmNhcnJpZXIodGhpc05vZGUpLnNlbmRlcih0aGlzTm9kZSkucmVjaXBpZW50KHRoaXNOb2RlLnBhcmVudCgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgICAgIA0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICBqc29uIF9qUmV0Ow0KICAgICAgICBfalJldFsiX190aGlzIl0gPSB0aGlzLT5fdG9Eb2N1bWVudCgpOw0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoX2pSZXQpOw0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHRoaXMtPl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICAvL19fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQoNCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OmFjdGl2ZShib29sIHYpew0KICAgIHRoaXMtPl9hY3RpdmUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KYm9vbCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OmFjdGl2ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fYWN0aXZlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZTo6ZW5hYmxlZChib29sIHYpew0KICAgIHRoaXMtPl9lbmFibGVkID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmJvb2wgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjplbmFibGVkKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9lbmFibGVkOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZTo6Y29kZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fY29kZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OmNvZGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2NvZGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpvcmRlcihpbnQgdil7DQogICAgdGhpcy0+X29yZGVyID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmludCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6Om9yZGVyKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9vcmRlcjsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OmRhdGUodGltZV90IHYpew0KICAgIHRoaXMtPl9kYXRlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnRpbWVfdCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OmRhdGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2RhdGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpuYW1lKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9uYW1lID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZTo6bmFtZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fbmFtZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OnJlbWFyayhzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fcmVtYXJrID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZTo6cmVtYXJrKGpzb24gdil7DQogICAgLy90aGlzLT5fcmVtYXJrDQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OnJlbWFyaygpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fcmVtYXJrOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZTo6YWRkcmVzcyhzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fYWRkcmVzcyA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OmFkZHJlc3MoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2FkZHJlc3M7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpiYWNrdXAoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiB2KXsNCiAgICB0aGlzLT5fYmFja3VwID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OmJhY2t1cChlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUqIHYpew0KICAgIHRoaXMtPl9iYWNrdXAgPSAmdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSogZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpiYWNrdXAoKXsNCiAgICANCiAgICByZXR1cm4gKih0aGlzLT5fYmFja3VwKTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OnBhcmVudChlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIHYpew0KICAgIHRoaXMtPl9wYXJlbnQgPSAmdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZTo6cGFyZW50KGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSogdil7DQogICAgdGhpcy0+X3BhcmVudCA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlKiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OnBhcmVudCgpew0KICAgIA0KICAgIHJldHVybiAqKHRoaXMtPl9wYXJlbnQpOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZTo6Z3JvdXAoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwJiB2KXsNCiAgICB0aGlzLT5fZ3JvdXAgPSAmdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZTo6Z3JvdXAoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwKiB2KXsNCiAgICB0aGlzLT5fZ3JvdXAgPSAmdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cCogZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpncm91cCgpew0KICAgIA0KICAgIHJldHVybiAqKHRoaXMtPl9ncm91cCk7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpjb250ZXh0KGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Db250ZXh0JiB2KXsNCiAgICB0aGlzLT5fY29udGV4dCA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpjb250ZXh0KGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Db250ZXh0KiB2KXsNCiAgICB0aGlzLT5fY29udGV4dCA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQqIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZTo6Y29udGV4dCgpew0KICAgIA0KICAgIHJldHVybiAqKHRoaXMtPl9jb250ZXh0KTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OnBvcnQoaW50IHYpew0KICAgIHRoaXMtPl9wb3J0ID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmludCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OnBvcnQoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3BvcnQ7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpvbmxpbmUodGltZV90IHYpew0KICAgIHRoaXMtPl9vbmxpbmUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KdGltZV90IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZTo6b25saW5lKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9vbmxpbmU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpzZWN1cmUoYm9vbCB2KXsNCiAgICB0aGlzLT5fc2VjdXJlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmJvb2wgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpzZWN1cmUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3NlY3VyZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OnR5cGUoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGUmIHYpew0KICAgIHRoaXMtPl90eXBlID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OnR5cGUoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGUqIHYpew0KICAgIHRoaXMtPl90eXBlID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZSogZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjp0eXBlKCl7DQogICAgDQogICAgcmV0dXJuICoodGhpcy0+X3R5cGUpOw0KICAgIA0KfQ0KICAgIA0KDQogICAgDQpzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OmNvbnRyb2xsZXJfRGV2aWNlcygpew0KICAgIHJldHVybiBtb3ZlKCoodGhpcy0+X2NvbnRyb2xsZXJfRGV2aWNlcykpOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZTo6Y29udHJvbGxlcl9EZXZpY2VzKHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIHYpew0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCnN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZTo6bm9kZV9Db25maWdzKCl7DQogICAgcmV0dXJuIG1vdmUoKih0aGlzLT5fbm9kZV9Db25maWdzKSk7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpub2RlX0NvbmZpZ3Moc3RkOjp2ZWN0b3I8c3RkOjphbnk+JiYgdil7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0Kc3RkOjp2ZWN0b3I8c3RkOjphbnk+JiYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpjYXJyaWVyX0V2ZW50cygpew0KICAgIHJldHVybiBtb3ZlKCoodGhpcy0+X2NhcnJpZXJfRXZlbnRzKSk7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpjYXJyaWVyX0V2ZW50cyhzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiB2KXsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQpzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OnNlbmRlcl9FdmVudHMoKXsNCiAgICByZXR1cm4gbW92ZSgqKHRoaXMtPl9zZW5kZXJfRXZlbnRzKSk7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpzZW5kZXJfRXZlbnRzKHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIHYpew0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCnN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZTo6cmVjaXBpZW50X0V2ZW50cygpew0KICAgIHJldHVybiBtb3ZlKCoodGhpcy0+X3JlY2lwaWVudF9FdmVudHMpKTsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OnJlY2lwaWVudF9FdmVudHMoc3RkOjp2ZWN0b3I8c3RkOjphbnk+JiYgdil7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0Kc3RkOjp2ZWN0b3I8c3RkOjphbnk+JiYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpiYWNrdXBfTm9kZXMoKXsNCiAgICByZXR1cm4gbW92ZSgqKHRoaXMtPl9iYWNrdXBfTm9kZXMpKTsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OmJhY2t1cF9Ob2RlcyhzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiB2KXsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQpzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OnBhcmVudF9Ob2Rlcygpew0KICAgIHJldHVybiBtb3ZlKCoodGhpcy0+X3BhcmVudF9Ob2RlcykpOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZTo6cGFyZW50X05vZGVzKHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIHYpew0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZTo6X3VuaXF1ZSgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiTm9kZTo6X3VuaXF1ZSgpOiAiOw0KDQogICAgTm9kZSogcmV0ID0gbmV3IE5vZGUoKTsNCiAgICAvL2lmKHRoaXMuSWQpIHJldC5JZCA9IHRoaXMuSWQ7DQogICAgDQogICAgICAgIA0KICAgIGlmKHRoaXMtPmNvZGUoKS5lbXB0eSgpKQ0KICAgICAgICANCiAgICAgICAgcmV0LT5jb2RlKHRoaXMtPmNvZGUoKSk7DQogICAgDQoNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iail7DQogICAganNvbiBkYXRhID0ganNvbjo6cGFyc2Uob2JqKTsNCiAgICANCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZTo6X3RvRG9jdW1lbnQoKXsNCiAgICByZXR1cm4gIiI7DQp9DQoNCiAgICANCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpzdG9yZSgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiTm9kZTo6c3RvcmUoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK3RoaXNOb2RlLmNvZGUoKSsiQHRpbWUiKyJdLk5vZGUuc3RvcmUoKSIpLm1ldGhvZCgic3RvcmUiKS5jbGFzc05hbWUoIk5vZGUiKS5jYXJyaWVyKHRoaXNOb2RlKS5zZW5kZXIodGhpc05vZGUpLnJlY2lwaWVudCh0aGlzTm9kZS5wYXJlbnQoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgICAgIA0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICBqc29uIF9qUmV0Ow0KICAgICAgICBfalJldFsiX190aGlzIl0gPSB0aGlzLT5fdG9Eb2N1bWVudCgpOw0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoX2pSZXQpOw0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHRoaXMtPl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICAvL19fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQpzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU+JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OmZpbmRBbGwoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIk5vZGU6OmZpbmRBbGwoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK3RoaXNOb2RlLmNvZGUoKSsiQHRpbWUiKyJdLk5vZGUuZmluZEFsbCgpIikubWV0aG9kKCJmaW5kQWxsIikuY2xhc3NOYW1lKCJOb2RlIikuY2Fycmllcih0aGlzTm9kZSkuc2VuZGVyKHRoaXNOb2RlKS5yZWNpcGllbnQodGhpc05vZGUucGFyZW50KCkpOw0KDQogICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlPiogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXItPmVtcHR5KCkpew0KICAgIA0KDQogICAgDQogICAgICAgIA0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgICAgICANCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAganNvbiBfalJldDsNCiAgICAgICAgX2pSZXRbIl9fdGhpcyJdID0gdGhpcy0+X3RvRG9jdW1lbnQoKTsNCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKF9qUmV0KTsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiB0aGlzLT5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgLy9fX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OmZpbmQoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIk5vZGU6OmZpbmQoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK3RoaXNOb2RlLmNvZGUoKSsiQHRpbWUiKyJdLk5vZGUuZmluZCgpIikubWV0aG9kKCJmaW5kIikuY2xhc3NOYW1lKCJOb2RlIikuY2Fycmllcih0aGlzTm9kZSkuc2VuZGVyKHRoaXNOb2RlKS5yZWNpcGllbnQodGhpc05vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlKiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlciE9bnVsbHB0cil7DQogICAgDQoNCiAgICANCiAgICAgICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgICAgICANCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAganNvbiBfalJldDsNCiAgICAgICAgX2pSZXRbIl9fdGhpcyJdID0gdGhpcy0+X3RvRG9jdW1lbnQoKTsNCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKF9qUmV0KTsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiB0aGlzLT5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgLy9fX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KanNvbiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OmF1dGhDb2RlKHN0ZDo6c3RyaW5nIGNvZGUsIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbCYgdG9vbCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJOb2RlOjphdXRoQ29kZSgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uTm9kZS5hdXRoQ29kZSgpIikubWV0aG9kKCJhdXRoQ29kZSIpLmNsYXNzTmFtZSgiTm9kZSIpLmNhcnJpZXIodGhpc05vZGUpLnNlbmRlcih0aGlzTm9kZSkucmVjaXBpZW50KHRoaXNOb2RlLnBhcmVudCgpKTsNCg0KICAgIGpzb24gYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKChzdGQ6OnN0cmluZylhbnN3ZXIpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICBqc29uIF9qUmV0Ow0KICAgICAgICBfalJldFsiX190aGlzIl0gPSB0aGlzLT5fdG9Eb2N1bWVudCgpOw0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoX2pSZXQpOw0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHRoaXMtPl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICAvL19fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuIGFuc3dlcjsNCn0NCiAgICANCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjppbml0KGludCBvbmxpbmUsIHN0ZDo6c3RyaW5nIGNvZGUsIHN0ZDo6c3RyaW5nIHVpZCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJOb2RlOjppbml0KCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIit0aGlzTm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Ob2RlLmluaXQoKSIpLm1ldGhvZCgiaW5pdCIpLmNsYXNzTmFtZSgiTm9kZSIpLmNhcnJpZXIodGhpc05vZGUpLnNlbmRlcih0aGlzTm9kZSkucmVjaXBpZW50KHRoaXNOb2RlLnBhcmVudCgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICAgICAgDQogICAgDQogICAgfWVsc2V7DQogICAgICAgIGpzb24gX2pSZXQ7DQogICAgICAgIF9qUmV0WyJfX3RoaXMiXSA9IHRoaXMtPl90b0RvY3VtZW50KCk7DQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChfalJldCk7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogdGhpcy0+X3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIC8vX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCg0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQ6OmFjdGl2ZShib29sIHYpew0KICAgIHRoaXMtPl9hY3RpdmUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KYm9vbCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dDo6YWN0aXZlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9hY3RpdmU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Db250ZXh0JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dDo6ZW5hYmxlZChib29sIHYpew0KICAgIHRoaXMtPl9lbmFibGVkID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmJvb2wgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQ6OmVuYWJsZWQoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2VuYWJsZWQ7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Db250ZXh0JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dDo6Y29kZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fY29kZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dDo6Y29kZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fY29kZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Db250ZXh0OjpvcmRlcihpbnQgdil7DQogICAgdGhpcy0+X29yZGVyID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmludCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dDo6b3JkZXIoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X29yZGVyOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQ6OmRhdGUodGltZV90IHYpew0KICAgIHRoaXMtPl9kYXRlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnRpbWVfdCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dDo6ZGF0ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fZGF0ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Db250ZXh0OjpuYW1lKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9uYW1lID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Db250ZXh0OjpuYW1lKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9uYW1lOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQ6OnJlbWFyayhzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fcmVtYXJrID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQ6OnJlbWFyayhqc29uIHYpew0KICAgIC8vdGhpcy0+X3JlbWFyaw0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQ6OnJlbWFyaygpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fcmVtYXJrOw0KICAgIA0KfQ0KICAgIA0KDQogICAgDQpzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dDo6Y29udGV4dF9Ob2Rlcygpew0KICAgIHJldHVybiBtb3ZlKCoodGhpcy0+X2NvbnRleHRfTm9kZXMpKTsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Db250ZXh0Ojpjb250ZXh0X05vZGVzKHN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIHYpew0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQ6Ol91bmlxdWUoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIk5vZGVfQ29udGV4dDo6X3VuaXF1ZSgpOiAiOw0KDQogICAgTm9kZV9Db250ZXh0KiByZXQgPSBuZXcgTm9kZV9Db250ZXh0KCk7DQogICAgLy9pZih0aGlzLklkKSByZXQuSWQgPSB0aGlzLklkOw0KICAgIA0KICAgICAgICANCiAgICBpZih0aGlzLT5jb2RlKCkuZW1wdHkoKSkNCiAgICAgICAgDQogICAgICAgIHJldC0+Y29kZSh0aGlzLT5jb2RlKCkpOw0KICAgIA0KDQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQ6Ol9mcm9tRG9jdW1lbnQoc3RkOjpzdHJpbmcgb2JqKXsNCiAgICBqc29uIGRhdGEgPSBqc29uOjpwYXJzZShvYmopOw0KICAgIA0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQ6Ol90b0RvY3VtZW50KCl7DQogICAgcmV0dXJuICIiOw0KfQ0KDQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQ6OnN0b3JlKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJOb2RlX0NvbnRleHQ6OnN0b3JlKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIit0aGlzTm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Ob2RlX0NvbnRleHQuc3RvcmUoKSIpLm1ldGhvZCgic3RvcmUiKS5jbGFzc05hbWUoIk5vZGVfQ29udGV4dCIpLmNhcnJpZXIodGhpc05vZGUpLnNlbmRlcih0aGlzTm9kZSkucmVjaXBpZW50KHRoaXNOb2RlLnBhcmVudCgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Db250ZXh0KiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlciE9bnVsbHB0cil7DQogICAgDQoNCiAgICANCiAgICAgICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgICAgICANCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAganNvbiBfalJldDsNCiAgICAgICAgX2pSZXRbIl9fdGhpcyJdID0gdGhpcy0+X3RvRG9jdW1lbnQoKTsNCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKF9qUmV0KTsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiB0aGlzLT5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgLy9fX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0Kc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQ+JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dDo6ZmluZEFsbCgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiTm9kZV9Db250ZXh0OjpmaW5kQWxsKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIit0aGlzTm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Ob2RlX0NvbnRleHQuZmluZEFsbCgpIikubWV0aG9kKCJmaW5kQWxsIikuY2xhc3NOYW1lKCJOb2RlX0NvbnRleHQiKS5jYXJyaWVyKHRoaXNOb2RlKS5zZW5kZXIodGhpc05vZGUpLnJlY2lwaWVudCh0aGlzTm9kZS5wYXJlbnQoKSk7DQoNCiAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dD4qIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyLT5lbXB0eSgpKXsNCiAgICANCg0KICAgIA0KICAgICAgICANCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICAgICAgDQogICAgDQogICAgfWVsc2V7DQogICAgICAgIGpzb24gX2pSZXQ7DQogICAgICAgIF9qUmV0WyJfX3RoaXMiXSA9IHRoaXMtPl90b0RvY3VtZW50KCk7DQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChfalJldCk7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogdGhpcy0+X3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIC8vX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Db250ZXh0JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dDo6ZmluZCgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiTm9kZV9Db250ZXh0OjpmaW5kKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIit0aGlzTm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Ob2RlX0NvbnRleHQuZmluZCgpIikubWV0aG9kKCJmaW5kIikuY2xhc3NOYW1lKCJOb2RlX0NvbnRleHQiKS5jYXJyaWVyKHRoaXNOb2RlKS5zZW5kZXIodGhpc05vZGUpLnJlY2lwaWVudCh0aGlzTm9kZS5wYXJlbnQoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dCogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICAgICAgDQogICAgDQogICAgfWVsc2V7DQogICAgICAgIGpzb24gX2pSZXQ7DQogICAgICAgIF9qUmV0WyJfX3RoaXMiXSA9IHRoaXMtPl90b0RvY3VtZW50KCk7DQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChfalJldCk7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogdGhpcy0+X3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIC8vX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCg0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cDo6YWN0aXZlKGJvb2wgdil7DQogICAgdGhpcy0+X2FjdGl2ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cDo6YWN0aXZlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9hY3RpdmU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwOjplbmFibGVkKGJvb2wgdil7DQogICAgdGhpcy0+X2VuYWJsZWQgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KYm9vbCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXA6OmVuYWJsZWQoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2VuYWJsZWQ7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwOjpjb2RlKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9jb2RlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cDo6Y29kZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fY29kZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXA6Om9yZGVyKGludCB2KXsNCiAgICB0aGlzLT5fb3JkZXIgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KaW50IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cDo6b3JkZXIoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X29yZGVyOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cDo6ZGF0ZSh0aW1lX3Qgdil7DQogICAgdGhpcy0+X2RhdGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KdGltZV90IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cDo6ZGF0ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fZGF0ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXA6Om5hbWUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X25hbWUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwOjpuYW1lKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9uYW1lOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cDo6cmVtYXJrKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9yZW1hcmsgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwOjpyZW1hcmsoanNvbiB2KXsNCiAgICAvL3RoaXMtPl9yZW1hcmsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cDo6cmVtYXJrKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9yZW1hcms7DQogICAgDQp9DQogICAgDQoNCiAgICANCnN0ZDo6dmVjdG9yPHN0ZDo6YW55PiYmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cDo6Z3JvdXBfTm9kZXMoKXsNCiAgICByZXR1cm4gbW92ZSgqKHRoaXMtPl9ncm91cF9Ob2RlcykpOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cDo6Z3JvdXBfTm9kZXMoc3RkOjp2ZWN0b3I8c3RkOjphbnk+JiYgdil7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwOjpfdW5pcXVlKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJOb2RlX0dyb3VwOjpfdW5pcXVlKCk6ICI7DQoNCiAgICBOb2RlX0dyb3VwKiByZXQgPSBuZXcgTm9kZV9Hcm91cCgpOw0KICAgIC8vaWYodGhpcy5JZCkgcmV0LklkID0gdGhpcy5JZDsNCiAgICANCiAgICAgICAgDQogICAgaWYodGhpcy0+bmFtZSgpLmVtcHR5KCkpDQogICAgICAgIA0KICAgICAgICByZXQtPm5hbWUodGhpcy0+bmFtZSgpKTsNCiAgICANCg0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXA6Ol9mcm9tRG9jdW1lbnQoc3RkOjpzdHJpbmcgb2JqKXsNCiAgICBqc29uIGRhdGEgPSBqc29uOjpwYXJzZShvYmopOw0KICAgIA0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwOjpfdG9Eb2N1bWVudCgpew0KICAgIHJldHVybiAiIjsNCn0NCg0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXA6OnN0b3JlKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJOb2RlX0dyb3VwOjpzdG9yZSgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uTm9kZV9Hcm91cC5zdG9yZSgpIikubWV0aG9kKCJzdG9yZSIpLmNsYXNzTmFtZSgiTm9kZV9Hcm91cCIpLmNhcnJpZXIodGhpc05vZGUpLnNlbmRlcih0aGlzTm9kZSkucmVjaXBpZW50KHRoaXNOb2RlLnBhcmVudCgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cCogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICAgICAgDQogICAgDQogICAgfWVsc2V7DQogICAgICAgIGpzb24gX2pSZXQ7DQogICAgICAgIF9qUmV0WyJfX3RoaXMiXSA9IHRoaXMtPl90b0RvY3VtZW50KCk7DQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChfalJldCk7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogdGhpcy0+X3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIC8vX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCnN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cD4mIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cDo6ZmluZEFsbCgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiTm9kZV9Hcm91cDo6ZmluZEFsbCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uTm9kZV9Hcm91cC5maW5kQWxsKCkiKS5tZXRob2QoImZpbmRBbGwiKS5jbGFzc05hbWUoIk5vZGVfR3JvdXAiKS5jYXJyaWVyKHRoaXNOb2RlKS5zZW5kZXIodGhpc05vZGUpLnJlY2lwaWVudCh0aGlzTm9kZS5wYXJlbnQoKSk7DQoNCiAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXA+KiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlci0+ZW1wdHkoKSl7DQogICAgDQoNCiAgICANCiAgICAgICAgDQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgICAgIA0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICBqc29uIF9qUmV0Ow0KICAgICAgICBfalJldFsiX190aGlzIl0gPSB0aGlzLT5fdG9Eb2N1bWVudCgpOw0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoX2pSZXQpOw0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHRoaXMtPl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICAvL19fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cDo6ZmluZCgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiTm9kZV9Hcm91cDo6ZmluZCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uTm9kZV9Hcm91cC5maW5kKCkiKS5tZXRob2QoImZpbmQiKS5jbGFzc05hbWUoIk5vZGVfR3JvdXAiKS5jYXJyaWVyKHRoaXNOb2RlKS5zZW5kZXIodGhpc05vZGUpLnJlY2lwaWVudCh0aGlzTm9kZS5wYXJlbnQoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXAqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgICAgIA0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICBqc29uIF9qUmV0Ow0KICAgICAgICBfalJldFsiX190aGlzIl0gPSB0aGlzLT5fdG9Eb2N1bWVudCgpOw0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoX2pSZXQpOw0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHRoaXMtPl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICAvL19fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQoNCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlOjphY3RpdmUoYm9vbCB2KXsNCiAgICB0aGlzLT5fYWN0aXZlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmJvb2wgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGU6OmFjdGl2ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fYWN0aXZlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGU6OmVuYWJsZWQoYm9vbCB2KXsNCiAgICB0aGlzLT5fZW5hYmxlZCA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlOjplbmFibGVkKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9lbmFibGVkOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGU6OmNvZGUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X2NvZGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGU6OmNvZGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2NvZGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZTo6b3JkZXIoaW50IHYpew0KICAgIHRoaXMtPl9vcmRlciA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQppbnQgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGU6Om9yZGVyKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9vcmRlcjsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlOjpkYXRlKHRpbWVfdCB2KXsNCiAgICB0aGlzLT5fZGF0ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQp0aW1lX3QgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGU6OmRhdGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2RhdGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZTo6bmFtZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fbmFtZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZTo6bmFtZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fbmFtZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlOjpyZW1hcmsoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X3JlbWFyayA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlOjpyZW1hcmsoanNvbiB2KXsNCiAgICAvL3RoaXMtPl9yZW1hcmsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlOjpyZW1hcmsoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3JlbWFyazsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlOjpkeW5hbWljKGJvb2wgdil7DQogICAgdGhpcy0+X2R5bmFtaWMgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KYm9vbCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZTo6ZHluYW1pYygpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fZHluYW1pYzsNCiAgICANCn0NCiAgICANCg0KICAgIA0Kc3RkOjp2ZWN0b3I8c3RkOjphbnk+JiYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGU6OnR5cGVfTm9kZXMoKXsNCiAgICByZXR1cm4gbW92ZSgqKHRoaXMtPl90eXBlX05vZGVzKSk7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZTo6dHlwZV9Ob2RlcyhzdGQ6OnZlY3RvcjxzdGQ6OmFueT4mJiB2KXsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlOjpfdW5pcXVlKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJOb2RlX1R5cGU6Ol91bmlxdWUoKTogIjsNCg0KICAgIE5vZGVfVHlwZSogcmV0ID0gbmV3IE5vZGVfVHlwZSgpOw0KICAgIC8vaWYodGhpcy5JZCkgcmV0LklkID0gdGhpcy5JZDsNCiAgICANCiAgICAgICAgDQogICAgaWYodGhpcy0+bmFtZSgpLmVtcHR5KCkpDQogICAgICAgIA0KICAgICAgICByZXQtPm5hbWUodGhpcy0+bmFtZSgpKTsNCiAgICANCg0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlOjpfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iail7DQogICAganNvbiBkYXRhID0ganNvbjo6cGFyc2Uob2JqKTsNCiAgICANCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlOjpfdG9Eb2N1bWVudCgpew0KICAgIHJldHVybiAiIjsNCn0NCg0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlOjpzdG9yZSgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiTm9kZV9UeXBlOjpzdG9yZSgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uTm9kZV9UeXBlLnN0b3JlKCkiKS5tZXRob2QoInN0b3JlIikuY2xhc3NOYW1lKCJOb2RlX1R5cGUiKS5jYXJyaWVyKHRoaXNOb2RlKS5zZW5kZXIodGhpc05vZGUpLnJlY2lwaWVudCh0aGlzTm9kZS5wYXJlbnQoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZSogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICAgICAgDQogICAgDQogICAgfWVsc2V7DQogICAgICAgIGpzb24gX2pSZXQ7DQogICAgICAgIF9qUmV0WyJfX3RoaXMiXSA9IHRoaXMtPl90b0RvY3VtZW50KCk7DQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChfalJldCk7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogdGhpcy0+X3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIC8vX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCnN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlPiYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGU6OmZpbmRBbGwoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIk5vZGVfVHlwZTo6ZmluZEFsbCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uTm9kZV9UeXBlLmZpbmRBbGwoKSIpLm1ldGhvZCgiZmluZEFsbCIpLmNsYXNzTmFtZSgiTm9kZV9UeXBlIikuY2Fycmllcih0aGlzTm9kZSkuc2VuZGVyKHRoaXNOb2RlKS5yZWNpcGllbnQodGhpc05vZGUucGFyZW50KCkpOw0KDQogICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGU+KiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlci0+ZW1wdHkoKSl7DQogICAgDQoNCiAgICANCiAgICAgICAgDQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgICAgIA0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICBqc29uIF9qUmV0Ow0KICAgICAgICBfalJldFsiX190aGlzIl0gPSB0aGlzLT5fdG9Eb2N1bWVudCgpOw0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoX2pSZXQpOw0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHRoaXMtPl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICAvL19fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGU6OmZpbmQoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIk5vZGVfVHlwZTo6ZmluZCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrdGhpc05vZGUuY29kZSgpKyJAdGltZSIrIl0uTm9kZV9UeXBlLmZpbmQoKSIpLm1ldGhvZCgiZmluZCIpLmNsYXNzTmFtZSgiTm9kZV9UeXBlIikuY2Fycmllcih0aGlzTm9kZSkuc2VuZGVyKHRoaXNOb2RlKS5yZWNpcGllbnQodGhpc05vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGUqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgICAgIA0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICBqc29uIF9qUmV0Ow0KICAgICAgICBfalJldFsiX190aGlzIl0gPSB0aGlzLT5fdG9Eb2N1bWVudCgpOw0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoX2pSZXQpOw0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHRoaXMtPl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICAvL19fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQoNCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmc6OmFjdGl2ZShib29sIHYpew0KICAgIHRoaXMtPl9hY3RpdmUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KYm9vbCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmc6OmFjdGl2ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fYWN0aXZlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZzo6ZW5hYmxlZChib29sIHYpew0KICAgIHRoaXMtPl9lbmFibGVkID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmJvb2wgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nOjplbmFibGVkKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9lbmFibGVkOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZzo6b3JkZXIoaW50IHYpew0KICAgIHRoaXMtPl9vcmRlciA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQppbnQgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nOjpvcmRlcigpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fb3JkZXI7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nOjpjbGFzc05hbWUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X2NsYXNzTmFtZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmc6OmNsYXNzTmFtZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fY2xhc3NOYW1lOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZzo6c2NvcGUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X3Njb3BlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZzo6c2NvcGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3Njb3BlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZzo6Y29udGV4dChzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fY29udGV4dCA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmc6OmNvbnRleHQoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2NvbnRleHQ7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nOjpzb3VyY2Uoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X3NvdXJjZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmc6OnNvdXJjZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fc291cmNlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZzo6dGFyZ2V0KHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl90YXJnZXQgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nOjp0YXJnZXQoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3RhcmdldDsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmc6OmluU2NyaXB0KHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9pblNjcmlwdCA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmc6OmluU2NyaXB0KGpzb24gdil7DQogICAgLy90aGlzLT5faW5TY3JpcHQNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZzo6aW5TY3JpcHQoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2luU2NyaXB0Ow0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZzo6b3V0U2NyaXB0KHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9vdXRTY3JpcHQgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nOjpvdXRTY3JpcHQoanNvbiB2KXsNCiAgICAvL3RoaXMtPl9vdXRTY3JpcHQNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZzo6b3V0U2NyaXB0KCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9vdXRTY3JpcHQ7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nOjp0b29sKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbCYgdil7DQogICAgdGhpcy0+X3Rvb2wgPSAmdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZzo6dG9vbChlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2wqIHYpew0KICAgIHRoaXMtPl90b29sID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2wqIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZzo6dG9vbCgpew0KICAgIA0KICAgIHJldHVybiAqKHRoaXMtPl90b29sKTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmc6Omdyb3VwKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwJiB2KXsNCiAgICB0aGlzLT5fZ3JvdXAgPSAmdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZzo6Z3JvdXAoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXAqIHYpew0KICAgIHRoaXMtPl9ncm91cCA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXAqIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZzo6Z3JvdXAoKXsNCiAgICANCiAgICByZXR1cm4gKih0aGlzLT5fZ3JvdXApOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZzo6dHlwZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZSYgdil7DQogICAgdGhpcy0+X3R5cGUgPSAmdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZzo6dHlwZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZSogdil7DQogICAgdGhpcy0+X3R5cGUgPSAmdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlKiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmc6OnR5cGUoKXsNCiAgICANCiAgICByZXR1cm4gKih0aGlzLT5fdHlwZSk7DQogICAgDQp9DQogICAgDQoNCiAgICANCg0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZzo6X3VuaXF1ZSgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiTWFwcGluZzo6X3VuaXF1ZSgpOiAiOw0KDQogICAgTWFwcGluZyogcmV0ID0gbmV3IE1hcHBpbmcoKTsNCiAgICAvL2lmKHRoaXMuSWQpIHJldC5JZCA9IHRoaXMuSWQ7DQogICAgDQoNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nOjpfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iail7DQogICAganNvbiBkYXRhID0ganNvbjo6cGFyc2Uob2JqKTsNCiAgICANCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZzo6X3RvRG9jdW1lbnQoKXsNCiAgICByZXR1cm4gIiI7DQp9DQoNCiAgICANCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nOjpzdG9yZSgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiTWFwcGluZzo6c3RvcmUoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK3RoaXNOb2RlLmNvZGUoKSsiQHRpbWUiKyJdLk1hcHBpbmcuc3RvcmUoKSIpLm1ldGhvZCgic3RvcmUiKS5jbGFzc05hbWUoIk1hcHBpbmciKS5jYXJyaWVyKHRoaXNOb2RlKS5zZW5kZXIodGhpc05vZGUpLnJlY2lwaWVudCh0aGlzTm9kZS5wYXJlbnQoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmcqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgICAgIA0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICBqc29uIF9qUmV0Ow0KICAgICAgICBfalJldFsiX190aGlzIl0gPSB0aGlzLT5fdG9Eb2N1bWVudCgpOw0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoX2pSZXQpOw0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHRoaXMtPl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICAvL19fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQpzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmc+JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmc6OmZpbmRBbGwoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIk1hcHBpbmc6OmZpbmRBbGwoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK3RoaXNOb2RlLmNvZGUoKSsiQHRpbWUiKyJdLk1hcHBpbmcuZmluZEFsbCgpIikubWV0aG9kKCJmaW5kQWxsIikuY2xhc3NOYW1lKCJNYXBwaW5nIikuY2Fycmllcih0aGlzTm9kZSkuc2VuZGVyKHRoaXNOb2RlKS5yZWNpcGllbnQodGhpc05vZGUucGFyZW50KCkpOw0KDQogICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nPiogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXItPmVtcHR5KCkpew0KICAgIA0KDQogICAgDQogICAgICAgIA0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgICAgICANCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAganNvbiBfalJldDsNCiAgICAgICAgX2pSZXRbIl9fdGhpcyJdID0gdGhpcy0+X3RvRG9jdW1lbnQoKTsNCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKF9qUmV0KTsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiB0aGlzLT5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgLy9fX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmc6OmZpbmQoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIk1hcHBpbmc6OmZpbmQoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK3RoaXNOb2RlLmNvZGUoKSsiQHRpbWUiKyJdLk1hcHBpbmcuZmluZCgpIikubWV0aG9kKCJmaW5kIikuY2xhc3NOYW1lKCJNYXBwaW5nIikuY2Fycmllcih0aGlzTm9kZSkuc2VuZGVyKHRoaXNOb2RlKS5yZWNpcGllbnQodGhpc05vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nKiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlciE9bnVsbHB0cil7DQogICAgDQoNCiAgICANCiAgICAgICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgICAgICANCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAganNvbiBfalJldDsNCiAgICAgICAgX2pSZXRbIl9fdGhpcyJdID0gdGhpcy0+X3RvRG9jdW1lbnQoKTsNCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKF9qUmV0KTsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiB0aGlzLT5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgLy9fX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KDQoNCmludCBtYWluKGludCBhcmdjLCBjaGFyKiBhcmd2W10pIHsNCg0KICAgIGNvbnN0IHN0ZDo6c3RyaW5nIFNFUlZFUl9BRERSRVNTKCJtcXR0Oi8vdGVzdC5tb3NxdWl0dG8ub3JnOjE4ODMiKTsNCiAgICBtcXR0Ojphc3luY19jbGllbnQgY2xpKFNFUlZFUl9BRERSRVNTLCAiIiwgbXF0dDo6Y3JlYXRlX29wdGlvbnMoTVFUVFZFUlNJT05fNSkpOw0KICAgIGNsaS5zZXRfbWVzc2FnZV9jYWxsYmFjayhbXShtcXR0Ojpjb25zdF9tZXNzYWdlX3B0ciBtc2cpIHsgKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5fZnJvbURvY3VtZW50KG1zZy5nZXRfcGF5bG9hZF9zdHIoKSkucHJvY2VzcygpOyB9KTsNCiAgICBhdXRvIHRvayA9IGNsaS5jb25uZWN0KG1xdHQ6OmNvbm5lY3Rfb3B0aW9uc19idWlsZGVyKCkNCgkJLnByb3BlcnRpZXMoew0KCQkJe21xdHQ6OnByb3BlcnR5OjpTRVNTSU9OX0VYUElSWV9JTlRFUlZBTCwgNjA0ODAwfQ0KCQl9KQ0KCQkuY2xlYW5fc3RhcnQoZmFsc2UpDQoJCS8vLndpbGwoc3RkOjptb3ZlKGx3dCkpDQoJCS5rZWVwX2FsaXZlX2ludGVydmFsKHN0ZDo6Y2hyb25vOjpzZWNvbmRzKDIwKSkNCgkJLmZpbmFsaXplKCkpOw0KICAgIHRvay53YWl0KCk7DQoNCiAgICByZXR1cm4gMDsNCn0=",
	"__keys": ["name"],
	"__trMap": []
}
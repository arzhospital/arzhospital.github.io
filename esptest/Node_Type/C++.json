{
	"Id": "6d4c703141f375343258e82ceb31719c3e39a8af",
	"active": "true",
	"enabled": "true",
	"code": "c++",
	"date": "2024-10-17T01:37:25.418Z",
	"name": "C++",
	"remark": "LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoqKioqKioqKioqKioqKioqKioqKiAgICAgICAgQVBJIFNlcnZlciBTdHViIGZvciBDKysgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioNCioqKioqKioqKioqKioqKioqKioqIFZFUlNJT046IDIwMjQtMTAtMTdUMDE6Mzc6MjIuOTM3WiAgKioqKioqKioqKioqKioqKioqKioNCioqKioqKioqKioqKioqKioqKioqICBTWVNURU06IGFwaXNlcnZlci9lc3B0ZXN0ICAgICAqKioqKioqKioqKioqKioqKioqKg0KKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovDQoNCg0KDQovKiBMaW51eCBydW5uZXI6DQp3Z2V0IC1xTy0gImh0dHBzOi8vYXJ6aG9zcGl0YWwuZ2l0aHViLmlvL2VzcHRlc3QvTm9kZV9UeXBlL0MrKy5qc29uIiB8IGpxIC1yICcucmVtYXJrIHwgQGJhc2U2NGQnIHwgZysrIC14IGMrKyAtDQoNCg0KKi8NCg0KDQojaW5jbHVkZSA8Y3RpbWU+DQojaW5jbHVkZSA8c3RyaW5nPg0KI2luY2x1ZGUgPHZlY3Rvcj4NCiNpbmNsdWRlIDxjaHJvbm8+DQojaW5jbHVkZSAiaW5jbHVkZS9qc29uLmhwcCINCiNpbmNsdWRlICJtcXR0L2FzeW5jX2NsaWVudC5oIg0KI2luY2x1ZGUgIm1xdHQvdG9waWMuaCINCg0KDQoNCm5hbWVzcGFjZSBlc3B0ZXN0ewoJCm5hbWVzcGFjZSBjb217CgkKbmFtZXNwYWNlIG5hbW1vdXJ7CgkKbmFtZXNwYWNlIGRjb217CgkNCiAgICANCiAgICBjbGFzcyBDb25maWdfR3JvdXB7DQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIENvbmZpZ19Hcm91cCgpew0KICAgICAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgICAgIH5Db25maWdfR3JvdXAoKXsNCiAgICAgICAgICAgICAgICAvLyBmb3IgZXZlcnkgIm5ldyIgdGhlcmUgbXVzdCBiZSBhICJkZWxldGUiDQogICAgICAgICAgICB9DQoNCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnX0dyb3VwLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9hY3RpdmU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBhY3RpdmUoKTsNCiAgICAgICAgICAgIENvbmZpZ19Hcm91cCYgYWN0aXZlKGJvb2wgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZ19Hcm91cC5hY3RpdmUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBDb25maWdfR3JvdXAuZW5hYmxlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9lbmFibGVkOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGJvb2wgZW5hYmxlZCgpOw0KICAgICAgICAgICAgQ29uZmlnX0dyb3VwJiBlbmFibGVkKGJvb2wgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZ19Hcm91cC5lbmFibGVkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnX0dyb3VwLmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX2NvZGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgY29kZSgpOw0KICAgICAgICAgICAgQ29uZmlnX0dyb3VwJiBjb2RlKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBDb25maWdfR3JvdXAuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZ19Hcm91cC5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBpbnQgX29yZGVyOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGludCBvcmRlcigpOw0KICAgICAgICAgICAgQ29uZmlnX0dyb3VwJiBvcmRlcihpbnQgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZ19Hcm91cC5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZ19Hcm91cC5kYXRlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHRpbWVfdCBfZGF0ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICB0aW1lX3QgZGF0ZSgpOw0KICAgICAgICAgICAgQ29uZmlnX0dyb3VwJiBkYXRlKHRpbWVfdCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnX0dyb3VwLmRhdGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBDb25maWdfR3JvdXAubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfbmFtZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBuYW1lKCk7DQogICAgICAgICAgICBDb25maWdfR3JvdXAmIG5hbWUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZ19Hcm91cC5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnX0dyb3VwLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfcmVtYXJrOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIHJlbWFyaygpOw0KICAgICAgICAgICAgQ29uZmlnX0dyb3VwJiByZW1hcmsoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZ19Hcm91cC5yZW1hcmsgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KDQogICAgDQoNCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgQ29uZmlnX0dyb3VwJiBfdW5pcXVlKCk7DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfdG9Eb2N1bWVudCgpOw0KICAgICAgICAgICAgQ29uZmlnX0dyb3VwJiBfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iaik7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwJiBzdG9yZSgpOw0KICAgIA0KICAgICAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cCY+IGZpbmRBbGwoKTsNCiAgICANCiAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXAmIGZpbmQoKTsNCiAgICANCiAgICB9Ow0KICAgIA0KICAgIGNsYXNzIE1hcHBpbmdfR3JvdXB7DQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIE1hcHBpbmdfR3JvdXAoKXsNCiAgICAgICAgICAgIH0NCiAgICAgICAgDQogICAgICAgICAgICB+TWFwcGluZ19Hcm91cCgpew0KICAgICAgICAgICAgICAgIC8vIGZvciBldmVyeSAibmV3IiB0aGVyZSBtdXN0IGJlIGEgImRlbGV0ZSINCiAgICAgICAgICAgIH0NCg0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nX0dyb3VwLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9hY3RpdmU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBhY3RpdmUoKTsNCiAgICAgICAgICAgIE1hcHBpbmdfR3JvdXAmIGFjdGl2ZShib29sIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nX0dyb3VwLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1hcHBpbmdfR3JvdXAuZW5hYmxlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9lbmFibGVkOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGJvb2wgZW5hYmxlZCgpOw0KICAgICAgICAgICAgTWFwcGluZ19Hcm91cCYgZW5hYmxlZChib29sIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nX0dyb3VwLmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nX0dyb3VwLmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX2NvZGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgY29kZSgpOw0KICAgICAgICAgICAgTWFwcGluZ19Hcm91cCYgY29kZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTWFwcGluZ19Hcm91cC5jb2RlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWFwcGluZ19Hcm91cC5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBpbnQgX29yZGVyOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGludCBvcmRlcigpOw0KICAgICAgICAgICAgTWFwcGluZ19Hcm91cCYgb3JkZXIoaW50IHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nX0dyb3VwLm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWFwcGluZ19Hcm91cC5kYXRlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHRpbWVfdCBfZGF0ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICB0aW1lX3QgZGF0ZSgpOw0KICAgICAgICAgICAgTWFwcGluZ19Hcm91cCYgZGF0ZSh0aW1lX3Qgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE1hcHBpbmdfR3JvdXAuZGF0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1hcHBpbmdfR3JvdXAubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfbmFtZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBuYW1lKCk7DQogICAgICAgICAgICBNYXBwaW5nX0dyb3VwJiBuYW1lKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nX0dyb3VwLm5hbWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nX0dyb3VwLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfcmVtYXJrOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIHJlbWFyaygpOw0KICAgICAgICAgICAgTWFwcGluZ19Hcm91cCYgcmVtYXJrKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nX0dyb3VwLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQoNCiAgICANCg0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBNYXBwaW5nX0dyb3VwJiBfdW5pcXVlKCk7DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfdG9Eb2N1bWVudCgpOw0KICAgICAgICAgICAgTWFwcGluZ19Hcm91cCYgX2Zyb21Eb2N1bWVudChzdGQ6OnN0cmluZyBvYmopOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmdfR3JvdXAmIHN0b3JlKCk7DQogICAgDQogICAgICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cCY+IGZpbmRBbGwoKTsNCiAgICANCiAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nX0dyb3VwJiBmaW5kKCk7DQogICAgDQogICAgfTsNCiAgICANCiAgICBjbGFzcyBUb29sX1R5cGV7DQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIFRvb2xfVHlwZSgpew0KICAgICAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgICAgIH5Ub29sX1R5cGUoKXsNCiAgICAgICAgICAgICAgICAvLyBmb3IgZXZlcnkgIm5ldyIgdGhlcmUgbXVzdCBiZSBhICJkZWxldGUiDQogICAgICAgICAgICB9DQoNCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVG9vbF9UeXBlLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9hY3RpdmU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBhY3RpdmUoKTsNCiAgICAgICAgICAgIFRvb2xfVHlwZSYgYWN0aXZlKGJvb2wgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIFRvb2xfVHlwZS5hY3RpdmUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sX1R5cGUuZW5hYmxlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9lbmFibGVkOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGJvb2wgZW5hYmxlZCgpOw0KICAgICAgICAgICAgVG9vbF9UeXBlJiBlbmFibGVkKGJvb2wgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIFRvb2xfVHlwZS5lbmFibGVkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVG9vbF9UeXBlLmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX2NvZGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgY29kZSgpOw0KICAgICAgICAgICAgVG9vbF9UeXBlJiBjb2RlKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sX1R5cGUuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFRvb2xfVHlwZS5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBpbnQgX29yZGVyOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGludCBvcmRlcigpOw0KICAgICAgICAgICAgVG9vbF9UeXBlJiBvcmRlcihpbnQgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIFRvb2xfVHlwZS5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFRvb2xfVHlwZS5kYXRlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHRpbWVfdCBfZGF0ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICB0aW1lX3QgZGF0ZSgpOw0KICAgICAgICAgICAgVG9vbF9UeXBlJiBkYXRlKHRpbWVfdCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogVG9vbF9UeXBlLmRhdGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sX1R5cGUubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfbmFtZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBuYW1lKCk7DQogICAgICAgICAgICBUb29sX1R5cGUmIG5hbWUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIFRvb2xfVHlwZS5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVG9vbF9UeXBlLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfcmVtYXJrOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIHJlbWFyaygpOw0KICAgICAgICAgICAgVG9vbF9UeXBlJiByZW1hcmsoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIFRvb2xfVHlwZS5yZW1hcmsgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KDQogICAgDQoNCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgVG9vbF9UeXBlJiBfdW5pcXVlKCk7DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfdG9Eb2N1bWVudCgpOw0KICAgICAgICAgICAgVG9vbF9UeXBlJiBfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iaik7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlJiBzdG9yZSgpOw0KICAgIA0KICAgICAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZSY+IGZpbmRBbGwoKTsNCiAgICANCiAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGUmIGZpbmQoKTsNCiAgICANCiAgICB9Ow0KICAgIA0KICAgIGNsYXNzIE5vZGVfQ29udGV4dHsNCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgTm9kZV9Db250ZXh0KCl7DQogICAgICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAgICAgfk5vZGVfQ29udGV4dCgpew0KICAgICAgICAgICAgICAgIC8vIGZvciBldmVyeSAibmV3IiB0aGVyZSBtdXN0IGJlIGEgImRlbGV0ZSINCiAgICAgICAgICAgIH0NCg0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlX0NvbnRleHQuYWN0aXZlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2FjdGl2ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBib29sIGFjdGl2ZSgpOw0KICAgICAgICAgICAgTm9kZV9Db250ZXh0JiBhY3RpdmUoYm9vbCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9Db250ZXh0LmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfQ29udGV4dC5lbmFibGVkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2VuYWJsZWQ7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBlbmFibGVkKCk7DQogICAgICAgICAgICBOb2RlX0NvbnRleHQmIGVuYWJsZWQoYm9vbCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9Db250ZXh0LmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlX0NvbnRleHQuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfY29kZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBjb2RlKCk7DQogICAgICAgICAgICBOb2RlX0NvbnRleHQmIGNvZGUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfQ29udGV4dC5jb2RlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9Db250ZXh0Lm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGludCBfb3JkZXI7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgaW50IG9yZGVyKCk7DQogICAgICAgICAgICBOb2RlX0NvbnRleHQmIG9yZGVyKGludCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9Db250ZXh0Lm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9Db250ZXh0LmRhdGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgdGltZV90IF9kYXRlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHRpbWVfdCBkYXRlKCk7DQogICAgICAgICAgICBOb2RlX0NvbnRleHQmIGRhdGUodGltZV90IHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlX0NvbnRleHQuZGF0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfQ29udGV4dC5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9uYW1lOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIG5hbWUoKTsNCiAgICAgICAgICAgIE5vZGVfQ29udGV4dCYgbmFtZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9Db250ZXh0Lm5hbWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlX0NvbnRleHQucmVtYXJrIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9yZW1hcms7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgcmVtYXJrKCk7DQogICAgICAgICAgICBOb2RlX0NvbnRleHQmIHJlbWFyayhzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9Db250ZXh0LnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQoNCiAgICANCg0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBOb2RlX0NvbnRleHQmIF91bmlxdWUoKTsNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF90b0RvY3VtZW50KCk7DQogICAgICAgICAgICBOb2RlX0NvbnRleHQmIF9mcm9tRG9jdW1lbnQoc3RkOjpzdHJpbmcgb2JqKTsNCiAgICANCiAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQmIHN0b3JlKCk7DQogICAgDQogICAgICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Db250ZXh0Jj4gZmluZEFsbCgpOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dCYgZmluZCgpOw0KICAgIA0KICAgIH07DQogICAgDQogICAgY2xhc3MgTm9kZV9Hcm91cHsNCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgTm9kZV9Hcm91cCgpew0KICAgICAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgICAgIH5Ob2RlX0dyb3VwKCl7DQogICAgICAgICAgICAgICAgLy8gZm9yIGV2ZXJ5ICJuZXciIHRoZXJlIG11c3QgYmUgYSAiZGVsZXRlIg0KICAgICAgICAgICAgfQ0KDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfR3JvdXAuYWN0aXZlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2FjdGl2ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBib29sIGFjdGl2ZSgpOw0KICAgICAgICAgICAgTm9kZV9Hcm91cCYgYWN0aXZlKGJvb2wgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfR3JvdXAuYWN0aXZlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9Hcm91cC5lbmFibGVkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2VuYWJsZWQ7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBlbmFibGVkKCk7DQogICAgICAgICAgICBOb2RlX0dyb3VwJiBlbmFibGVkKGJvb2wgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfR3JvdXAuZW5hYmxlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfR3JvdXAuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfY29kZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBjb2RlKCk7DQogICAgICAgICAgICBOb2RlX0dyb3VwJiBjb2RlKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlX0dyb3VwLmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlX0dyb3VwLm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGludCBfb3JkZXI7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgaW50IG9yZGVyKCk7DQogICAgICAgICAgICBOb2RlX0dyb3VwJiBvcmRlcihpbnQgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfR3JvdXAub3JkZXIgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlX0dyb3VwLmRhdGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgdGltZV90IF9kYXRlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHRpbWVfdCBkYXRlKCk7DQogICAgICAgICAgICBOb2RlX0dyb3VwJiBkYXRlKHRpbWVfdCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9Hcm91cC5kYXRlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9Hcm91cC5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9uYW1lOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIG5hbWUoKTsNCiAgICAgICAgICAgIE5vZGVfR3JvdXAmIG5hbWUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfR3JvdXAubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfR3JvdXAucmVtYXJrIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9yZW1hcms7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgcmVtYXJrKCk7DQogICAgICAgICAgICBOb2RlX0dyb3VwJiByZW1hcmsoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfR3JvdXAucmVtYXJrIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCg0KICAgIA0KDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIE5vZGVfR3JvdXAmIF91bmlxdWUoKTsNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF90b0RvY3VtZW50KCk7DQogICAgICAgICAgICBOb2RlX0dyb3VwJiBfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iaik7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cCYgc3RvcmUoKTsNCiAgICANCiAgICAgICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwJj4gZmluZEFsbCgpOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXAmIGZpbmQoKTsNCiAgICANCiAgICB9Ow0KICAgIA0KICAgIGNsYXNzIE5vZGVfVHlwZXsNCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgTm9kZV9UeXBlKCl7DQogICAgICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAgICAgfk5vZGVfVHlwZSgpew0KICAgICAgICAgICAgICAgIC8vIGZvciBldmVyeSAibmV3IiB0aGVyZSBtdXN0IGJlIGEgImRlbGV0ZSINCiAgICAgICAgICAgIH0NCg0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlX1R5cGUuYWN0aXZlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2FjdGl2ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBib29sIGFjdGl2ZSgpOw0KICAgICAgICAgICAgTm9kZV9UeXBlJiBhY3RpdmUoYm9vbCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9UeXBlLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfVHlwZS5lbmFibGVkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2VuYWJsZWQ7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBlbmFibGVkKCk7DQogICAgICAgICAgICBOb2RlX1R5cGUmIGVuYWJsZWQoYm9vbCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9UeXBlLmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlX1R5cGUuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfY29kZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBjb2RlKCk7DQogICAgICAgICAgICBOb2RlX1R5cGUmIGNvZGUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfVHlwZS5jb2RlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9UeXBlLm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGludCBfb3JkZXI7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgaW50IG9yZGVyKCk7DQogICAgICAgICAgICBOb2RlX1R5cGUmIG9yZGVyKGludCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9UeXBlLm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9UeXBlLmRhdGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgdGltZV90IF9kYXRlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHRpbWVfdCBkYXRlKCk7DQogICAgICAgICAgICBOb2RlX1R5cGUmIGRhdGUodGltZV90IHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlX1R5cGUuZGF0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfVHlwZS5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9uYW1lOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIG5hbWUoKTsNCiAgICAgICAgICAgIE5vZGVfVHlwZSYgbmFtZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9UeXBlLm5hbWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlX1R5cGUucmVtYXJrIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9yZW1hcms7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgcmVtYXJrKCk7DQogICAgICAgICAgICBOb2RlX1R5cGUmIHJlbWFyayhzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9UeXBlLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGVfVHlwZS5keW5hbWljIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2R5bmFtaWM7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBkeW5hbWljKCk7DQogICAgICAgICAgICBOb2RlX1R5cGUmIGR5bmFtaWMoYm9vbCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZV9UeXBlLmR5bmFtaWMgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KDQogICAgDQoNCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgTm9kZV9UeXBlJiBfdW5pcXVlKCk7DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfdG9Eb2N1bWVudCgpOw0KICAgICAgICAgICAgTm9kZV9UeXBlJiBfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iaik7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlJiBzdG9yZSgpOw0KICAgIA0KICAgICAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZSY+IGZpbmRBbGwoKTsNCiAgICANCiAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGUmIGZpbmQoKTsNCiAgICANCiAgICB9Ow0KICAgIA0KICAgIGNsYXNzIFRvb2x7DQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIFRvb2woKXsNCiAgICAgICAgICAgIH0NCiAgICAgICAgDQogICAgICAgICAgICB+VG9vbCgpew0KICAgICAgICAgICAgICAgIC8vIGZvciBldmVyeSAibmV3IiB0aGVyZSBtdXN0IGJlIGEgImRlbGV0ZSINCiAgICAgICAgICAgIH0NCg0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9hY3RpdmU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBhY3RpdmUoKTsNCiAgICAgICAgICAgIFRvb2wmIGFjdGl2ZShib29sIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFRvb2wuZW5hYmxlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9lbmFibGVkOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGJvb2wgZW5hYmxlZCgpOw0KICAgICAgICAgICAgVG9vbCYgZW5hYmxlZChib29sIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sLmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sLmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX2NvZGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgY29kZSgpOw0KICAgICAgICAgICAgVG9vbCYgY29kZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogVG9vbC5jb2RlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVG9vbC5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBpbnQgX29yZGVyOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGludCBvcmRlcigpOw0KICAgICAgICAgICAgVG9vbCYgb3JkZXIoaW50IHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sLm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVG9vbC5kYXRlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHRpbWVfdCBfZGF0ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICB0aW1lX3QgZGF0ZSgpOw0KICAgICAgICAgICAgVG9vbCYgZGF0ZSh0aW1lX3Qgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIFRvb2wuZGF0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFRvb2wubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfbmFtZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBuYW1lKCk7DQogICAgICAgICAgICBUb29sJiBuYW1lKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sLm5hbWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfcmVtYXJrOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIHJlbWFyaygpOw0KICAgICAgICAgICAgVG9vbCYgcmVtYXJrKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFRvb2wudHlwZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZSogX3R5cGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGUmIHR5cGUoKTsNCiAgICAgICAgICAgIFRvb2wmIHR5cGUoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGUmIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBUb29sLnR5cGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KDQogICAgDQoNCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgVG9vbCYgX3VuaXF1ZSgpOw0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX3RvRG9jdW1lbnQoKTsNCiAgICAgICAgICAgIFRvb2wmIF9mcm9tRG9jdW1lbnQoc3RkOjpzdHJpbmcgb2JqKTsNCiAgICANCiAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sJiBzdG9yZSgpOw0KICAgIA0KICAgICAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2wmPiBmaW5kQWxsKCk7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbCYgZmluZCgpOw0KICAgIA0KICAgIH07DQogICAgDQogICAgY2xhc3MgTWFwcGluZ3sNCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgTWFwcGluZygpew0KICAgICAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgICAgIH5NYXBwaW5nKCl7DQogICAgICAgICAgICAgICAgLy8gZm9yIGV2ZXJ5ICJuZXciIHRoZXJlIG11c3QgYmUgYSAiZGVsZXRlIg0KICAgICAgICAgICAgfQ0KDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1hcHBpbmcuYWN0aXZlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2FjdGl2ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBib29sIGFjdGl2ZSgpOw0KICAgICAgICAgICAgTWFwcGluZyYgYWN0aXZlKGJvb2wgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE1hcHBpbmcuYWN0aXZlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWFwcGluZy5lbmFibGVkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2VuYWJsZWQ7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBlbmFibGVkKCk7DQogICAgICAgICAgICBNYXBwaW5nJiBlbmFibGVkKGJvb2wgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE1hcHBpbmcuZW5hYmxlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1hcHBpbmcub3JkZXIgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgaW50IF9vcmRlcjsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBpbnQgb3JkZXIoKTsNCiAgICAgICAgICAgIE1hcHBpbmcmIG9yZGVyKGludCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTWFwcGluZy5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1hcHBpbmcuY2xhc3NOYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9jbGFzc05hbWU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgY2xhc3NOYW1lKCk7DQogICAgICAgICAgICBNYXBwaW5nJiBjbGFzc05hbWUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE1hcHBpbmcuY2xhc3NOYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWFwcGluZy5zY29wZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfc2NvcGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgc2NvcGUoKTsNCiAgICAgICAgICAgIE1hcHBpbmcmIHNjb3BlKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nLnNjb3BlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWFwcGluZy5jb250ZXh0IEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9jb250ZXh0Ow0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIGNvbnRleHQoKTsNCiAgICAgICAgICAgIE1hcHBpbmcmIGNvbnRleHQoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE1hcHBpbmcuY29udGV4dCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1hcHBpbmcuc291cmNlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9zb3VyY2U7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgc291cmNlKCk7DQogICAgICAgICAgICBNYXBwaW5nJiBzb3VyY2Uoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE1hcHBpbmcuc291cmNlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWFwcGluZy50YXJnZXQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX3RhcmdldDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyB0YXJnZXQoKTsNCiAgICAgICAgICAgIE1hcHBpbmcmIHRhcmdldChzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTWFwcGluZy50YXJnZXQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nLmluU2NyaXB0IEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9pblNjcmlwdDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBpblNjcmlwdCgpOw0KICAgICAgICAgICAgTWFwcGluZyYgaW5TY3JpcHQoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE1hcHBpbmcuaW5TY3JpcHQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nLm91dFNjcmlwdCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfb3V0U2NyaXB0Ow0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIG91dFNjcmlwdCgpOw0KICAgICAgICAgICAgTWFwcGluZyYgb3V0U2NyaXB0KHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nLm91dFNjcmlwdCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1hcHBpbmcudG9vbCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2wqIF90b29sOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbCYgdG9vbCgpOw0KICAgICAgICAgICAgTWFwcGluZyYgdG9vbChlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2wmIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nLnRvb2wgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nLmdyb3VwIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwKiBfZ3JvdXA7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXAmIGdyb3VwKCk7DQogICAgICAgICAgICBNYXBwaW5nJiBncm91cChlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cCYgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE1hcHBpbmcuZ3JvdXAgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNYXBwaW5nLnR5cGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGUqIF90eXBlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlJiB0eXBlKCk7DQogICAgICAgICAgICBNYXBwaW5nJiB0eXBlKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlJiB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTWFwcGluZy50eXBlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCg0KICAgIA0KDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIE1hcHBpbmcmIF91bmlxdWUoKTsNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF90b0RvY3VtZW50KCk7DQogICAgICAgICAgICBNYXBwaW5nJiBfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iaik7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZyYgc3RvcmUoKTsNCiAgICANCiAgICAgICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nJj4gZmluZEFsbCgpOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmcmIGZpbmQoKTsNCiAgICANCiAgICB9Ow0KICAgIA0KICAgIGNsYXNzIE5vZGV7DQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIE5vZGUoKXsNCiAgICAgICAgICAgIH0NCiAgICAgICAgDQogICAgICAgICAgICB+Tm9kZSgpew0KICAgICAgICAgICAgICAgIC8vIGZvciBldmVyeSAibmV3IiB0aGVyZSBtdXN0IGJlIGEgImRlbGV0ZSINCiAgICAgICAgICAgIH0NCg0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9hY3RpdmU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBhY3RpdmUoKTsNCiAgICAgICAgICAgIE5vZGUmIGFjdGl2ZShib29sIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGUuZW5hYmxlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9lbmFibGVkOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGJvb2wgZW5hYmxlZCgpOw0KICAgICAgICAgICAgTm9kZSYgZW5hYmxlZChib29sIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX2NvZGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgY29kZSgpOw0KICAgICAgICAgICAgTm9kZSYgY29kZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZS5jb2RlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZS5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBpbnQgX29yZGVyOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGludCBvcmRlcigpOw0KICAgICAgICAgICAgTm9kZSYgb3JkZXIoaW50IHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZS5kYXRlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHRpbWVfdCBfZGF0ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICB0aW1lX3QgZGF0ZSgpOw0KICAgICAgICAgICAgTm9kZSYgZGF0ZSh0aW1lX3Qgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGUuZGF0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGUubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfbmFtZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBuYW1lKCk7DQogICAgICAgICAgICBOb2RlJiBuYW1lKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLm5hbWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfcmVtYXJrOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIHJlbWFyaygpOw0KICAgICAgICAgICAgTm9kZSYgcmVtYXJrKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGUuYWRkcmVzcyBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfYWRkcmVzczsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBhZGRyZXNzKCk7DQogICAgICAgICAgICBOb2RlJiBhZGRyZXNzKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLmFkZHJlc3MgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLmJhY2t1cCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUqIF9iYWNrdXA7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiBiYWNrdXAoKTsNCiAgICAgICAgICAgIE5vZGUmIGJhY2t1cChlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLmJhY2t1cCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGUucGFyZW50IEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSogX3BhcmVudDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIHBhcmVudCgpOw0KICAgICAgICAgICAgTm9kZSYgcGFyZW50KGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGUucGFyZW50IEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZS5ncm91cCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXAqIF9ncm91cDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXAmIGdyb3VwKCk7DQogICAgICAgICAgICBOb2RlJiBncm91cChlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXAmIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLmdyb3VwIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZS5jb250ZXh0IEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Db250ZXh0KiBfY29udGV4dDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dCYgY29udGV4dCgpOw0KICAgICAgICAgICAgTm9kZSYgY29udGV4dChlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dCYgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGUuY29udGV4dCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGUucG9ydCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBpbnQgX3BvcnQ7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgaW50IHBvcnQoKTsNCiAgICAgICAgICAgIE5vZGUmIHBvcnQoaW50IHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLnBvcnQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLm9ubGluZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICB0aW1lX3QgX29ubGluZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICB0aW1lX3Qgb25saW5lKCk7DQogICAgICAgICAgICBOb2RlJiBvbmxpbmUodGltZV90IHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBOb2RlLm9ubGluZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGUuc2VjdXJlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX3NlY3VyZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBib29sIHNlY3VyZSgpOw0KICAgICAgICAgICAgTm9kZSYgc2VjdXJlKGJvb2wgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGUuc2VjdXJlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTm9kZS50eXBlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlKiBfdHlwZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZSYgdHlwZSgpOw0KICAgICAgICAgICAgTm9kZSYgdHlwZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZSYgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE5vZGUudHlwZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQoNCiAgICANCg0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBOb2RlJiBfdW5pcXVlKCk7DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfdG9Eb2N1bWVudCgpOw0KICAgICAgICAgICAgTm9kZSYgX2Zyb21Eb2N1bWVudChzdGQ6OnN0cmluZyBvYmopOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIHN0b3JlKCk7DQogICAgDQogICAgICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSY+IGZpbmRBbGwoKTsNCiAgICANCiAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiBmaW5kKCk7DQogICAgDQogICAgICAgIHZvaWQgYXV0aENvZGUoc3RkOjpzdHJpbmcgY29kZSwgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sJiB0b29sKTsNCiAgICANCiAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiBpbml0KGludCBvbmxpbmUsIHN0ZDo6c3RyaW5nIGNvZGUsIHN0ZDo6c3RyaW5nIHVpZCk7DQogICAgDQogICAgfTsNCiAgICANCiAgICBjbGFzcyBDb25maWd7DQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIENvbmZpZygpew0KICAgICAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgICAgIH5Db25maWcoKXsNCiAgICAgICAgICAgICAgICAvLyBmb3IgZXZlcnkgIm5ldyIgdGhlcmUgbXVzdCBiZSBhICJkZWxldGUiDQogICAgICAgICAgICB9DQoNCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9hY3RpdmU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBhY3RpdmUoKTsNCiAgICAgICAgICAgIENvbmZpZyYgYWN0aXZlKGJvb2wgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZy5hY3RpdmUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBDb25maWcuZW5hYmxlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9lbmFibGVkOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGJvb2wgZW5hYmxlZCgpOw0KICAgICAgICAgICAgQ29uZmlnJiBlbmFibGVkKGJvb2wgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZy5lbmFibGVkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnLmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX2NvZGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgY29kZSgpOw0KICAgICAgICAgICAgQ29uZmlnJiBjb2RlKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBDb25maWcuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZy5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBpbnQgX29yZGVyOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGludCBvcmRlcigpOw0KICAgICAgICAgICAgQ29uZmlnJiBvcmRlcihpbnQgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZy5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZy5kYXRlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHRpbWVfdCBfZGF0ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICB0aW1lX3QgZGF0ZSgpOw0KICAgICAgICAgICAgQ29uZmlnJiBkYXRlKHRpbWVfdCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnLmRhdGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBDb25maWcubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfbmFtZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBuYW1lKCk7DQogICAgICAgICAgICBDb25maWcmIG5hbWUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZy5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfcmVtYXJrOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIHJlbWFyaygpOw0KICAgICAgICAgICAgQ29uZmlnJiByZW1hcmsoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZy5yZW1hcmsgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBDb25maWcudmFsdWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX3ZhbHVlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIHZhbHVlKCk7DQogICAgICAgICAgICBDb25maWcmIHZhbHVlKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBDb25maWcudmFsdWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBDb25maWcuc2NyaXB0IEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9zY3JpcHQ7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgc2NyaXB0KCk7DQogICAgICAgICAgICBDb25maWcmIHNjcmlwdChzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnLnNjcmlwdCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZy50b29sIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbCogX3Rvb2w7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sJiB0b29sKCk7DQogICAgICAgICAgICBDb25maWcmIHRvb2woZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sJiB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnLnRvb2wgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBDb25maWcuZ3JvdXAgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXAqIF9ncm91cDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cCYgZ3JvdXAoKTsNCiAgICAgICAgICAgIENvbmZpZyYgZ3JvdXAoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXAmIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBDb25maWcuZ3JvdXAgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBDb25maWcudHlwZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZSogX3R5cGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGUmIHR5cGUoKTsNCiAgICAgICAgICAgIENvbmZpZyYgdHlwZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZSYgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIENvbmZpZy50eXBlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogQ29uZmlnLm5vZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlKiBfbm9kZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIG5vZGUoKTsNCiAgICAgICAgICAgIENvbmZpZyYgbm9kZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBDb25maWcubm9kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQoNCiAgICANCg0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBDb25maWcmIF91bmlxdWUoKTsNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF90b0RvY3VtZW50KCk7DQogICAgICAgICAgICBDb25maWcmIF9mcm9tRG9jdW1lbnQoc3RkOjpzdHJpbmcgb2JqKTsNCiAgICANCiAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWcmIHN0b3JlKCk7DQogICAgDQogICAgICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnJj4gZmluZEFsbCgpOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZyYgZmluZCgpOw0KICAgIA0KICAgIH07DQogICAgDQogICAgY2xhc3MgRXZlbnR7DQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIEV2ZW50KCl7DQogICAgICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAgICAgfkV2ZW50KCl7DQogICAgICAgICAgICAgICAgLy8gZm9yIGV2ZXJ5ICJuZXciIHRoZXJlIG11c3QgYmUgYSAiZGVsZXRlIg0KICAgICAgICAgICAgfQ0KDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIEV2ZW50LmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9hY3RpdmU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBhY3RpdmUoKTsNCiAgICAgICAgICAgIEV2ZW50JiBhY3RpdmUoYm9vbCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogRXZlbnQuYWN0aXZlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRXZlbnQuZW5hYmxlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9lbmFibGVkOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGJvb2wgZW5hYmxlZCgpOw0KICAgICAgICAgICAgRXZlbnQmIGVuYWJsZWQoYm9vbCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogRXZlbnQuZW5hYmxlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIEV2ZW50LmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX2NvZGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgY29kZSgpOw0KICAgICAgICAgICAgRXZlbnQmIGNvZGUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIEV2ZW50LmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBFdmVudC5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBpbnQgX29yZGVyOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGludCBvcmRlcigpOw0KICAgICAgICAgICAgRXZlbnQmIG9yZGVyKGludCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogRXZlbnQub3JkZXIgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBFdmVudC5kYXRlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHRpbWVfdCBfZGF0ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICB0aW1lX3QgZGF0ZSgpOw0KICAgICAgICAgICAgRXZlbnQmIGRhdGUodGltZV90IHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBFdmVudC5kYXRlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRXZlbnQubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfbmFtZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBuYW1lKCk7DQogICAgICAgICAgICBFdmVudCYgbmFtZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogRXZlbnQubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIEV2ZW50LnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfcmVtYXJrOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIHJlbWFyaygpOw0KICAgICAgICAgICAgRXZlbnQmIHJlbWFyayhzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogRXZlbnQucmVtYXJrIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRXZlbnQuY2xhc3NOYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9jbGFzc05hbWU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgY2xhc3NOYW1lKCk7DQogICAgICAgICAgICBFdmVudCYgY2xhc3NOYW1lKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBFdmVudC5jbGFzc05hbWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBFdmVudC5tZXRob2QgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX21ldGhvZDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBtZXRob2QoKTsNCiAgICAgICAgICAgIEV2ZW50JiBtZXRob2Qoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIEV2ZW50Lm1ldGhvZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIEV2ZW50LnBheWxvYWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX3BheWxvYWQ7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgcGF5bG9hZCgpOw0KICAgICAgICAgICAgRXZlbnQmIHBheWxvYWQoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIEV2ZW50LnBheWxvYWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBFdmVudC5jYXJyaWVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSogX2NhcnJpZXI7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiBjYXJyaWVyKCk7DQogICAgICAgICAgICBFdmVudCYgY2Fycmllcihlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBFdmVudC5jYXJyaWVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRXZlbnQuc2VuZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSogX3NlbmRlcjsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIHNlbmRlcigpOw0KICAgICAgICAgICAgRXZlbnQmIHNlbmRlcihlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBFdmVudC5zZW5kZXIgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBFdmVudC5yZWNpcGllbnQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlKiBfcmVjaXBpZW50Ow0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgcmVjaXBpZW50KCk7DQogICAgICAgICAgICBFdmVudCYgcmVjaXBpZW50KGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIEV2ZW50LnJlY2lwaWVudCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIEV2ZW50LnJlc3BvbnNlVG8gR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCogX3Jlc3BvbnNlVG87DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCYgcmVzcG9uc2VUbygpOw0KICAgICAgICAgICAgRXZlbnQmIHJlc3BvbnNlVG8oZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCYgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIEV2ZW50LnJlc3BvbnNlVG8gR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KDQogICAgDQoNCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgRXZlbnQmIF91bmlxdWUoKTsNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF90b0RvY3VtZW50KCk7DQogICAgICAgICAgICBFdmVudCYgX2Zyb21Eb2N1bWVudChzdGQ6OnN0cmluZyBvYmopOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50JiBzdG9yZSgpOw0KICAgIA0KICAgICAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50Jj4gZmluZEFsbCgpOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50JiBmaW5kKCk7DQogICAgDQogICAgICAgIHZvaWQgbGlzdGVuKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgbm9kZSk7DQogICAgDQogICAgICAgIHZvaWQgdHJpZ2dlcigpOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50JiBwcm9jZXNzKCk7DQogICAgDQogICAgfTsNCiAgICANCn0KCQp9CgkKfQoJCn0KCQ0KDQpuYW1lc3BhY2UgZXNwdGVzdHsKCQpuYW1lc3BhY2UgY29tewoJCm5hbWVzcGFjZSBuYW1tb3VyewoJCm5hbWVzcGFjZSBkaW90ewoJDQogICAgDQogICAgY2xhc3MgRGV2aWNlX0NhdGVnb3J5ew0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBEZXZpY2VfQ2F0ZWdvcnkoKXsNCiAgICAgICAgICAgIH0NCiAgICAgICAgDQogICAgICAgICAgICB+RGV2aWNlX0NhdGVnb3J5KCl7DQogICAgICAgICAgICAgICAgLy8gZm9yIGV2ZXJ5ICJuZXciIHRoZXJlIG11c3QgYmUgYSAiZGVsZXRlIg0KICAgICAgICAgICAgfQ0KDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9DYXRlZ29yeS5hY3RpdmUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgYm9vbCBfYWN0aXZlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGJvb2wgYWN0aXZlKCk7DQogICAgICAgICAgICBEZXZpY2VfQ2F0ZWdvcnkmIGFjdGl2ZShib29sIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfQ2F0ZWdvcnkuYWN0aXZlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0NhdGVnb3J5LmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgYm9vbCBfZW5hYmxlZDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBib29sIGVuYWJsZWQoKTsNCiAgICAgICAgICAgIERldmljZV9DYXRlZ29yeSYgZW5hYmxlZChib29sIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfQ2F0ZWdvcnkuZW5hYmxlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9DYXRlZ29yeS5jb2RlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9jb2RlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIGNvZGUoKTsNCiAgICAgICAgICAgIERldmljZV9DYXRlZ29yeSYgY29kZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0NhdGVnb3J5LmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfQ2F0ZWdvcnkub3JkZXIgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgaW50IF9vcmRlcjsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBpbnQgb3JkZXIoKTsNCiAgICAgICAgICAgIERldmljZV9DYXRlZ29yeSYgb3JkZXIoaW50IHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfQ2F0ZWdvcnkub3JkZXIgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfQ2F0ZWdvcnkuZGF0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICB0aW1lX3QgX2RhdGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgdGltZV90IGRhdGUoKTsNCiAgICAgICAgICAgIERldmljZV9DYXRlZ29yeSYgZGF0ZSh0aW1lX3Qgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9DYXRlZ29yeS5kYXRlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0NhdGVnb3J5Lm5hbWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX25hbWU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgbmFtZSgpOw0KICAgICAgICAgICAgRGV2aWNlX0NhdGVnb3J5JiBuYW1lKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfQ2F0ZWdvcnkubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9DYXRlZ29yeS5yZW1hcmsgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX3JlbWFyazsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyByZW1hcmsoKTsNCiAgICAgICAgICAgIERldmljZV9DYXRlZ29yeSYgcmVtYXJrKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfQ2F0ZWdvcnkucmVtYXJrIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0NhdGVnb3J5LnBhcmVudCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeSogX3BhcmVudDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeSYgcGFyZW50KCk7DQogICAgICAgICAgICBEZXZpY2VfQ2F0ZWdvcnkmIHBhcmVudChlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeSYgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9DYXRlZ29yeS5wYXJlbnQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KDQogICAgDQoNCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgRGV2aWNlX0NhdGVnb3J5JiBfdW5pcXVlKCk7DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfdG9Eb2N1bWVudCgpOw0KICAgICAgICAgICAgRGV2aWNlX0NhdGVnb3J5JiBfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iaik7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5JiBzdG9yZSgpOw0KICAgIA0KICAgICAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeSY+IGZpbmRBbGwoKTsNCiAgICANCiAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnkmIGZpbmQoKTsNCiAgICANCiAgICB9Ow0KICAgIA0KICAgIGNsYXNzIE1ldHJpY19Hcm91cHsNCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgTWV0cmljX0dyb3VwKCl7DQogICAgICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAgICAgfk1ldHJpY19Hcm91cCgpew0KICAgICAgICAgICAgICAgIC8vIGZvciBldmVyeSAibmV3IiB0aGVyZSBtdXN0IGJlIGEgImRlbGV0ZSINCiAgICAgICAgICAgIH0NCg0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfR3JvdXAuYWN0aXZlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2FjdGl2ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBib29sIGFjdGl2ZSgpOw0KICAgICAgICAgICAgTWV0cmljX0dyb3VwJiBhY3RpdmUoYm9vbCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX0dyb3VwLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19Hcm91cC5lbmFibGVkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2VuYWJsZWQ7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBlbmFibGVkKCk7DQogICAgICAgICAgICBNZXRyaWNfR3JvdXAmIGVuYWJsZWQoYm9vbCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX0dyb3VwLmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfR3JvdXAuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfY29kZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBjb2RlKCk7DQogICAgICAgICAgICBNZXRyaWNfR3JvdXAmIGNvZGUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19Hcm91cC5jb2RlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX0dyb3VwLm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGludCBfb3JkZXI7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgaW50IG9yZGVyKCk7DQogICAgICAgICAgICBNZXRyaWNfR3JvdXAmIG9yZGVyKGludCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX0dyb3VwLm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX0dyb3VwLmRhdGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgdGltZV90IF9kYXRlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHRpbWVfdCBkYXRlKCk7DQogICAgICAgICAgICBNZXRyaWNfR3JvdXAmIGRhdGUodGltZV90IHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfR3JvdXAuZGF0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19Hcm91cC5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9uYW1lOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIG5hbWUoKTsNCiAgICAgICAgICAgIE1ldHJpY19Hcm91cCYgbmFtZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX0dyb3VwLm5hbWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfR3JvdXAucmVtYXJrIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9yZW1hcms7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgcmVtYXJrKCk7DQogICAgICAgICAgICBNZXRyaWNfR3JvdXAmIHJlbWFyayhzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX0dyb3VwLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQoNCiAgICANCg0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBNZXRyaWNfR3JvdXAmIF91bmlxdWUoKTsNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF90b0RvY3VtZW50KCk7DQogICAgICAgICAgICBNZXRyaWNfR3JvdXAmIF9mcm9tRG9jdW1lbnQoc3RkOjpzdHJpbmcgb2JqKTsNCiAgICANCiAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXAmIHN0b3JlKCk7DQogICAgDQogICAgICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwJj4gZmluZEFsbCgpOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19Hcm91cCYgZmluZCgpOw0KICAgIA0KICAgIH07DQogICAgDQogICAgY2xhc3MgRGV2aWNlX1R5cGV7DQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIERldmljZV9UeXBlKCl7DQogICAgICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAgICAgfkRldmljZV9UeXBlKCl7DQogICAgICAgICAgICAgICAgLy8gZm9yIGV2ZXJ5ICJuZXciIHRoZXJlIG11c3QgYmUgYSAiZGVsZXRlIg0KICAgICAgICAgICAgfQ0KDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9UeXBlLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9hY3RpdmU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBhY3RpdmUoKTsNCiAgICAgICAgICAgIERldmljZV9UeXBlJiBhY3RpdmUoYm9vbCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX1R5cGUuYWN0aXZlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX1R5cGUuZW5hYmxlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9lbmFibGVkOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGJvb2wgZW5hYmxlZCgpOw0KICAgICAgICAgICAgRGV2aWNlX1R5cGUmIGVuYWJsZWQoYm9vbCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX1R5cGUuZW5hYmxlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9UeXBlLmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX2NvZGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgY29kZSgpOw0KICAgICAgICAgICAgRGV2aWNlX1R5cGUmIGNvZGUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9UeXBlLmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfVHlwZS5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBpbnQgX29yZGVyOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGludCBvcmRlcigpOw0KICAgICAgICAgICAgRGV2aWNlX1R5cGUmIG9yZGVyKGludCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX1R5cGUub3JkZXIgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfVHlwZS5kYXRlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHRpbWVfdCBfZGF0ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICB0aW1lX3QgZGF0ZSgpOw0KICAgICAgICAgICAgRGV2aWNlX1R5cGUmIGRhdGUodGltZV90IHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfVHlwZS5kYXRlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX1R5cGUubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfbmFtZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBuYW1lKCk7DQogICAgICAgICAgICBEZXZpY2VfVHlwZSYgbmFtZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX1R5cGUubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9UeXBlLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfcmVtYXJrOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIHJlbWFyaygpOw0KICAgICAgICAgICAgRGV2aWNlX1R5cGUmIHJlbWFyayhzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX1R5cGUucmVtYXJrIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX1R5cGUuY2F0ZWdvcnkgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnkqIF9jYXRlZ29yeTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeSYgY2F0ZWdvcnkoKTsNCiAgICAgICAgICAgIERldmljZV9UeXBlJiBjYXRlZ29yeShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeSYgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9UeXBlLmNhdGVnb3J5IEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCg0KICAgIA0KDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIERldmljZV9UeXBlJiBfdW5pcXVlKCk7DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfdG9Eb2N1bWVudCgpOw0KICAgICAgICAgICAgRGV2aWNlX1R5cGUmIF9mcm9tRG9jdW1lbnQoc3RkOjpzdHJpbmcgb2JqKTsNCiAgICANCiAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZSYgc3RvcmUoKTsNCiAgICANCiAgICAgICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZSY+IGZpbmRBbGwoKTsNCiAgICANCiAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZSYgZmluZCgpOw0KICAgIA0KICAgIH07DQogICAgDQogICAgY2xhc3MgTWV0cmljX1R5cGV7DQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIE1ldHJpY19UeXBlKCl7DQogICAgICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAgICAgfk1ldHJpY19UeXBlKCl7DQogICAgICAgICAgICAgICAgLy8gZm9yIGV2ZXJ5ICJuZXciIHRoZXJlIG11c3QgYmUgYSAiZGVsZXRlIg0KICAgICAgICAgICAgfQ0KDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19UeXBlLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9hY3RpdmU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBhY3RpdmUoKTsNCiAgICAgICAgICAgIE1ldHJpY19UeXBlJiBhY3RpdmUoYm9vbCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX1R5cGUuYWN0aXZlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX1R5cGUuZW5hYmxlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9lbmFibGVkOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGJvb2wgZW5hYmxlZCgpOw0KICAgICAgICAgICAgTWV0cmljX1R5cGUmIGVuYWJsZWQoYm9vbCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX1R5cGUuZW5hYmxlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19UeXBlLmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX2NvZGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgY29kZSgpOw0KICAgICAgICAgICAgTWV0cmljX1R5cGUmIGNvZGUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19UeXBlLmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfVHlwZS5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBpbnQgX29yZGVyOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGludCBvcmRlcigpOw0KICAgICAgICAgICAgTWV0cmljX1R5cGUmIG9yZGVyKGludCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX1R5cGUub3JkZXIgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfVHlwZS5kYXRlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHRpbWVfdCBfZGF0ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICB0aW1lX3QgZGF0ZSgpOw0KICAgICAgICAgICAgTWV0cmljX1R5cGUmIGRhdGUodGltZV90IHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfVHlwZS5kYXRlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX1R5cGUubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfbmFtZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBuYW1lKCk7DQogICAgICAgICAgICBNZXRyaWNfVHlwZSYgbmFtZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX1R5cGUubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19UeXBlLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfcmVtYXJrOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIHJlbWFyaygpOw0KICAgICAgICAgICAgTWV0cmljX1R5cGUmIHJlbWFyayhzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX1R5cGUucmVtYXJrIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX1R5cGUuZ3JvdXAgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXAqIF9ncm91cDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19Hcm91cCYgZ3JvdXAoKTsNCiAgICAgICAgICAgIE1ldHJpY19UeXBlJiBncm91cChlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19Hcm91cCYgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19UeXBlLmdyb3VwIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCg0KICAgIA0KDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIE1ldHJpY19UeXBlJiBfdW5pcXVlKCk7DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfdG9Eb2N1bWVudCgpOw0KICAgICAgICAgICAgTWV0cmljX1R5cGUmIF9mcm9tRG9jdW1lbnQoc3RkOjpzdHJpbmcgb2JqKTsNCiAgICANCiAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZSYgc3RvcmUoKTsNCiAgICANCiAgICAgICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZSY+IGZpbmRBbGwoKTsNCiAgICANCiAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZSYgZmluZCgpOw0KICAgIA0KICAgIH07DQogICAgDQogICAgY2xhc3MgVHlwZV9BdHRyaWJ1dGV7DQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIFR5cGVfQXR0cmlidXRlKCl7DQogICAgICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAgICAgflR5cGVfQXR0cmlidXRlKCl7DQogICAgICAgICAgICAgICAgLy8gZm9yIGV2ZXJ5ICJuZXciIHRoZXJlIG11c3QgYmUgYSAiZGVsZXRlIg0KICAgICAgICAgICAgfQ0KDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFR5cGVfQXR0cmlidXRlLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9hY3RpdmU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBhY3RpdmUoKTsNCiAgICAgICAgICAgIFR5cGVfQXR0cmlidXRlJiBhY3RpdmUoYm9vbCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogVHlwZV9BdHRyaWJ1dGUuYWN0aXZlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVHlwZV9BdHRyaWJ1dGUuZW5hYmxlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBib29sIF9lbmFibGVkOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGJvb2wgZW5hYmxlZCgpOw0KICAgICAgICAgICAgVHlwZV9BdHRyaWJ1dGUmIGVuYWJsZWQoYm9vbCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogVHlwZV9BdHRyaWJ1dGUuZW5hYmxlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFR5cGVfQXR0cmlidXRlLmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX2NvZGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgY29kZSgpOw0KICAgICAgICAgICAgVHlwZV9BdHRyaWJ1dGUmIGNvZGUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIFR5cGVfQXR0cmlidXRlLmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBUeXBlX0F0dHJpYnV0ZS5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBpbnQgX29yZGVyOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGludCBvcmRlcigpOw0KICAgICAgICAgICAgVHlwZV9BdHRyaWJ1dGUmIG9yZGVyKGludCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogVHlwZV9BdHRyaWJ1dGUub3JkZXIgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBUeXBlX0F0dHJpYnV0ZS5kYXRlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHRpbWVfdCBfZGF0ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICB0aW1lX3QgZGF0ZSgpOw0KICAgICAgICAgICAgVHlwZV9BdHRyaWJ1dGUmIGRhdGUodGltZV90IHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBUeXBlX0F0dHJpYnV0ZS5kYXRlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVHlwZV9BdHRyaWJ1dGUubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfbmFtZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBuYW1lKCk7DQogICAgICAgICAgICBUeXBlX0F0dHJpYnV0ZSYgbmFtZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogVHlwZV9BdHRyaWJ1dGUubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFR5cGVfQXR0cmlidXRlLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfcmVtYXJrOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIHJlbWFyaygpOw0KICAgICAgICAgICAgVHlwZV9BdHRyaWJ1dGUmIHJlbWFyayhzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogVHlwZV9BdHRyaWJ1dGUucmVtYXJrIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVHlwZV9BdHRyaWJ1dGUuZGV2aWNlVHlwZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlKiBfZGV2aWNlVHlwZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlJiBkZXZpY2VUeXBlKCk7DQogICAgICAgICAgICBUeXBlX0F0dHJpYnV0ZSYgZGV2aWNlVHlwZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlJiB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogVHlwZV9BdHRyaWJ1dGUuZGV2aWNlVHlwZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQoNCiAgICANCg0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBUeXBlX0F0dHJpYnV0ZSYgX3VuaXF1ZSgpOw0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX3RvRG9jdW1lbnQoKTsNCiAgICAgICAgICAgIFR5cGVfQXR0cmlidXRlJiBfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iaik7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGUmIHN0b3JlKCk7DQogICAgDQogICAgICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGUmPiBmaW5kQWxsKCk7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGUmIGZpbmQoKTsNCiAgICANCiAgICB9Ow0KICAgIA0KICAgIGNsYXNzIE1ldHJpY3sNCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgTWV0cmljKCl7DQogICAgICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAgICAgfk1ldHJpYygpew0KICAgICAgICAgICAgICAgIC8vIGZvciBldmVyeSAibmV3IiB0aGVyZSBtdXN0IGJlIGEgImRlbGV0ZSINCiAgICAgICAgICAgIH0NCg0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWMuYWN0aXZlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2FjdGl2ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBib29sIGFjdGl2ZSgpOw0KICAgICAgICAgICAgTWV0cmljJiBhY3RpdmUoYm9vbCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpYy5lbmFibGVkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2VuYWJsZWQ7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBlbmFibGVkKCk7DQogICAgICAgICAgICBNZXRyaWMmIGVuYWJsZWQoYm9vbCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljLmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWMuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfY29kZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBjb2RlKCk7DQogICAgICAgICAgICBNZXRyaWMmIGNvZGUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpYy5jb2RlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljLm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGludCBfb3JkZXI7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgaW50IG9yZGVyKCk7DQogICAgICAgICAgICBNZXRyaWMmIG9yZGVyKGludCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljLm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljLmRhdGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgdGltZV90IF9kYXRlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHRpbWVfdCBkYXRlKCk7DQogICAgICAgICAgICBNZXRyaWMmIGRhdGUodGltZV90IHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWMuZGF0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpYy5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9uYW1lOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIG5hbWUoKTsNCiAgICAgICAgICAgIE1ldHJpYyYgbmFtZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljLm5hbWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWMucmVtYXJrIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9yZW1hcms7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgcmVtYXJrKCk7DQogICAgICAgICAgICBNZXRyaWMmIHJlbWFyayhzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpYy5zY3JpcHQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX3NjcmlwdDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBzY3JpcHQoKTsNCiAgICAgICAgICAgIE1ldHJpYyYgc2NyaXB0KHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWMuc2NyaXB0IEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljLnR5cGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZSogX3R5cGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZSYgdHlwZSgpOw0KICAgICAgICAgICAgTWV0cmljJiB0eXBlKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGUmIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWMudHlwZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpYy5kZXZpY2VUeXBlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGUqIF9kZXZpY2VUeXBlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGUmIGRldmljZVR5cGUoKTsNCiAgICAgICAgICAgIE1ldHJpYyYgZGV2aWNlVHlwZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlJiB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljLmRldmljZVR5cGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KDQogICAgDQoNCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgTWV0cmljJiBfdW5pcXVlKCk7DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfdG9Eb2N1bWVudCgpOw0KICAgICAgICAgICAgTWV0cmljJiBfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iaik7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljJiBzdG9yZSgpOw0KICAgIA0KICAgICAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYyY+IGZpbmRBbGwoKTsNCiAgICANCiAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWMmIGZpbmQoKTsNCiAgICANCiAgICB9Ow0KICAgIA0KICAgIGNsYXNzIERldmljZXsNCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgRGV2aWNlKCl7DQogICAgICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAgICAgfkRldmljZSgpew0KICAgICAgICAgICAgICAgIC8vIGZvciBldmVyeSAibmV3IiB0aGVyZSBtdXN0IGJlIGEgImRlbGV0ZSINCiAgICAgICAgICAgIH0NCg0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2UuYWN0aXZlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2FjdGl2ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBib29sIGFjdGl2ZSgpOw0KICAgICAgICAgICAgRGV2aWNlJiBhY3RpdmUoYm9vbCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZS5lbmFibGVkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2VuYWJsZWQ7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBlbmFibGVkKCk7DQogICAgICAgICAgICBEZXZpY2UmIGVuYWJsZWQoYm9vbCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlLmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2UuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfY29kZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBjb2RlKCk7DQogICAgICAgICAgICBEZXZpY2UmIGNvZGUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZS5jb2RlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlLm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGludCBfb3JkZXI7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgaW50IG9yZGVyKCk7DQogICAgICAgICAgICBEZXZpY2UmIG9yZGVyKGludCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlLm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlLmRhdGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgdGltZV90IF9kYXRlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHRpbWVfdCBkYXRlKCk7DQogICAgICAgICAgICBEZXZpY2UmIGRhdGUodGltZV90IHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2UuZGF0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZS5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9uYW1lOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIG5hbWUoKTsNCiAgICAgICAgICAgIERldmljZSYgbmFtZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlLm5hbWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2UucmVtYXJrIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9yZW1hcms7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgcmVtYXJrKCk7DQogICAgICAgICAgICBEZXZpY2UmIHJlbWFyayhzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZS50eXBlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGUqIF90eXBlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGUmIHR5cGUoKTsNCiAgICAgICAgICAgIERldmljZSYgdHlwZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlJiB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlLnR5cGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2UuY29udHJvbGxlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUqIF9jb250cm9sbGVyOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgY29udHJvbGxlcigpOw0KICAgICAgICAgICAgRGV2aWNlJiBjb250cm9sbGVyKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZS5jb250cm9sbGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCg0KICAgIA0KDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIERldmljZSYgX3VuaXF1ZSgpOw0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX3RvRG9jdW1lbnQoKTsNCiAgICAgICAgICAgIERldmljZSYgX2Zyb21Eb2N1bWVudChzdGQ6OnN0cmluZyBvYmopOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZSYgc3RvcmUoKTsNCiAgICANCiAgICAgICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2UmPiBmaW5kQWxsKCk7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlJiBmaW5kKCk7DQogICAgDQogICAgfTsNCiAgICANCiAgICBjbGFzcyBEZXZpY2VfQXR0cmlidXRlew0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBEZXZpY2VfQXR0cmlidXRlKCl7DQogICAgICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAgICAgfkRldmljZV9BdHRyaWJ1dGUoKXsNCiAgICAgICAgICAgICAgICAvLyBmb3IgZXZlcnkgIm5ldyIgdGhlcmUgbXVzdCBiZSBhICJkZWxldGUiDQogICAgICAgICAgICB9DQoNCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0F0dHJpYnV0ZS5hY3RpdmUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgYm9vbCBfYWN0aXZlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIGJvb2wgYWN0aXZlKCk7DQogICAgICAgICAgICBEZXZpY2VfQXR0cmlidXRlJiBhY3RpdmUoYm9vbCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0F0dHJpYnV0ZS5hY3RpdmUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfQXR0cmlidXRlLmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgYm9vbCBfZW5hYmxlZDsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBib29sIGVuYWJsZWQoKTsNCiAgICAgICAgICAgIERldmljZV9BdHRyaWJ1dGUmIGVuYWJsZWQoYm9vbCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0F0dHJpYnV0ZS5lbmFibGVkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0F0dHJpYnV0ZS5jb2RlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9jb2RlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIGNvZGUoKTsNCiAgICAgICAgICAgIERldmljZV9BdHRyaWJ1dGUmIGNvZGUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9BdHRyaWJ1dGUuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9BdHRyaWJ1dGUub3JkZXIgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgaW50IF9vcmRlcjsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBpbnQgb3JkZXIoKTsNCiAgICAgICAgICAgIERldmljZV9BdHRyaWJ1dGUmIG9yZGVyKGludCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0F0dHJpYnV0ZS5vcmRlciBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9BdHRyaWJ1dGUuZGF0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICB0aW1lX3QgX2RhdGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgdGltZV90IGRhdGUoKTsNCiAgICAgICAgICAgIERldmljZV9BdHRyaWJ1dGUmIGRhdGUodGltZV90IHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfQXR0cmlidXRlLmRhdGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfQXR0cmlidXRlLm5hbWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX25hbWU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgbmFtZSgpOw0KICAgICAgICAgICAgRGV2aWNlX0F0dHJpYnV0ZSYgbmFtZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0F0dHJpYnV0ZS5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0F0dHJpYnV0ZS5yZW1hcmsgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgX3JlbWFyazsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyByZW1hcmsoKTsNCiAgICAgICAgICAgIERldmljZV9BdHRyaWJ1dGUmIHJlbWFyayhzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogRGV2aWNlX0F0dHJpYnV0ZS5yZW1hcmsgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfQXR0cmlidXRlLnZhbHVlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF92YWx1ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyB2YWx1ZSgpOw0KICAgICAgICAgICAgRGV2aWNlX0F0dHJpYnV0ZSYgdmFsdWUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9BdHRyaWJ1dGUudmFsdWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfQXR0cmlidXRlLmRldmljZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZSogX2RldmljZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZSYgZGV2aWNlKCk7DQogICAgICAgICAgICBEZXZpY2VfQXR0cmlidXRlJiBkZXZpY2UoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2UmIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBEZXZpY2VfQXR0cmlidXRlLmRldmljZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9BdHRyaWJ1dGUuYXR0cmlidXRlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGUqIF9hdHRyaWJ1dGU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZSYgYXR0cmlidXRlKCk7DQogICAgICAgICAgICBEZXZpY2VfQXR0cmlidXRlJiBhdHRyaWJ1dGUoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZSYgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIERldmljZV9BdHRyaWJ1dGUuYXR0cmlidXRlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCg0KICAgIA0KDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIERldmljZV9BdHRyaWJ1dGUmIF91bmlxdWUoKTsNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF90b0RvY3VtZW50KCk7DQogICAgICAgICAgICBEZXZpY2VfQXR0cmlidXRlJiBfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iaik7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZSYgc3RvcmUoKTsNCiAgICANCiAgICAgICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlJj4gZmluZEFsbCgpOw0KICAgIA0KICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGUmIGZpbmQoKTsNCiAgICANCiAgICB9Ow0KICAgIA0KICAgIGNsYXNzIE1ldHJpY19WYWx1ZXsNCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgTWV0cmljX1ZhbHVlKCl7DQogICAgICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAgICAgfk1ldHJpY19WYWx1ZSgpew0KICAgICAgICAgICAgICAgIC8vIGZvciBldmVyeSAibmV3IiB0aGVyZSBtdXN0IGJlIGEgImRlbGV0ZSINCiAgICAgICAgICAgIH0NCg0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfVmFsdWUuYWN0aXZlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2FjdGl2ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBib29sIGFjdGl2ZSgpOw0KICAgICAgICAgICAgTWV0cmljX1ZhbHVlJiBhY3RpdmUoYm9vbCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX1ZhbHVlLmFjdGl2ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19WYWx1ZS5lbmFibGVkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2VuYWJsZWQ7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBlbmFibGVkKCk7DQogICAgICAgICAgICBNZXRyaWNfVmFsdWUmIGVuYWJsZWQoYm9vbCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX1ZhbHVlLmVuYWJsZWQgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfVmFsdWUuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfY29kZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBjb2RlKCk7DQogICAgICAgICAgICBNZXRyaWNfVmFsdWUmIGNvZGUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19WYWx1ZS5jb2RlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX1ZhbHVlLm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGludCBfb3JkZXI7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgaW50IG9yZGVyKCk7DQogICAgICAgICAgICBNZXRyaWNfVmFsdWUmIG9yZGVyKGludCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX1ZhbHVlLm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX1ZhbHVlLmRhdGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgdGltZV90IF9kYXRlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHRpbWVfdCBkYXRlKCk7DQogICAgICAgICAgICBNZXRyaWNfVmFsdWUmIGRhdGUodGltZV90IHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfVmFsdWUuZGF0ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19WYWx1ZS5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9uYW1lOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIG5hbWUoKTsNCiAgICAgICAgICAgIE1ldHJpY19WYWx1ZSYgbmFtZShzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX1ZhbHVlLm5hbWUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfVmFsdWUucmVtYXJrIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9yZW1hcms7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgcmVtYXJrKCk7DQogICAgICAgICAgICBNZXRyaWNfVmFsdWUmIHJlbWFyayhzdGQ6OnN0cmluZyB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX1ZhbHVlLnJlbWFyayBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19WYWx1ZS52YWx1ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfdmFsdWU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgdmFsdWUoKTsNCiAgICAgICAgICAgIE1ldHJpY19WYWx1ZSYgdmFsdWUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19WYWx1ZS52YWx1ZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19WYWx1ZS5tZWFzdXJlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICB0aW1lX3QgX21lYXN1cmVkOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHRpbWVfdCBtZWFzdXJlZCgpOw0KICAgICAgICAgICAgTWV0cmljX1ZhbHVlJiBtZWFzdXJlZCh0aW1lX3Qgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19WYWx1ZS5tZWFzdXJlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19WYWx1ZS5tZXRyaWMgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWMqIF9tZXRyaWM7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWMmIG1ldHJpYygpOw0KICAgICAgICAgICAgTWV0cmljX1ZhbHVlJiBtZXRyaWMoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWMmIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBNZXRyaWNfVmFsdWUubWV0cmljIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogTWV0cmljX1ZhbHVlLmRldmljZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZSogX2RldmljZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZSYgZGV2aWNlKCk7DQogICAgICAgICAgICBNZXRyaWNfVmFsdWUmIGRldmljZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZSYgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIE1ldHJpY19WYWx1ZS5kZXZpY2UgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KDQogICAgDQoNCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgTWV0cmljX1ZhbHVlJiBfdW5pcXVlKCk7DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfdG9Eb2N1bWVudCgpOw0KICAgICAgICAgICAgTWV0cmljX1ZhbHVlJiBfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iaik7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlJiBzdG9yZSgpOw0KICAgIA0KICAgICAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZSY+IGZpbmRBbGwoKTsNCiAgICANCiAgICAgICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWUmIGZpbmQoKTsNCiAgICANCiAgICB9Ow0KICAgIA0KfQoJCn0KCQp9CgkKfQoJDQoNCm5hbWVzcGFjZSBlc3B0ZXN0ewoJDQogICAgDQogICAgY2xhc3MgVXNlcnsNCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgVXNlcigpew0KICAgICAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgICAgIH5Vc2VyKCl7DQogICAgICAgICAgICAgICAgLy8gZm9yIGV2ZXJ5ICJuZXciIHRoZXJlIG11c3QgYmUgYSAiZGVsZXRlIg0KICAgICAgICAgICAgfQ0KDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFVzZXIuYWN0aXZlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2FjdGl2ZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBib29sIGFjdGl2ZSgpOw0KICAgICAgICAgICAgVXNlciYgYWN0aXZlKGJvb2wgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIFVzZXIuYWN0aXZlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVXNlci5lbmFibGVkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGJvb2wgX2VuYWJsZWQ7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgYm9vbCBlbmFibGVkKCk7DQogICAgICAgICAgICBVc2VyJiBlbmFibGVkKGJvb2wgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIFVzZXIuZW5hYmxlZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFVzZXIuY29kZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfY29kZTsNCiAgICAgICAgICAgIA0KICAgICAgICBwdWJsaWM6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBjb2RlKCk7DQogICAgICAgICAgICBVc2VyJiBjb2RlKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBVc2VyLmNvZGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBVc2VyLm9yZGVyIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIGludCBfb3JkZXI7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgaW50IG9yZGVyKCk7DQogICAgICAgICAgICBVc2VyJiBvcmRlcihpbnQgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIFVzZXIub3JkZXIgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgIA0KICAgICAgICAvKioqKioqKioqKioqKiBVc2VyLmRhdGUgR0VUVEVSUyBBTkQgU0VUVEVSUyAqKioqKioqKioqKioqKioqKioqKioqLw0KICAgICAgICBwcml2YXRlOg0KICAgICAgICAgICAgdGltZV90IF9kYXRlOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHRpbWVfdCBkYXRlKCk7DQogICAgICAgICAgICBVc2VyJiBkYXRlKHRpbWVfdCB2KTsNCiAgICAgICAgLyoqKioqKioqKioqKiogVXNlci5kYXRlIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVXNlci5uYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9uYW1lOw0KICAgICAgICAgICAgDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIG5hbWUoKTsNCiAgICAgICAgICAgIFVzZXImIG5hbWUoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIFVzZXIubmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgDQogICAgICAgIC8qKioqKioqKioqKioqIFVzZXIucmVtYXJrIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICAgICAgcHJpdmF0ZToNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF9yZW1hcms7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgcmVtYXJrKCk7DQogICAgICAgICAgICBVc2VyJiByZW1hcmsoc3RkOjpzdHJpbmcgdik7DQogICAgICAgIC8qKioqKioqKioqKioqIFVzZXIucmVtYXJrIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVXNlci51c2VybmFtZSBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfdXNlcm5hbWU7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgdXNlcm5hbWUoKTsNCiAgICAgICAgICAgIFVzZXImIHVzZXJuYW1lKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBVc2VyLnVzZXJuYW1lIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCiAgICAgICAgLyoqKioqKioqKioqKiogVXNlci5wYXNzd29yZCBHRVRURVJTIEFORCBTRVRURVJTICoqKioqKioqKioqKioqKioqKioqKiovDQogICAgICAgIHByaXZhdGU6DQogICAgICAgICAgICBzdGQ6OnN0cmluZyBfcGFzc3dvcmQ7DQogICAgICAgICAgICANCiAgICAgICAgcHVibGljOg0KICAgICAgICAgICAgc3RkOjpzdHJpbmcgcGFzc3dvcmQoKTsNCiAgICAgICAgICAgIFVzZXImIHBhc3N3b3JkKHN0ZDo6c3RyaW5nIHYpOw0KICAgICAgICAvKioqKioqKioqKioqKiBVc2VyLnBhc3N3b3JkIEdFVFRFUlMgQU5EIFNFVFRFUlMgKioqKioqKioqKioqKioqKioqKioqKi8NCiAgICANCg0KICAgIA0KDQogICAgICAgIHB1YmxpYzoNCiAgICAgICAgICAgIFVzZXImIF91bmlxdWUoKTsNCiAgICAgICAgICAgIHN0ZDo6c3RyaW5nIF90b0RvY3VtZW50KCk7DQogICAgICAgICAgICBVc2VyJiBfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iaik7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OlVzZXImIHN0b3JlKCk7DQogICAgDQogICAgICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OlVzZXImPiBmaW5kQWxsKCk7DQogICAgDQogICAgICAgIGVzcHRlc3Q6OlVzZXImIGZpbmQoKTsNCiAgICANCiAgICAgICAgdm9pZCBpbml0KCk7DQogICAgDQogICAgfTsNCiAgICANCn0KCQ0KDQovKioqKioqKioqKioqKiBIZWFkZXIgRmlsZSBFTkQgKioqKioqKioqKioqKioqKioqKioqKi8NCg0KDQp1c2luZyBqc29uID0gbmxvaG1hbm46Ompzb247DQoNCnN0YXRpYyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIG5vZGUgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSgpKS0+Y29kZSgiYWJjIikuYWN0aXZlKHRydWUpLmVuYWJsZWQodHJ1ZSk7DQoNCg0KICAgIA0KDQplc3B0ZXN0OjpVc2VyJiBlc3B0ZXN0OjpVc2VyOjphY3RpdmUoYm9vbCB2KXsNCiAgICB0aGlzLT5fYWN0aXZlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmJvb2wgZXNwdGVzdDo6VXNlcjo6YWN0aXZlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9hY3RpdmU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OlVzZXImIGVzcHRlc3Q6OlVzZXI6OmVuYWJsZWQoYm9vbCB2KXsNCiAgICB0aGlzLT5fZW5hYmxlZCA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpib29sIGVzcHRlc3Q6OlVzZXI6OmVuYWJsZWQoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2VuYWJsZWQ7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OlVzZXImIGVzcHRlc3Q6OlVzZXI6OmNvZGUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X2NvZGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6VXNlcjo6Y29kZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fY29kZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6VXNlciYgZXNwdGVzdDo6VXNlcjo6b3JkZXIoaW50IHYpew0KICAgIHRoaXMtPl9vcmRlciA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQppbnQgZXNwdGVzdDo6VXNlcjo6b3JkZXIoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X29yZGVyOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0OjpVc2VyJiBlc3B0ZXN0OjpVc2VyOjpkYXRlKHRpbWVfdCB2KXsNCiAgICB0aGlzLT5fZGF0ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQp0aW1lX3QgZXNwdGVzdDo6VXNlcjo6ZGF0ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fZGF0ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6VXNlciYgZXNwdGVzdDo6VXNlcjo6bmFtZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fbmFtZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0OjpVc2VyOjpuYW1lKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9uYW1lOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0OjpVc2VyJiBlc3B0ZXN0OjpVc2VyOjpyZW1hcmsoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X3JlbWFyayA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0OjpVc2VyOjpyZW1hcmsoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3JlbWFyazsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6VXNlciYgZXNwdGVzdDo6VXNlcjo6dXNlcm5hbWUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X3VzZXJuYW1lID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OlVzZXI6OnVzZXJuYW1lKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl91c2VybmFtZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6VXNlciYgZXNwdGVzdDo6VXNlcjo6cGFzc3dvcmQoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X3Bhc3N3b3JkID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OlVzZXI6OnBhc3N3b3JkKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9wYXNzd29yZDsNCiAgICANCn0NCiAgICANCg0KICAgIA0KDQoNCmVzcHRlc3Q6OlVzZXImIGVzcHRlc3Q6OlVzZXI6Ol91bmlxdWUoKXsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmVzcHRlc3Q6OlVzZXImIGVzcHRlc3Q6OlVzZXI6Ol9mcm9tRG9jdW1lbnQoc3RkOjpzdHJpbmcgb2JqKXsNCiAgICBqc29uIGRhdGEgPSBqc29uOjpwYXJzZShvYmopOw0KICAgIA0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6VXNlcjo6X3RvRG9jdW1lbnQoKXsNCiAgICByZXR1cm4gIiI7DQp9DQoNCiAgICANCi8qDQogICAgaWYoX19ldmVudC5yZXNwb25zZVRvKCkpew0KICAgICAgICBjb3V0IDw8IF9fdG9TdHJpbmcgKyAiYSByZXNwb25zZSB0byBteSBldmVudCI7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uVXNlci5zdG9yZSgpIikubWV0aG9kKCJzdG9yZSIpLmNsYXNzTmFtZSgiVXNlciIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKS5yZXNwb25zZVRvKF9fZXZlbnQuX3VuaXF1ZSgpKTsNCg0KICAgIGVzcHRlc3Q6OlVzZXIqIGFuc3dlcjsNCiAgICANCiAgICBqc29uIGV2SlNPTiA9IGV2SlNPTiA9IGpzb246OnBhcnNlKF9fZXZlbnQtPnBheWxvYWQoKSk7DQogICAgaWYoZXZKU09OWyJfX3RoaXMiXSkgdGhpcy0+X2Zyb21Eb2N1bWVudChldkpTT05bIl9fdGhpcyJdKTsNCiAgICANCg0KICAgIA0KICAgIA0KICAgIGlmKGFuc3dlcil7DQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXIuX3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gYW5zd2VyOw0KKi8NCmVzcHRlc3Q6OlVzZXImIGVzcHRlc3Q6OlVzZXI6OnN0b3JlKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJVc2VyOjpzdG9yZSgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Vc2VyLnN0b3JlKCkiKS5tZXRob2QoInN0b3JlIikuY2xhc3NOYW1lKCJVc2VyIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6VXNlciogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KICAgIA0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KLyoNCiAgICBpZihfX2V2ZW50LnJlc3BvbnNlVG8oKSl7DQogICAgICAgIGNvdXQgPDwgX190b1N0cmluZyArICJhIHJlc3BvbnNlIHRvIG15IGV2ZW50IjsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Vc2VyLmZpbmRBbGwoKSIpLm1ldGhvZCgiZmluZEFsbCIpLmNsYXNzTmFtZSgiVXNlciIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKS5yZXNwb25zZVRvKF9fZXZlbnQuX3VuaXF1ZSgpKTsNCg0KICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OlVzZXIqPiBhbnN3ZXI7DQogICAgDQogICAganNvbiBldkpTT04gPSBldkpTT04gPSBqc29uOjpwYXJzZShfX2V2ZW50LT5wYXlsb2FkKCkpOw0KICAgIGlmKGV2SlNPTlsiX190aGlzIl0pIHRoaXMtPl9mcm9tRG9jdW1lbnQoZXZKU09OWyJfX3RoaXMiXSk7DQogICAgDQoNCiAgICANCiAgICANCiAgICBpZihhbnN3ZXIpew0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuIGFuc3dlcjsNCiovDQpzdGQ6OnZlY3Rvcjxlc3B0ZXN0OjpVc2VyJj4gZXNwdGVzdDo6VXNlcjo6ZmluZEFsbCgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiVXNlcjo6ZmluZEFsbCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Vc2VyLmZpbmRBbGwoKSIpLm1ldGhvZCgiZmluZEFsbCIpLmNsYXNzTmFtZSgiVXNlciIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKTsNCg0KICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OlVzZXIqPiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlci5lbXB0eSgpKXsNCiAgICANCg0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCiAgICANCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCi8qDQogICAgaWYoX19ldmVudC5yZXNwb25zZVRvKCkpew0KICAgICAgICBjb3V0IDw8IF9fdG9TdHJpbmcgKyAiYSByZXNwb25zZSB0byBteSBldmVudCI7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uVXNlci5maW5kKCkiKS5tZXRob2QoImZpbmQiKS5jbGFzc05hbWUoIlVzZXIiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSkucmVzcG9uc2VUbyhfX2V2ZW50Ll91bmlxdWUoKSk7DQoNCiAgICBlc3B0ZXN0OjpVc2VyKiBhbnN3ZXI7DQogICAgDQogICAganNvbiBldkpTT04gPSBldkpTT04gPSBqc29uOjpwYXJzZShfX2V2ZW50LT5wYXlsb2FkKCkpOw0KICAgIGlmKGV2SlNPTlsiX190aGlzIl0pIHRoaXMtPl9mcm9tRG9jdW1lbnQoZXZKU09OWyJfX3RoaXMiXSk7DQogICAgDQoNCiAgICANCiAgICANCiAgICBpZihhbnN3ZXIpew0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuIGFuc3dlcjsNCiovDQplc3B0ZXN0OjpVc2VyJiBlc3B0ZXN0OjpVc2VyOjpmaW5kKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJVc2VyOjpmaW5kKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLlVzZXIuZmluZCgpIikubWV0aG9kKCJmaW5kIikuY2xhc3NOYW1lKCJVc2VyIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6VXNlciogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KICAgIA0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KLyoNCiAgICBpZihfX2V2ZW50LnJlc3BvbnNlVG8oKSl7DQogICAgICAgIGNvdXQgPDwgX190b1N0cmluZyArICJhIHJlc3BvbnNlIHRvIG15IGV2ZW50IjsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Vc2VyLmluaXQoKSIpLm1ldGhvZCgiaW5pdCIpLmNsYXNzTmFtZSgiVXNlciIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKS5yZXNwb25zZVRvKF9fZXZlbnQuX3VuaXF1ZSgpKTsNCg0KICAgIHZvaWQgYW5zd2VyOw0KICAgIA0KICAgIGpzb24gZXZKU09OID0gZXZKU09OID0ganNvbjo6cGFyc2UoX19ldmVudC0+cGF5bG9hZCgpKTsNCiAgICBpZihldkpTT05bIl9fdGhpcyJdKSB0aGlzLT5fZnJvbURvY3VtZW50KGV2SlNPTlsiX190aGlzIl0pOw0KICAgIA0KDQogICAgDQogICAgDQogICAgaWYoYW5zd2VyKXsNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKChzdGQ6OnN0cmluZylhbnN3ZXIpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuIGFuc3dlcjsNCiovDQp2b2lkIGVzcHRlc3Q6OlVzZXI6OmluaXQoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIlVzZXI6OmluaXQoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uVXNlci5pbml0KCkiKS5tZXRob2QoImluaXQiKS5jbGFzc05hbWUoIlVzZXIiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSk7DQoNCiAgICB2b2lkIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoKHN0ZDo6c3RyaW5nKWFuc3dlcik7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQogICAgDQogICAgcmV0dXJuIGFuc3dlcjsNCn0NCiAgICANCg0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWM6OmFjdGl2ZShib29sIHYpew0KICAgIHRoaXMtPl9hY3RpdmUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KYm9vbCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYzo6YWN0aXZlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9hY3RpdmU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYzo6ZW5hYmxlZChib29sIHYpew0KICAgIHRoaXMtPl9lbmFibGVkID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmJvb2wgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWM6OmVuYWJsZWQoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2VuYWJsZWQ7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYzo6Y29kZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fY29kZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYzo6Y29kZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fY29kZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWMmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljOjpvcmRlcihpbnQgdil7DQogICAgdGhpcy0+X29yZGVyID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmludCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYzo6b3JkZXIoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X29yZGVyOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWM6OmRhdGUodGltZV90IHYpew0KICAgIHRoaXMtPl9kYXRlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnRpbWVfdCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYzo6ZGF0ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fZGF0ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWMmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljOjpuYW1lKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9uYW1lID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljOjpuYW1lKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9uYW1lOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWM6OnJlbWFyayhzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fcmVtYXJrID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljOjpyZW1hcmsoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3JlbWFyazsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWMmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljOjpzY3JpcHQoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X3NjcmlwdCA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYzo6c2NyaXB0KCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9zY3JpcHQ7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYzo6dHlwZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19UeXBlJiB2KXsNCiAgICB0aGlzLT5fdHlwZSA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWM6OnR5cGUoKXsNCiAgICANCiAgICByZXR1cm4gKih0aGlzLT5fdHlwZSk7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYzo6ZGV2aWNlVHlwZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlJiB2KXsNCiAgICB0aGlzLT5fZGV2aWNlVHlwZSA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWM6OmRldmljZVR5cGUoKXsNCiAgICANCiAgICByZXR1cm4gKih0aGlzLT5fZGV2aWNlVHlwZSk7DQogICAgDQp9DQogICAgDQoNCiAgICANCg0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWM6Ol91bmlxdWUoKXsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYzo6X2Zyb21Eb2N1bWVudChzdGQ6OnN0cmluZyBvYmopew0KICAgIGpzb24gZGF0YSA9IGpzb246OnBhcnNlKG9iaik7DQogICAgDQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYzo6X3RvRG9jdW1lbnQoKXsNCiAgICByZXR1cm4gIiI7DQp9DQoNCiAgICANCi8qDQogICAgaWYoX19ldmVudC5yZXNwb25zZVRvKCkpew0KICAgICAgICBjb3V0IDw8IF9fdG9TdHJpbmcgKyAiYSByZXNwb25zZSB0byBteSBldmVudCI7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uTWV0cmljLnN0b3JlKCkiKS5tZXRob2QoInN0b3JlIikuY2xhc3NOYW1lKCJNZXRyaWMiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSkucmVzcG9uc2VUbyhfX2V2ZW50Ll91bmlxdWUoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYyogYW5zd2VyOw0KICAgIA0KICAgIGpzb24gZXZKU09OID0gZXZKU09OID0ganNvbjo6cGFyc2UoX19ldmVudC0+cGF5bG9hZCgpKTsNCiAgICBpZihldkpTT05bIl9fdGhpcyJdKSB0aGlzLT5fZnJvbURvY3VtZW50KGV2SlNPTlsiX190aGlzIl0pOw0KICAgIA0KDQogICAgDQogICAgDQogICAgaWYoYW5zd2VyKXsNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiBhbnN3ZXI7DQoqLw0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWMmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljOjpzdG9yZSgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiTWV0cmljOjpzdG9yZSgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5NZXRyaWMuc3RvcmUoKSIpLm1ldGhvZCgic3RvcmUiKS5jbGFzc05hbWUoIk1ldHJpYyIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljKiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlciE9bnVsbHB0cil7DQogICAgDQoNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQogICAgDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQovKg0KICAgIGlmKF9fZXZlbnQucmVzcG9uc2VUbygpKXsNCiAgICAgICAgY291dCA8PCBfX3RvU3RyaW5nICsgImEgcmVzcG9uc2UgdG8gbXkgZXZlbnQiOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLk1ldHJpYy5maW5kQWxsKCkiKS5tZXRob2QoImZpbmRBbGwiKS5jbGFzc05hbWUoIk1ldHJpYyIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKS5yZXNwb25zZVRvKF9fZXZlbnQuX3VuaXF1ZSgpKTsNCg0KICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljKj4gYW5zd2VyOw0KICAgIA0KICAgIGpzb24gZXZKU09OID0gZXZKU09OID0ganNvbjo6cGFyc2UoX19ldmVudC0+cGF5bG9hZCgpKTsNCiAgICBpZihldkpTT05bIl9fdGhpcyJdKSB0aGlzLT5fZnJvbURvY3VtZW50KGV2SlNPTlsiX190aGlzIl0pOw0KICAgIA0KDQogICAgDQogICAgDQogICAgaWYoYW5zd2VyKXsNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiBhbnN3ZXI7DQoqLw0Kc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWMmPiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYzo6ZmluZEFsbCgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiTWV0cmljOjpmaW5kQWxsKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLk1ldHJpYy5maW5kQWxsKCkiKS5tZXRob2QoImZpbmRBbGwiKS5jbGFzc05hbWUoIk1ldHJpYyIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKTsNCg0KICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljKj4gYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIuZW1wdHkoKSl7DQogICAgDQoNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQogICAgDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQovKg0KICAgIGlmKF9fZXZlbnQucmVzcG9uc2VUbygpKXsNCiAgICAgICAgY291dCA8PCBfX3RvU3RyaW5nICsgImEgcmVzcG9uc2UgdG8gbXkgZXZlbnQiOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLk1ldHJpYy5maW5kKCkiKS5tZXRob2QoImZpbmQiKS5jbGFzc05hbWUoIk1ldHJpYyIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKS5yZXNwb25zZVRvKF9fZXZlbnQuX3VuaXF1ZSgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljKiBhbnN3ZXI7DQogICAgDQogICAganNvbiBldkpTT04gPSBldkpTT04gPSBqc29uOjpwYXJzZShfX2V2ZW50LT5wYXlsb2FkKCkpOw0KICAgIGlmKGV2SlNPTlsiX190aGlzIl0pIHRoaXMtPl9mcm9tRG9jdW1lbnQoZXZKU09OWyJfX3RoaXMiXSk7DQogICAgDQoNCiAgICANCiAgICANCiAgICBpZihhbnN3ZXIpew0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuIGFuc3dlcjsNCiovDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWM6OmZpbmQoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIk1ldHJpYzo6ZmluZCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5NZXRyaWMuZmluZCgpIikubWV0aG9kKCJmaW5kIikuY2xhc3NOYW1lKCJNZXRyaWMiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYyogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KICAgIA0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KDQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZTo6YWN0aXZlKGJvb2wgdil7DQogICAgdGhpcy0+X2FjdGl2ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlOjphY3RpdmUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2FjdGl2ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlOjplbmFibGVkKGJvb2wgdil7DQogICAgdGhpcy0+X2VuYWJsZWQgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KYm9vbCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZTo6ZW5hYmxlZCgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fZW5hYmxlZDsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlOjpjb2RlKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9jb2RlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlOjpjb2RlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9jb2RlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWU6Om9yZGVyKGludCB2KXsNCiAgICB0aGlzLT5fb3JkZXIgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KaW50IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlOjpvcmRlcigpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fb3JkZXI7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZTo6ZGF0ZSh0aW1lX3Qgdil7DQogICAgdGhpcy0+X2RhdGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KdGltZV90IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlOjpkYXRlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9kYXRlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWU6Om5hbWUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X25hbWUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWU6Om5hbWUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X25hbWU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZTo6cmVtYXJrKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9yZW1hcmsgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWU6OnJlbWFyaygpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fcmVtYXJrOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWU6OnZhbHVlKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl92YWx1ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZTo6dmFsdWUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3ZhbHVlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWU6Om1lYXN1cmVkKHRpbWVfdCB2KXsNCiAgICB0aGlzLT5fbWVhc3VyZWQgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KdGltZV90IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlOjptZWFzdXJlZCgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fbWVhc3VyZWQ7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZTo6bWV0cmljKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljJiB2KXsNCiAgICB0aGlzLT5fbWV0cmljID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpYyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWU6Om1ldHJpYygpew0KICAgIA0KICAgIHJldHVybiAqKHRoaXMtPl9tZXRyaWMpOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWU6OmRldmljZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZSYgdil7DQogICAgdGhpcy0+X2RldmljZSA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2UmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlOjpkZXZpY2UoKXsNCiAgICANCiAgICByZXR1cm4gKih0aGlzLT5fZGV2aWNlKTsNCiAgICANCn0NCiAgICANCg0KICAgIA0KDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZTo6X3VuaXF1ZSgpew0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlOjpfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iail7DQogICAganNvbiBkYXRhID0ganNvbjo6cGFyc2Uob2JqKTsNCiAgICANCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlOjpfdG9Eb2N1bWVudCgpew0KICAgIHJldHVybiAiIjsNCn0NCg0KICAgIA0KLyoNCiAgICBpZihfX2V2ZW50LnJlc3BvbnNlVG8oKSl7DQogICAgICAgIGNvdXQgPDwgX190b1N0cmluZyArICJhIHJlc3BvbnNlIHRvIG15IGV2ZW50IjsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5NZXRyaWNfVmFsdWUuc3RvcmUoKSIpLm1ldGhvZCgic3RvcmUiKS5jbGFzc05hbWUoIk1ldHJpY19WYWx1ZSIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKS5yZXNwb25zZVRvKF9fZXZlbnQuX3VuaXF1ZSgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlKiBhbnN3ZXI7DQogICAgDQogICAganNvbiBldkpTT04gPSBldkpTT04gPSBqc29uOjpwYXJzZShfX2V2ZW50LT5wYXlsb2FkKCkpOw0KICAgIGlmKGV2SlNPTlsiX190aGlzIl0pIHRoaXMtPl9mcm9tRG9jdW1lbnQoZXZKU09OWyJfX3RoaXMiXSk7DQogICAgDQoNCiAgICANCiAgICANCiAgICBpZihhbnN3ZXIpew0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuIGFuc3dlcjsNCiovDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWU6OnN0b3JlKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJNZXRyaWNfVmFsdWU6OnN0b3JlKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLk1ldHJpY19WYWx1ZS5zdG9yZSgpIikubWV0aG9kKCJzdG9yZSIpLmNsYXNzTmFtZSgiTWV0cmljX1ZhbHVlIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWUqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCiAgICANCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCi8qDQogICAgaWYoX19ldmVudC5yZXNwb25zZVRvKCkpew0KICAgICAgICBjb3V0IDw8IF9fdG9TdHJpbmcgKyAiYSByZXNwb25zZSB0byBteSBldmVudCI7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uTWV0cmljX1ZhbHVlLmZpbmRBbGwoKSIpLm1ldGhvZCgiZmluZEFsbCIpLmNsYXNzTmFtZSgiTWV0cmljX1ZhbHVlIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpLnJlc3BvbnNlVG8oX19ldmVudC5fdW5pcXVlKCkpOw0KDQogICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWUqPiBhbnN3ZXI7DQogICAgDQogICAganNvbiBldkpTT04gPSBldkpTT04gPSBqc29uOjpwYXJzZShfX2V2ZW50LT5wYXlsb2FkKCkpOw0KICAgIGlmKGV2SlNPTlsiX190aGlzIl0pIHRoaXMtPl9mcm9tRG9jdW1lbnQoZXZKU09OWyJfX3RoaXMiXSk7DQogICAgDQoNCiAgICANCiAgICANCiAgICBpZihhbnN3ZXIpew0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuIGFuc3dlcjsNCiovDQpzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZSY+IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlOjpmaW5kQWxsKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJNZXRyaWNfVmFsdWU6OmZpbmRBbGwoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uTWV0cmljX1ZhbHVlLmZpbmRBbGwoKSIpLm1ldGhvZCgiZmluZEFsbCIpLmNsYXNzTmFtZSgiTWV0cmljX1ZhbHVlIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWUqPiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlci5lbXB0eSgpKXsNCiAgICANCg0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCiAgICANCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCi8qDQogICAgaWYoX19ldmVudC5yZXNwb25zZVRvKCkpew0KICAgICAgICBjb3V0IDw8IF9fdG9TdHJpbmcgKyAiYSByZXNwb25zZSB0byBteSBldmVudCI7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uTWV0cmljX1ZhbHVlLmZpbmQoKSIpLm1ldGhvZCgiZmluZCIpLmNsYXNzTmFtZSgiTWV0cmljX1ZhbHVlIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpLnJlc3BvbnNlVG8oX19ldmVudC5fdW5pcXVlKCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVmFsdWUqIGFuc3dlcjsNCiAgICANCiAgICBqc29uIGV2SlNPTiA9IGV2SlNPTiA9IGpzb246OnBhcnNlKF9fZXZlbnQtPnBheWxvYWQoKSk7DQogICAgaWYoZXZKU09OWyJfX3RoaXMiXSkgdGhpcy0+X2Zyb21Eb2N1bWVudChldkpTT05bIl9fdGhpcyJdKTsNCiAgICANCg0KICAgIA0KICAgIA0KICAgIGlmKGFuc3dlcil7DQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXIuX3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gYW5zd2VyOw0KKi8NCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19WYWx1ZTo6ZmluZCgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiTWV0cmljX1ZhbHVlOjpmaW5kKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLk1ldHJpY19WYWx1ZS5maW5kKCkiKS5tZXRob2QoImZpbmQiKS5jbGFzc05hbWUoIk1ldHJpY19WYWx1ZSIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1ZhbHVlKiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlciE9bnVsbHB0cil7DQogICAgDQoNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQogICAgDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQoNCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2UmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlOjphY3RpdmUoYm9vbCB2KXsNCiAgICB0aGlzLT5fYWN0aXZlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmJvb2wgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2U6OmFjdGl2ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fYWN0aXZlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2U6OmVuYWJsZWQoYm9vbCB2KXsNCiAgICB0aGlzLT5fZW5hYmxlZCA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlOjplbmFibGVkKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9lbmFibGVkOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2U6OmNvZGUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X2NvZGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2U6OmNvZGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2NvZGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZTo6b3JkZXIoaW50IHYpew0KICAgIHRoaXMtPl9vcmRlciA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQppbnQgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2U6Om9yZGVyKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9vcmRlcjsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2UmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlOjpkYXRlKHRpbWVfdCB2KXsNCiAgICB0aGlzLT5fZGF0ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQp0aW1lX3QgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2U6OmRhdGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2RhdGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZTo6bmFtZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fbmFtZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZTo6bmFtZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fbmFtZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2UmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlOjpyZW1hcmsoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X3JlbWFyayA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZTo6cmVtYXJrKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9yZW1hcms7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZTo6dHlwZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlJiB2KXsNCiAgICB0aGlzLT5fdHlwZSA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2U6OnR5cGUoKXsNCiAgICANCiAgICByZXR1cm4gKih0aGlzLT5fdHlwZSk7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZTo6Y29udHJvbGxlcihlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIHYpew0KICAgIHRoaXMtPl9jb250cm9sbGVyID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlOjpjb250cm9sbGVyKCl7DQogICAgDQogICAgcmV0dXJuICoodGhpcy0+X2NvbnRyb2xsZXIpOw0KICAgIA0KfQ0KICAgIA0KDQogICAgDQoNCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2UmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlOjpfdW5pcXVlKCl7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2U6Ol9mcm9tRG9jdW1lbnQoc3RkOjpzdHJpbmcgb2JqKXsNCiAgICBqc29uIGRhdGEgPSBqc29uOjpwYXJzZShvYmopOw0KICAgIA0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2U6Ol90b0RvY3VtZW50KCl7DQogICAgcmV0dXJuICIiOw0KfQ0KDQogICAgDQovKg0KICAgIGlmKF9fZXZlbnQucmVzcG9uc2VUbygpKXsNCiAgICAgICAgY291dCA8PCBfX3RvU3RyaW5nICsgImEgcmVzcG9uc2UgdG8gbXkgZXZlbnQiOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLkRldmljZS5zdG9yZSgpIikubWV0aG9kKCJzdG9yZSIpLmNsYXNzTmFtZSgiRGV2aWNlIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpLnJlc3BvbnNlVG8oX19ldmVudC5fdW5pcXVlKCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2UqIGFuc3dlcjsNCiAgICANCiAgICBqc29uIGV2SlNPTiA9IGV2SlNPTiA9IGpzb246OnBhcnNlKF9fZXZlbnQtPnBheWxvYWQoKSk7DQogICAgaWYoZXZKU09OWyJfX3RoaXMiXSkgdGhpcy0+X2Zyb21Eb2N1bWVudChldkpTT05bIl9fdGhpcyJdKTsNCiAgICANCg0KICAgIA0KICAgIA0KICAgIGlmKGFuc3dlcil7DQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXIuX3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gYW5zd2VyOw0KKi8NCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZTo6c3RvcmUoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIkRldmljZTo6c3RvcmUoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uRGV2aWNlLnN0b3JlKCkiKS5tZXRob2QoInN0b3JlIikuY2xhc3NOYW1lKCJEZXZpY2UiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZSogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KICAgIA0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KLyoNCiAgICBpZihfX2V2ZW50LnJlc3BvbnNlVG8oKSl7DQogICAgICAgIGNvdXQgPDwgX190b1N0cmluZyArICJhIHJlc3BvbnNlIHRvIG15IGV2ZW50IjsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5EZXZpY2UuZmluZEFsbCgpIikubWV0aG9kKCJmaW5kQWxsIikuY2xhc3NOYW1lKCJEZXZpY2UiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSkucmVzcG9uc2VUbyhfX2V2ZW50Ll91bmlxdWUoKSk7DQoNCiAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZSo+IGFuc3dlcjsNCiAgICANCiAgICBqc29uIGV2SlNPTiA9IGV2SlNPTiA9IGpzb246OnBhcnNlKF9fZXZlbnQtPnBheWxvYWQoKSk7DQogICAgaWYoZXZKU09OWyJfX3RoaXMiXSkgdGhpcy0+X2Zyb21Eb2N1bWVudChldkpTT05bIl9fdGhpcyJdKTsNCiAgICANCg0KICAgIA0KICAgIA0KICAgIGlmKGFuc3dlcil7DQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXIuX3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gYW5zd2VyOw0KKi8NCnN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlJj4gZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2U6OmZpbmRBbGwoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIkRldmljZTo6ZmluZEFsbCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5EZXZpY2UuZmluZEFsbCgpIikubWV0aG9kKCJmaW5kQWxsIikuY2xhc3NOYW1lKCJEZXZpY2UiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSk7DQoNCiAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZSo+IGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyLmVtcHR5KCkpew0KICAgIA0KDQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KICAgIA0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KLyoNCiAgICBpZihfX2V2ZW50LnJlc3BvbnNlVG8oKSl7DQogICAgICAgIGNvdXQgPDwgX190b1N0cmluZyArICJhIHJlc3BvbnNlIHRvIG15IGV2ZW50IjsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5EZXZpY2UuZmluZCgpIikubWV0aG9kKCJmaW5kIikuY2xhc3NOYW1lKCJEZXZpY2UiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSkucmVzcG9uc2VUbyhfX2V2ZW50Ll91bmlxdWUoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZSogYW5zd2VyOw0KICAgIA0KICAgIGpzb24gZXZKU09OID0gZXZKU09OID0ganNvbjo6cGFyc2UoX19ldmVudC0+cGF5bG9hZCgpKTsNCiAgICBpZihldkpTT05bIl9fdGhpcyJdKSB0aGlzLT5fZnJvbURvY3VtZW50KGV2SlNPTlsiX190aGlzIl0pOw0KICAgIA0KDQogICAgDQogICAgDQogICAgaWYoYW5zd2VyKXsNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiBhbnN3ZXI7DQoqLw0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2UmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlOjpmaW5kKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJEZXZpY2U6OmZpbmQoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uRGV2aWNlLmZpbmQoKSIpLm1ldGhvZCgiZmluZCIpLmNsYXNzTmFtZSgiRGV2aWNlIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2UqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCiAgICANCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCg0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZTo6YWN0aXZlKGJvb2wgdil7DQogICAgdGhpcy0+X2FjdGl2ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZTo6YWN0aXZlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9hY3RpdmU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlOjplbmFibGVkKGJvb2wgdil7DQogICAgdGhpcy0+X2VuYWJsZWQgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KYm9vbCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGU6OmVuYWJsZWQoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2VuYWJsZWQ7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlOjpjb2RlKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9jb2RlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZTo6Y29kZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fY29kZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGU6Om9yZGVyKGludCB2KXsNCiAgICB0aGlzLT5fb3JkZXIgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KaW50IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZTo6b3JkZXIoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X29yZGVyOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZTo6ZGF0ZSh0aW1lX3Qgdil7DQogICAgdGhpcy0+X2RhdGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KdGltZV90IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZTo6ZGF0ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fZGF0ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGU6Om5hbWUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X25hbWUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlOjpuYW1lKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9uYW1lOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZTo6cmVtYXJrKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9yZW1hcmsgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlOjpyZW1hcmsoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3JlbWFyazsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGU6OnZhbHVlKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl92YWx1ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGU6OnZhbHVlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl92YWx1ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGU6OmRldmljZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZSYgdil7DQogICAgdGhpcy0+X2RldmljZSA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2UmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZTo6ZGV2aWNlKCl7DQogICAgDQogICAgcmV0dXJuICoodGhpcy0+X2RldmljZSk7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlOjphdHRyaWJ1dGUoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZSYgdil7DQogICAgdGhpcy0+X2F0dHJpYnV0ZSA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlOjphdHRyaWJ1dGUoKXsNCiAgICANCiAgICByZXR1cm4gKih0aGlzLT5fYXR0cmlidXRlKTsNCiAgICANCn0NCiAgICANCg0KICAgIA0KDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlOjpfdW5pcXVlKCl7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZTo6X2Zyb21Eb2N1bWVudChzdGQ6OnN0cmluZyBvYmopew0KICAgIGpzb24gZGF0YSA9IGpzb246OnBhcnNlKG9iaik7DQogICAgDQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGU6Ol90b0RvY3VtZW50KCl7DQogICAgcmV0dXJuICIiOw0KfQ0KDQogICAgDQovKg0KICAgIGlmKF9fZXZlbnQucmVzcG9uc2VUbygpKXsNCiAgICAgICAgY291dCA8PCBfX3RvU3RyaW5nICsgImEgcmVzcG9uc2UgdG8gbXkgZXZlbnQiOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLkRldmljZV9BdHRyaWJ1dGUuc3RvcmUoKSIpLm1ldGhvZCgic3RvcmUiKS5jbGFzc05hbWUoIkRldmljZV9BdHRyaWJ1dGUiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSkucmVzcG9uc2VUbyhfX2V2ZW50Ll91bmlxdWUoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGUqIGFuc3dlcjsNCiAgICANCiAgICBqc29uIGV2SlNPTiA9IGV2SlNPTiA9IGpzb246OnBhcnNlKF9fZXZlbnQtPnBheWxvYWQoKSk7DQogICAgaWYoZXZKU09OWyJfX3RoaXMiXSkgdGhpcy0+X2Zyb21Eb2N1bWVudChldkpTT05bIl9fdGhpcyJdKTsNCiAgICANCg0KICAgIA0KICAgIA0KICAgIGlmKGFuc3dlcil7DQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXIuX3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gYW5zd2VyOw0KKi8NCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlOjpzdG9yZSgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiRGV2aWNlX0F0dHJpYnV0ZTo6c3RvcmUoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uRGV2aWNlX0F0dHJpYnV0ZS5zdG9yZSgpIikubWV0aG9kKCJzdG9yZSIpLmNsYXNzTmFtZSgiRGV2aWNlX0F0dHJpYnV0ZSIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZSogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KICAgIA0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KLyoNCiAgICBpZihfX2V2ZW50LnJlc3BvbnNlVG8oKSl7DQogICAgICAgIGNvdXQgPDwgX190b1N0cmluZyArICJhIHJlc3BvbnNlIHRvIG15IGV2ZW50IjsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5EZXZpY2VfQXR0cmlidXRlLmZpbmRBbGwoKSIpLm1ldGhvZCgiZmluZEFsbCIpLmNsYXNzTmFtZSgiRGV2aWNlX0F0dHJpYnV0ZSIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKS5yZXNwb25zZVRvKF9fZXZlbnQuX3VuaXF1ZSgpKTsNCg0KICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZSo+IGFuc3dlcjsNCiAgICANCiAgICBqc29uIGV2SlNPTiA9IGV2SlNPTiA9IGpzb246OnBhcnNlKF9fZXZlbnQtPnBheWxvYWQoKSk7DQogICAgaWYoZXZKU09OWyJfX3RoaXMiXSkgdGhpcy0+X2Zyb21Eb2N1bWVudChldkpTT05bIl9fdGhpcyJdKTsNCiAgICANCg0KICAgIA0KICAgIA0KICAgIGlmKGFuc3dlcil7DQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXIuX3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gYW5zd2VyOw0KKi8NCnN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZSY+IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZTo6ZmluZEFsbCgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiRGV2aWNlX0F0dHJpYnV0ZTo6ZmluZEFsbCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5EZXZpY2VfQXR0cmlidXRlLmZpbmRBbGwoKSIpLm1ldGhvZCgiZmluZEFsbCIpLmNsYXNzTmFtZSgiRGV2aWNlX0F0dHJpYnV0ZSIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKTsNCg0KICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZSo+IGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyLmVtcHR5KCkpew0KICAgIA0KDQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KICAgIA0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KLyoNCiAgICBpZihfX2V2ZW50LnJlc3BvbnNlVG8oKSl7DQogICAgICAgIGNvdXQgPDwgX190b1N0cmluZyArICJhIHJlc3BvbnNlIHRvIG15IGV2ZW50IjsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5EZXZpY2VfQXR0cmlidXRlLmZpbmQoKSIpLm1ldGhvZCgiZmluZCIpLmNsYXNzTmFtZSgiRGV2aWNlX0F0dHJpYnV0ZSIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKS5yZXNwb25zZVRvKF9fZXZlbnQuX3VuaXF1ZSgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0F0dHJpYnV0ZSogYW5zd2VyOw0KICAgIA0KICAgIGpzb24gZXZKU09OID0gZXZKU09OID0ganNvbjo6cGFyc2UoX19ldmVudC0+cGF5bG9hZCgpKTsNCiAgICBpZihldkpTT05bIl9fdGhpcyJdKSB0aGlzLT5fZnJvbURvY3VtZW50KGV2SlNPTlsiX190aGlzIl0pOw0KICAgIA0KDQogICAgDQogICAgDQogICAgaWYoYW5zd2VyKXsNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiBhbnN3ZXI7DQoqLw0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQXR0cmlidXRlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGU6OmZpbmQoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIkRldmljZV9BdHRyaWJ1dGU6OmZpbmQoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uRGV2aWNlX0F0dHJpYnV0ZS5maW5kKCkiKS5tZXRob2QoImZpbmQiKS5jbGFzc05hbWUoIkRldmljZV9BdHRyaWJ1dGUiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9BdHRyaWJ1dGUqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCiAgICANCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCg0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlOjphY3RpdmUoYm9vbCB2KXsNCiAgICB0aGlzLT5fYWN0aXZlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmJvb2wgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZTo6YWN0aXZlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9hY3RpdmU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGU6OmVuYWJsZWQoYm9vbCB2KXsNCiAgICB0aGlzLT5fZW5hYmxlZCA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGU6OmVuYWJsZWQoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2VuYWJsZWQ7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGU6OmNvZGUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X2NvZGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZTo6Y29kZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fY29kZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZTo6b3JkZXIoaW50IHYpew0KICAgIHRoaXMtPl9vcmRlciA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQppbnQgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZTo6b3JkZXIoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X29yZGVyOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlOjpkYXRlKHRpbWVfdCB2KXsNCiAgICB0aGlzLT5fZGF0ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQp0aW1lX3QgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZTo6ZGF0ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fZGF0ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZTo6bmFtZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fbmFtZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlOjpuYW1lKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9uYW1lOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlOjpyZW1hcmsoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X3JlbWFyayA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlOjpyZW1hcmsoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3JlbWFyazsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZTo6ZGV2aWNlVHlwZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlJiB2KXsNCiAgICB0aGlzLT5fZGV2aWNlVHlwZSA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZTo6ZGV2aWNlVHlwZSgpew0KICAgIA0KICAgIHJldHVybiAqKHRoaXMtPl9kZXZpY2VUeXBlKTsNCiAgICANCn0NCiAgICANCg0KICAgIA0KDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGU6Ol91bmlxdWUoKXsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGU6Ol9mcm9tRG9jdW1lbnQoc3RkOjpzdHJpbmcgb2JqKXsNCiAgICBqc29uIGRhdGEgPSBqc29uOjpwYXJzZShvYmopOw0KICAgIA0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZTo6X3RvRG9jdW1lbnQoKXsNCiAgICByZXR1cm4gIiI7DQp9DQoNCiAgICANCi8qDQogICAgaWYoX19ldmVudC5yZXNwb25zZVRvKCkpew0KICAgICAgICBjb3V0IDw8IF9fdG9TdHJpbmcgKyAiYSByZXNwb25zZSB0byBteSBldmVudCI7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uVHlwZV9BdHRyaWJ1dGUuc3RvcmUoKSIpLm1ldGhvZCgic3RvcmUiKS5jbGFzc05hbWUoIlR5cGVfQXR0cmlidXRlIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpLnJlc3BvbnNlVG8oX19ldmVudC5fdW5pcXVlKCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZSogYW5zd2VyOw0KICAgIA0KICAgIGpzb24gZXZKU09OID0gZXZKU09OID0ganNvbjo6cGFyc2UoX19ldmVudC0+cGF5bG9hZCgpKTsNCiAgICBpZihldkpTT05bIl9fdGhpcyJdKSB0aGlzLT5fZnJvbURvY3VtZW50KGV2SlNPTlsiX190aGlzIl0pOw0KICAgIA0KDQogICAgDQogICAgDQogICAgaWYoYW5zd2VyKXsNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiBhbnN3ZXI7DQoqLw0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZTo6c3RvcmUoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIlR5cGVfQXR0cmlidXRlOjpzdG9yZSgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5UeXBlX0F0dHJpYnV0ZS5zdG9yZSgpIikubWV0aG9kKCJzdG9yZSIpLmNsYXNzTmFtZSgiVHlwZV9BdHRyaWJ1dGUiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlKiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlciE9bnVsbHB0cil7DQogICAgDQoNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQogICAgDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQovKg0KICAgIGlmKF9fZXZlbnQucmVzcG9uc2VUbygpKXsNCiAgICAgICAgY291dCA8PCBfX3RvU3RyaW5nICsgImEgcmVzcG9uc2UgdG8gbXkgZXZlbnQiOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLlR5cGVfQXR0cmlidXRlLmZpbmRBbGwoKSIpLm1ldGhvZCgiZmluZEFsbCIpLmNsYXNzTmFtZSgiVHlwZV9BdHRyaWJ1dGUiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSkucmVzcG9uc2VUbyhfX2V2ZW50Ll91bmlxdWUoKSk7DQoNCiAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlKj4gYW5zd2VyOw0KICAgIA0KICAgIGpzb24gZXZKU09OID0gZXZKU09OID0ganNvbjo6cGFyc2UoX19ldmVudC0+cGF5bG9hZCgpKTsNCiAgICBpZihldkpTT05bIl9fdGhpcyJdKSB0aGlzLT5fZnJvbURvY3VtZW50KGV2SlNPTlsiX190aGlzIl0pOw0KICAgIA0KDQogICAgDQogICAgDQogICAgaWYoYW5zd2VyKXsNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiBhbnN3ZXI7DQoqLw0Kc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZSY+IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6VHlwZV9BdHRyaWJ1dGU6OmZpbmRBbGwoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIlR5cGVfQXR0cmlidXRlOjpmaW5kQWxsKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLlR5cGVfQXR0cmlidXRlLmZpbmRBbGwoKSIpLm1ldGhvZCgiZmluZEFsbCIpLmNsYXNzTmFtZSgiVHlwZV9BdHRyaWJ1dGUiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSk7DQoNCiAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlKj4gYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIuZW1wdHkoKSl7DQogICAgDQoNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQogICAgDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQovKg0KICAgIGlmKF9fZXZlbnQucmVzcG9uc2VUbygpKXsNCiAgICAgICAgY291dCA8PCBfX3RvU3RyaW5nICsgImEgcmVzcG9uc2UgdG8gbXkgZXZlbnQiOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLlR5cGVfQXR0cmlidXRlLmZpbmQoKSIpLm1ldGhvZCgiZmluZCIpLmNsYXNzTmFtZSgiVHlwZV9BdHRyaWJ1dGUiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSkucmVzcG9uc2VUbyhfX2V2ZW50Ll91bmlxdWUoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlKiBhbnN3ZXI7DQogICAgDQogICAganNvbiBldkpTT04gPSBldkpTT04gPSBqc29uOjpwYXJzZShfX2V2ZW50LT5wYXlsb2FkKCkpOw0KICAgIGlmKGV2SlNPTlsiX190aGlzIl0pIHRoaXMtPl9mcm9tRG9jdW1lbnQoZXZKU09OWyJfX3RoaXMiXSk7DQogICAgDQoNCiAgICANCiAgICANCiAgICBpZihhbnN3ZXIpew0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuIGFuc3dlcjsNCiovDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OlR5cGVfQXR0cmlidXRlOjpmaW5kKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJUeXBlX0F0dHJpYnV0ZTo6ZmluZCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5UeXBlX0F0dHJpYnV0ZS5maW5kKCkiKS5tZXRob2QoImZpbmQiKS5jbGFzc05hbWUoIlR5cGVfQXR0cmlidXRlIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpUeXBlX0F0dHJpYnV0ZSogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KICAgIA0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KDQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeTo6YWN0aXZlKGJvb2wgdil7DQogICAgdGhpcy0+X2FjdGl2ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5OjphY3RpdmUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2FjdGl2ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnkmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5OjplbmFibGVkKGJvb2wgdil7DQogICAgdGhpcy0+X2VuYWJsZWQgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KYm9vbCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeTo6ZW5hYmxlZCgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fZW5hYmxlZDsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnkmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5Ojpjb2RlKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9jb2RlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5Ojpjb2RlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9jb2RlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnk6Om9yZGVyKGludCB2KXsNCiAgICB0aGlzLT5fb3JkZXIgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KaW50IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5OjpvcmRlcigpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fb3JkZXI7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeTo6ZGF0ZSh0aW1lX3Qgdil7DQogICAgdGhpcy0+X2RhdGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KdGltZV90IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5OjpkYXRlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9kYXRlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnk6Om5hbWUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X25hbWUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnk6Om5hbWUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X25hbWU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeTo6cmVtYXJrKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9yZW1hcmsgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnk6OnJlbWFyaygpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fcmVtYXJrOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnk6OnBhcmVudChlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeSYgdil7DQogICAgdGhpcy0+X3BhcmVudCA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnkmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5OjpwYXJlbnQoKXsNCiAgICANCiAgICByZXR1cm4gKih0aGlzLT5fcGFyZW50KTsNCiAgICANCn0NCiAgICANCg0KICAgIA0KDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeTo6X3VuaXF1ZSgpew0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnkmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5OjpfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iail7DQogICAganNvbiBkYXRhID0ganNvbjo6cGFyc2Uob2JqKTsNCiAgICANCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5OjpfdG9Eb2N1bWVudCgpew0KICAgIHJldHVybiAiIjsNCn0NCg0KICAgIA0KLyoNCiAgICBpZihfX2V2ZW50LnJlc3BvbnNlVG8oKSl7DQogICAgICAgIGNvdXQgPDwgX190b1N0cmluZyArICJhIHJlc3BvbnNlIHRvIG15IGV2ZW50IjsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5EZXZpY2VfQ2F0ZWdvcnkuc3RvcmUoKSIpLm1ldGhvZCgic3RvcmUiKS5jbGFzc05hbWUoIkRldmljZV9DYXRlZ29yeSIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKS5yZXNwb25zZVRvKF9fZXZlbnQuX3VuaXF1ZSgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5KiBhbnN3ZXI7DQogICAgDQogICAganNvbiBldkpTT04gPSBldkpTT04gPSBqc29uOjpwYXJzZShfX2V2ZW50LT5wYXlsb2FkKCkpOw0KICAgIGlmKGV2SlNPTlsiX190aGlzIl0pIHRoaXMtPl9mcm9tRG9jdW1lbnQoZXZKU09OWyJfX3RoaXMiXSk7DQogICAgDQoNCiAgICANCiAgICANCiAgICBpZihhbnN3ZXIpew0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuIGFuc3dlcjsNCiovDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnk6OnN0b3JlKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJEZXZpY2VfQ2F0ZWdvcnk6OnN0b3JlKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLkRldmljZV9DYXRlZ29yeS5zdG9yZSgpIikubWV0aG9kKCJzdG9yZSIpLmNsYXNzTmFtZSgiRGV2aWNlX0NhdGVnb3J5IikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnkqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCiAgICANCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCi8qDQogICAgaWYoX19ldmVudC5yZXNwb25zZVRvKCkpew0KICAgICAgICBjb3V0IDw8IF9fdG9TdHJpbmcgKyAiYSByZXNwb25zZSB0byBteSBldmVudCI7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uRGV2aWNlX0NhdGVnb3J5LmZpbmRBbGwoKSIpLm1ldGhvZCgiZmluZEFsbCIpLmNsYXNzTmFtZSgiRGV2aWNlX0NhdGVnb3J5IikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpLnJlc3BvbnNlVG8oX19ldmVudC5fdW5pcXVlKCkpOw0KDQogICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnkqPiBhbnN3ZXI7DQogICAgDQogICAganNvbiBldkpTT04gPSBldkpTT04gPSBqc29uOjpwYXJzZShfX2V2ZW50LT5wYXlsb2FkKCkpOw0KICAgIGlmKGV2SlNPTlsiX190aGlzIl0pIHRoaXMtPl9mcm9tRG9jdW1lbnQoZXZKU09OWyJfX3RoaXMiXSk7DQogICAgDQoNCiAgICANCiAgICANCiAgICBpZihhbnN3ZXIpew0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuIGFuc3dlcjsNCiovDQpzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeSY+IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5OjpmaW5kQWxsKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJEZXZpY2VfQ2F0ZWdvcnk6OmZpbmRBbGwoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uRGV2aWNlX0NhdGVnb3J5LmZpbmRBbGwoKSIpLm1ldGhvZCgiZmluZEFsbCIpLmNsYXNzTmFtZSgiRGV2aWNlX0NhdGVnb3J5IikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnkqPiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlci5lbXB0eSgpKXsNCiAgICANCg0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCiAgICANCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCi8qDQogICAgaWYoX19ldmVudC5yZXNwb25zZVRvKCkpew0KICAgICAgICBjb3V0IDw8IF9fdG9TdHJpbmcgKyAiYSByZXNwb25zZSB0byBteSBldmVudCI7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uRGV2aWNlX0NhdGVnb3J5LmZpbmQoKSIpLm1ldGhvZCgiZmluZCIpLmNsYXNzTmFtZSgiRGV2aWNlX0NhdGVnb3J5IikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpLnJlc3BvbnNlVG8oX19ldmVudC5fdW5pcXVlKCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfQ2F0ZWdvcnkqIGFuc3dlcjsNCiAgICANCiAgICBqc29uIGV2SlNPTiA9IGV2SlNPTiA9IGpzb246OnBhcnNlKF9fZXZlbnQtPnBheWxvYWQoKSk7DQogICAgaWYoZXZKU09OWyJfX3RoaXMiXSkgdGhpcy0+X2Zyb21Eb2N1bWVudChldkpTT05bIl9fdGhpcyJdKTsNCiAgICANCg0KICAgIA0KICAgIA0KICAgIGlmKGFuc3dlcil7DQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXIuX3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gYW5zd2VyOw0KKi8NCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9DYXRlZ29yeTo6ZmluZCgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiRGV2aWNlX0NhdGVnb3J5OjpmaW5kKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLkRldmljZV9DYXRlZ29yeS5maW5kKCkiKS5tZXRob2QoImZpbmQiKS5jbGFzc05hbWUoIkRldmljZV9DYXRlZ29yeSIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5KiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlciE9bnVsbHB0cil7DQogICAgDQoNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQogICAgDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQoNCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZTo6YWN0aXZlKGJvb2wgdil7DQogICAgdGhpcy0+X2FjdGl2ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGU6OmFjdGl2ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fYWN0aXZlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlOjplbmFibGVkKGJvb2wgdil7DQogICAgdGhpcy0+X2VuYWJsZWQgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KYm9vbCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlOjplbmFibGVkKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9lbmFibGVkOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlOjpjb2RlKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9jb2RlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGU6OmNvZGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2NvZGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGU6Om9yZGVyKGludCB2KXsNCiAgICB0aGlzLT5fb3JkZXIgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KaW50IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGU6Om9yZGVyKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9vcmRlcjsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZTo6ZGF0ZSh0aW1lX3Qgdil7DQogICAgdGhpcy0+X2RhdGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KdGltZV90IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGU6OmRhdGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2RhdGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGU6Om5hbWUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X25hbWUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZTo6bmFtZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fbmFtZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZTo6cmVtYXJrKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9yZW1hcmsgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZTo6cmVtYXJrKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9yZW1hcms7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGU6OmNhdGVnb3J5KGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5JiB2KXsNCiAgICB0aGlzLT5fY2F0ZWdvcnkgPSAmdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX0NhdGVnb3J5JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlOjpjYXRlZ29yeSgpew0KICAgIA0KICAgIHJldHVybiAqKHRoaXMtPl9jYXRlZ29yeSk7DQogICAgDQp9DQogICAgDQoNCiAgICANCg0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlOjpfdW5pcXVlKCl7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlOjpfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iail7DQogICAganNvbiBkYXRhID0ganNvbjo6cGFyc2Uob2JqKTsNCiAgICANCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGU6Ol90b0RvY3VtZW50KCl7DQogICAgcmV0dXJuICIiOw0KfQ0KDQogICAgDQovKg0KICAgIGlmKF9fZXZlbnQucmVzcG9uc2VUbygpKXsNCiAgICAgICAgY291dCA8PCBfX3RvU3RyaW5nICsgImEgcmVzcG9uc2UgdG8gbXkgZXZlbnQiOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLkRldmljZV9UeXBlLnN0b3JlKCkiKS5tZXRob2QoInN0b3JlIikuY2xhc3NOYW1lKCJEZXZpY2VfVHlwZSIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKS5yZXNwb25zZVRvKF9fZXZlbnQuX3VuaXF1ZSgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGUqIGFuc3dlcjsNCiAgICANCiAgICBqc29uIGV2SlNPTiA9IGV2SlNPTiA9IGpzb246OnBhcnNlKF9fZXZlbnQtPnBheWxvYWQoKSk7DQogICAgaWYoZXZKU09OWyJfX3RoaXMiXSkgdGhpcy0+X2Zyb21Eb2N1bWVudChldkpTT05bIl9fdGhpcyJdKTsNCiAgICANCg0KICAgIA0KICAgIA0KICAgIGlmKGFuc3dlcil7DQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXIuX3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gYW5zd2VyOw0KKi8NCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGU6OnN0b3JlKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJEZXZpY2VfVHlwZTo6c3RvcmUoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uRGV2aWNlX1R5cGUuc3RvcmUoKSIpLm1ldGhvZCgic3RvcmUiKS5jbGFzc05hbWUoIkRldmljZV9UeXBlIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZSogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KICAgIA0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KLyoNCiAgICBpZihfX2V2ZW50LnJlc3BvbnNlVG8oKSl7DQogICAgICAgIGNvdXQgPDwgX190b1N0cmluZyArICJhIHJlc3BvbnNlIHRvIG15IGV2ZW50IjsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5EZXZpY2VfVHlwZS5maW5kQWxsKCkiKS5tZXRob2QoImZpbmRBbGwiKS5jbGFzc05hbWUoIkRldmljZV9UeXBlIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpLnJlc3BvbnNlVG8oX19ldmVudC5fdW5pcXVlKCkpOw0KDQogICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZSo+IGFuc3dlcjsNCiAgICANCiAgICBqc29uIGV2SlNPTiA9IGV2SlNPTiA9IGpzb246OnBhcnNlKF9fZXZlbnQtPnBheWxvYWQoKSk7DQogICAgaWYoZXZKU09OWyJfX3RoaXMiXSkgdGhpcy0+X2Zyb21Eb2N1bWVudChldkpTT05bIl9fdGhpcyJdKTsNCiAgICANCg0KICAgIA0KICAgIA0KICAgIGlmKGFuc3dlcil7DQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXIuX3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gYW5zd2VyOw0KKi8NCnN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGUmPiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6OkRldmljZV9UeXBlOjpmaW5kQWxsKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJEZXZpY2VfVHlwZTo6ZmluZEFsbCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5EZXZpY2VfVHlwZS5maW5kQWxsKCkiKS5tZXRob2QoImZpbmRBbGwiKS5jbGFzc05hbWUoIkRldmljZV9UeXBlIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZSo+IGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyLmVtcHR5KCkpew0KICAgIA0KDQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KICAgIA0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KLyoNCiAgICBpZihfX2V2ZW50LnJlc3BvbnNlVG8oKSl7DQogICAgICAgIGNvdXQgPDwgX190b1N0cmluZyArICJhIHJlc3BvbnNlIHRvIG15IGV2ZW50IjsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5EZXZpY2VfVHlwZS5maW5kKCkiKS5tZXRob2QoImZpbmQiKS5jbGFzc05hbWUoIkRldmljZV9UeXBlIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpLnJlc3BvbnNlVG8oX19ldmVudC5fdW5pcXVlKCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZSogYW5zd2VyOw0KICAgIA0KICAgIGpzb24gZXZKU09OID0gZXZKU09OID0ganNvbjo6cGFyc2UoX19ldmVudC0+cGF5bG9hZCgpKTsNCiAgICBpZihldkpTT05bIl9fdGhpcyJdKSB0aGlzLT5fZnJvbURvY3VtZW50KGV2SlNPTlsiX190aGlzIl0pOw0KICAgIA0KDQogICAgDQogICAgDQogICAgaWYoYW5zd2VyKXsNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiBhbnN3ZXI7DQoqLw0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpEZXZpY2VfVHlwZTo6ZmluZCgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiRGV2aWNlX1R5cGU6OmZpbmQoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uRGV2aWNlX1R5cGUuZmluZCgpIikubWV0aG9kKCJmaW5kIikuY2xhc3NOYW1lKCJEZXZpY2VfVHlwZSIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6RGV2aWNlX1R5cGUqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCiAgICANCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCg0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXA6OmFjdGl2ZShib29sIHYpew0KICAgIHRoaXMtPl9hY3RpdmUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KYm9vbCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19Hcm91cDo6YWN0aXZlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9hY3RpdmU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19Hcm91cDo6ZW5hYmxlZChib29sIHYpew0KICAgIHRoaXMtPl9lbmFibGVkID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmJvb2wgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXA6OmVuYWJsZWQoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2VuYWJsZWQ7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19Hcm91cDo6Y29kZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fY29kZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19Hcm91cDo6Y29kZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fY29kZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwOjpvcmRlcihpbnQgdil7DQogICAgdGhpcy0+X29yZGVyID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmludCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19Hcm91cDo6b3JkZXIoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X29yZGVyOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXA6OmRhdGUodGltZV90IHYpew0KICAgIHRoaXMtPl9kYXRlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnRpbWVfdCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19Hcm91cDo6ZGF0ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fZGF0ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwOjpuYW1lKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9uYW1lID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwOjpuYW1lKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9uYW1lOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXA6OnJlbWFyayhzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fcmVtYXJrID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwOjpyZW1hcmsoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3JlbWFyazsNCiAgICANCn0NCiAgICANCg0KICAgIA0KDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19Hcm91cDo6X3VuaXF1ZSgpew0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwOjpfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iail7DQogICAganNvbiBkYXRhID0ganNvbjo6cGFyc2Uob2JqKTsNCiAgICANCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwOjpfdG9Eb2N1bWVudCgpew0KICAgIHJldHVybiAiIjsNCn0NCg0KICAgIA0KLyoNCiAgICBpZihfX2V2ZW50LnJlc3BvbnNlVG8oKSl7DQogICAgICAgIGNvdXQgPDwgX190b1N0cmluZyArICJhIHJlc3BvbnNlIHRvIG15IGV2ZW50IjsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5NZXRyaWNfR3JvdXAuc3RvcmUoKSIpLm1ldGhvZCgic3RvcmUiKS5jbGFzc05hbWUoIk1ldHJpY19Hcm91cCIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKS5yZXNwb25zZVRvKF9fZXZlbnQuX3VuaXF1ZSgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwKiBhbnN3ZXI7DQogICAgDQogICAganNvbiBldkpTT04gPSBldkpTT04gPSBqc29uOjpwYXJzZShfX2V2ZW50LT5wYXlsb2FkKCkpOw0KICAgIGlmKGV2SlNPTlsiX190aGlzIl0pIHRoaXMtPl9mcm9tRG9jdW1lbnQoZXZKU09OWyJfX3RoaXMiXSk7DQogICAgDQoNCiAgICANCiAgICANCiAgICBpZihhbnN3ZXIpew0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuIGFuc3dlcjsNCiovDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXA6OnN0b3JlKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJNZXRyaWNfR3JvdXA6OnN0b3JlKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLk1ldHJpY19Hcm91cC5zdG9yZSgpIikubWV0aG9kKCJzdG9yZSIpLmNsYXNzTmFtZSgiTWV0cmljX0dyb3VwIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXAqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCiAgICANCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCi8qDQogICAgaWYoX19ldmVudC5yZXNwb25zZVRvKCkpew0KICAgICAgICBjb3V0IDw8IF9fdG9TdHJpbmcgKyAiYSByZXNwb25zZSB0byBteSBldmVudCI7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uTWV0cmljX0dyb3VwLmZpbmRBbGwoKSIpLm1ldGhvZCgiZmluZEFsbCIpLmNsYXNzTmFtZSgiTWV0cmljX0dyb3VwIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpLnJlc3BvbnNlVG8oX19ldmVudC5fdW5pcXVlKCkpOw0KDQogICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXAqPiBhbnN3ZXI7DQogICAgDQogICAganNvbiBldkpTT04gPSBldkpTT04gPSBqc29uOjpwYXJzZShfX2V2ZW50LT5wYXlsb2FkKCkpOw0KICAgIGlmKGV2SlNPTlsiX190aGlzIl0pIHRoaXMtPl9mcm9tRG9jdW1lbnQoZXZKU09OWyJfX3RoaXMiXSk7DQogICAgDQoNCiAgICANCiAgICANCiAgICBpZihhbnN3ZXIpew0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuIGFuc3dlcjsNCiovDQpzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19Hcm91cCY+IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwOjpmaW5kQWxsKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJNZXRyaWNfR3JvdXA6OmZpbmRBbGwoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uTWV0cmljX0dyb3VwLmZpbmRBbGwoKSIpLm1ldGhvZCgiZmluZEFsbCIpLmNsYXNzTmFtZSgiTWV0cmljX0dyb3VwIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXAqPiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlci5lbXB0eSgpKXsNCiAgICANCg0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCiAgICANCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCi8qDQogICAgaWYoX19ldmVudC5yZXNwb25zZVRvKCkpew0KICAgICAgICBjb3V0IDw8IF9fdG9TdHJpbmcgKyAiYSByZXNwb25zZSB0byBteSBldmVudCI7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uTWV0cmljX0dyb3VwLmZpbmQoKSIpLm1ldGhvZCgiZmluZCIpLmNsYXNzTmFtZSgiTWV0cmljX0dyb3VwIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpLnJlc3BvbnNlVG8oX19ldmVudC5fdW5pcXVlKCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfR3JvdXAqIGFuc3dlcjsNCiAgICANCiAgICBqc29uIGV2SlNPTiA9IGV2SlNPTiA9IGpzb246OnBhcnNlKF9fZXZlbnQtPnBheWxvYWQoKSk7DQogICAgaWYoZXZKU09OWyJfX3RoaXMiXSkgdGhpcy0+X2Zyb21Eb2N1bWVudChldkpTT05bIl9fdGhpcyJdKTsNCiAgICANCg0KICAgIA0KICAgIA0KICAgIGlmKGFuc3dlcil7DQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXIuX3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gYW5zd2VyOw0KKi8NCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19Hcm91cDo6ZmluZCgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiTWV0cmljX0dyb3VwOjpmaW5kKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLk1ldHJpY19Hcm91cC5maW5kKCkiKS5tZXRob2QoImZpbmQiKS5jbGFzc05hbWUoIk1ldHJpY19Hcm91cCIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwKiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlciE9bnVsbHB0cil7DQogICAgDQoNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQogICAgDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQoNCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZTo6YWN0aXZlKGJvb2wgdil7DQogICAgdGhpcy0+X2FjdGl2ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGU6OmFjdGl2ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fYWN0aXZlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19UeXBlOjplbmFibGVkKGJvb2wgdil7DQogICAgdGhpcy0+X2VuYWJsZWQgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KYm9vbCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19UeXBlOjplbmFibGVkKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9lbmFibGVkOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19UeXBlOjpjb2RlKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9jb2RlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGU6OmNvZGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2NvZGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGU6Om9yZGVyKGludCB2KXsNCiAgICB0aGlzLT5fb3JkZXIgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KaW50IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGU6Om9yZGVyKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9vcmRlcjsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZTo6ZGF0ZSh0aW1lX3Qgdil7DQogICAgdGhpcy0+X2RhdGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KdGltZV90IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGU6OmRhdGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2RhdGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGU6Om5hbWUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X25hbWUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZTo6bmFtZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fbmFtZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZTo6cmVtYXJrKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9yZW1hcmsgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZTo6cmVtYXJrKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9yZW1hcms7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGU6Omdyb3VwKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwJiB2KXsNCiAgICB0aGlzLT5fZ3JvdXAgPSAmdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19UeXBlOjpncm91cCgpew0KICAgIA0KICAgIHJldHVybiAqKHRoaXMtPl9ncm91cCk7DQogICAgDQp9DQogICAgDQoNCiAgICANCg0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19UeXBlOjpfdW5pcXVlKCl7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19UeXBlOjpfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iail7DQogICAganNvbiBkYXRhID0ganNvbjo6cGFyc2Uob2JqKTsNCiAgICANCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGU6Ol90b0RvY3VtZW50KCl7DQogICAgcmV0dXJuICIiOw0KfQ0KDQogICAgDQovKg0KICAgIGlmKF9fZXZlbnQucmVzcG9uc2VUbygpKXsNCiAgICAgICAgY291dCA8PCBfX3RvU3RyaW5nICsgImEgcmVzcG9uc2UgdG8gbXkgZXZlbnQiOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLk1ldHJpY19UeXBlLnN0b3JlKCkiKS5tZXRob2QoInN0b3JlIikuY2xhc3NOYW1lKCJNZXRyaWNfVHlwZSIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKS5yZXNwb25zZVRvKF9fZXZlbnQuX3VuaXF1ZSgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGUqIGFuc3dlcjsNCiAgICANCiAgICBqc29uIGV2SlNPTiA9IGV2SlNPTiA9IGpzb246OnBhcnNlKF9fZXZlbnQtPnBheWxvYWQoKSk7DQogICAgaWYoZXZKU09OWyJfX3RoaXMiXSkgdGhpcy0+X2Zyb21Eb2N1bWVudChldkpTT05bIl9fdGhpcyJdKTsNCiAgICANCg0KICAgIA0KICAgIA0KICAgIGlmKGFuc3dlcil7DQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXIuX3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gYW5zd2VyOw0KKi8NCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGU6OnN0b3JlKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJNZXRyaWNfVHlwZTo6c3RvcmUoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uTWV0cmljX1R5cGUuc3RvcmUoKSIpLm1ldGhvZCgic3RvcmUiKS5jbGFzc05hbWUoIk1ldHJpY19UeXBlIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZSogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KICAgIA0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KLyoNCiAgICBpZihfX2V2ZW50LnJlc3BvbnNlVG8oKSl7DQogICAgICAgIGNvdXQgPDwgX190b1N0cmluZyArICJhIHJlc3BvbnNlIHRvIG15IGV2ZW50IjsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5NZXRyaWNfVHlwZS5maW5kQWxsKCkiKS5tZXRob2QoImZpbmRBbGwiKS5jbGFzc05hbWUoIk1ldHJpY19UeXBlIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpLnJlc3BvbnNlVG8oX19ldmVudC5fdW5pcXVlKCkpOw0KDQogICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZSo+IGFuc3dlcjsNCiAgICANCiAgICBqc29uIGV2SlNPTiA9IGV2SlNPTiA9IGpzb246OnBhcnNlKF9fZXZlbnQtPnBheWxvYWQoKSk7DQogICAgaWYoZXZKU09OWyJfX3RoaXMiXSkgdGhpcy0+X2Zyb21Eb2N1bWVudChldkpTT05bIl9fdGhpcyJdKTsNCiAgICANCg0KICAgIA0KICAgIA0KICAgIGlmKGFuc3dlcil7DQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXIuX3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gYW5zd2VyOw0KKi8NCnN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGUmPiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRpb3Q6Ok1ldHJpY19UeXBlOjpmaW5kQWxsKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJNZXRyaWNfVHlwZTo6ZmluZEFsbCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5NZXRyaWNfVHlwZS5maW5kQWxsKCkiKS5tZXRob2QoImZpbmRBbGwiKS5jbGFzc05hbWUoIk1ldHJpY19UeXBlIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZSo+IGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyLmVtcHR5KCkpew0KICAgIA0KDQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KICAgIA0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KLyoNCiAgICBpZihfX2V2ZW50LnJlc3BvbnNlVG8oKSl7DQogICAgICAgIGNvdXQgPDwgX190b1N0cmluZyArICJhIHJlc3BvbnNlIHRvIG15IGV2ZW50IjsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5NZXRyaWNfVHlwZS5maW5kKCkiKS5tZXRob2QoImZpbmQiKS5jbGFzc05hbWUoIk1ldHJpY19UeXBlIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpLnJlc3BvbnNlVG8oX19ldmVudC5fdW5pcXVlKCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZSogYW5zd2VyOw0KICAgIA0KICAgIGpzb24gZXZKU09OID0gZXZKU09OID0ganNvbjo6cGFyc2UoX19ldmVudC0+cGF5bG9hZCgpKTsNCiAgICBpZihldkpTT05bIl9fdGhpcyJdKSB0aGlzLT5fZnJvbURvY3VtZW50KGV2SlNPTlsiX190aGlzIl0pOw0KICAgIA0KDQogICAgDQogICAgDQogICAgaWYoYW5zd2VyKXsNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiBhbnN3ZXI7DQoqLw0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkaW90OjpNZXRyaWNfVHlwZTo6ZmluZCgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiTWV0cmljX1R5cGU6OmZpbmQoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uTWV0cmljX1R5cGUuZmluZCgpIikubWV0aG9kKCJmaW5kIikuY2xhc3NOYW1lKCJNZXRyaWNfVHlwZSIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGlvdDo6TWV0cmljX1R5cGUqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCiAgICANCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCg0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWc6OmFjdGl2ZShib29sIHYpew0KICAgIHRoaXMtPl9hY3RpdmUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KYm9vbCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZzo6YWN0aXZlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9hY3RpdmU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZzo6ZW5hYmxlZChib29sIHYpew0KICAgIHRoaXMtPl9lbmFibGVkID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmJvb2wgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWc6OmVuYWJsZWQoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2VuYWJsZWQ7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZzo6Y29kZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fY29kZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZzo6Y29kZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fY29kZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnOjpvcmRlcihpbnQgdil7DQogICAgdGhpcy0+X29yZGVyID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmludCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZzo6b3JkZXIoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X29yZGVyOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWc6OmRhdGUodGltZV90IHYpew0KICAgIHRoaXMtPl9kYXRlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnRpbWVfdCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZzo6ZGF0ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fZGF0ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnOjpuYW1lKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9uYW1lID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnOjpuYW1lKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9uYW1lOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWc6OnJlbWFyayhzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fcmVtYXJrID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnOjpyZW1hcmsoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3JlbWFyazsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnOjp2YWx1ZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fdmFsdWUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWc6OnZhbHVlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl92YWx1ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnOjpzY3JpcHQoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X3NjcmlwdCA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZzo6c2NyaXB0KCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9zY3JpcHQ7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZzo6dG9vbChlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2wmIHYpew0KICAgIHRoaXMtPl90b29sID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2wmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnOjp0b29sKCl7DQogICAgDQogICAgcmV0dXJuICoodGhpcy0+X3Rvb2wpOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWc6Omdyb3VwKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwJiB2KXsNCiAgICB0aGlzLT5fZ3JvdXAgPSAmdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZzo6Z3JvdXAoKXsNCiAgICANCiAgICByZXR1cm4gKih0aGlzLT5fZ3JvdXApOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWc6OnR5cGUoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGUmIHYpew0KICAgIHRoaXMtPl90eXBlID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWc6OnR5cGUoKXsNCiAgICANCiAgICByZXR1cm4gKih0aGlzLT5fdHlwZSk7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZzo6bm9kZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIHYpew0KICAgIHRoaXMtPl9ub2RlID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnOjpub2RlKCl7DQogICAgDQogICAgcmV0dXJuICoodGhpcy0+X25vZGUpOw0KICAgIA0KfQ0KICAgIA0KDQogICAgDQoNCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnOjpfdW5pcXVlKCl7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWc6Ol9mcm9tRG9jdW1lbnQoc3RkOjpzdHJpbmcgb2JqKXsNCiAgICBqc29uIGRhdGEgPSBqc29uOjpwYXJzZShvYmopOw0KICAgIA0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWc6Ol90b0RvY3VtZW50KCl7DQogICAgcmV0dXJuICIiOw0KfQ0KDQogICAgDQovKg0KICAgIGlmKF9fZXZlbnQucmVzcG9uc2VUbygpKXsNCiAgICAgICAgY291dCA8PCBfX3RvU3RyaW5nICsgImEgcmVzcG9uc2UgdG8gbXkgZXZlbnQiOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLkNvbmZpZy5zdG9yZSgpIikubWV0aG9kKCJzdG9yZSIpLmNsYXNzTmFtZSgiQ29uZmlnIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpLnJlc3BvbnNlVG8oX19ldmVudC5fdW5pcXVlKCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWcqIGFuc3dlcjsNCiAgICANCiAgICBqc29uIGV2SlNPTiA9IGV2SlNPTiA9IGpzb246OnBhcnNlKF9fZXZlbnQtPnBheWxvYWQoKSk7DQogICAgaWYoZXZKU09OWyJfX3RoaXMiXSkgdGhpcy0+X2Zyb21Eb2N1bWVudChldkpTT05bIl9fdGhpcyJdKTsNCiAgICANCg0KICAgIA0KICAgIA0KICAgIGlmKGFuc3dlcil7DQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXIuX3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gYW5zd2VyOw0KKi8NCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZzo6c3RvcmUoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIkNvbmZpZzo6c3RvcmUoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uQ29uZmlnLnN0b3JlKCkiKS5tZXRob2QoInN0b3JlIikuY2xhc3NOYW1lKCJDb25maWciKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZyogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KICAgIA0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KLyoNCiAgICBpZihfX2V2ZW50LnJlc3BvbnNlVG8oKSl7DQogICAgICAgIGNvdXQgPDwgX190b1N0cmluZyArICJhIHJlc3BvbnNlIHRvIG15IGV2ZW50IjsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Db25maWcuZmluZEFsbCgpIikubWV0aG9kKCJmaW5kQWxsIikuY2xhc3NOYW1lKCJDb25maWciKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSkucmVzcG9uc2VUbyhfX2V2ZW50Ll91bmlxdWUoKSk7DQoNCiAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZyo+IGFuc3dlcjsNCiAgICANCiAgICBqc29uIGV2SlNPTiA9IGV2SlNPTiA9IGpzb246OnBhcnNlKF9fZXZlbnQtPnBheWxvYWQoKSk7DQogICAgaWYoZXZKU09OWyJfX3RoaXMiXSkgdGhpcy0+X2Zyb21Eb2N1bWVudChldkpTT05bIl9fdGhpcyJdKTsNCiAgICANCg0KICAgIA0KICAgIA0KICAgIGlmKGFuc3dlcil7DQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXIuX3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gYW5zd2VyOw0KKi8NCnN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnJj4gZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWc6OmZpbmRBbGwoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIkNvbmZpZzo6ZmluZEFsbCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Db25maWcuZmluZEFsbCgpIikubWV0aG9kKCJmaW5kQWxsIikuY2xhc3NOYW1lKCJDb25maWciKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSk7DQoNCiAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZyo+IGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyLmVtcHR5KCkpew0KICAgIA0KDQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KICAgIA0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KLyoNCiAgICBpZihfX2V2ZW50LnJlc3BvbnNlVG8oKSl7DQogICAgICAgIGNvdXQgPDwgX190b1N0cmluZyArICJhIHJlc3BvbnNlIHRvIG15IGV2ZW50IjsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Db25maWcuZmluZCgpIikubWV0aG9kKCJmaW5kIikuY2xhc3NOYW1lKCJDb25maWciKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSkucmVzcG9uc2VUbyhfX2V2ZW50Ll91bmlxdWUoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZyogYW5zd2VyOw0KICAgIA0KICAgIGpzb24gZXZKU09OID0gZXZKU09OID0ganNvbjo6cGFyc2UoX19ldmVudC0+cGF5bG9hZCgpKTsNCiAgICBpZihldkpTT05bIl9fdGhpcyJdKSB0aGlzLT5fZnJvbURvY3VtZW50KGV2SlNPTlsiX190aGlzIl0pOw0KICAgIA0KDQogICAgDQogICAgDQogICAgaWYoYW5zd2VyKXsNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiBhbnN3ZXI7DQoqLw0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnOjpmaW5kKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJDb25maWc6OmZpbmQoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uQ29uZmlnLmZpbmQoKSIpLm1ldGhvZCgiZmluZCIpLmNsYXNzTmFtZSgiQ29uZmlnIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWcqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCiAgICANCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCg0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2wmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbDo6YWN0aXZlKGJvb2wgdil7DQogICAgdGhpcy0+X2FjdGl2ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbDo6YWN0aXZlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9hY3RpdmU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sOjplbmFibGVkKGJvb2wgdil7DQogICAgdGhpcy0+X2VuYWJsZWQgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KYm9vbCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2w6OmVuYWJsZWQoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2VuYWJsZWQ7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sOjpjb2RlKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9jb2RlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbDo6Y29kZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fY29kZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2w6Om9yZGVyKGludCB2KXsNCiAgICB0aGlzLT5fb3JkZXIgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KaW50IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbDo6b3JkZXIoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X29yZGVyOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2wmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbDo6ZGF0ZSh0aW1lX3Qgdil7DQogICAgdGhpcy0+X2RhdGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KdGltZV90IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbDo6ZGF0ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fZGF0ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2w6Om5hbWUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X25hbWUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sOjpuYW1lKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9uYW1lOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2wmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbDo6cmVtYXJrKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9yZW1hcmsgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sOjpyZW1hcmsoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3JlbWFyazsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2w6OnR5cGUoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGUmIHYpew0KICAgIHRoaXMtPl90eXBlID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sOjp0eXBlKCl7DQogICAgDQogICAgcmV0dXJuICoodGhpcy0+X3R5cGUpOw0KICAgIA0KfQ0KICAgIA0KDQogICAgDQoNCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2w6Ol91bmlxdWUoKXsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sOjpfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iail7DQogICAganNvbiBkYXRhID0ganNvbjo6cGFyc2Uob2JqKTsNCiAgICANCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbDo6X3RvRG9jdW1lbnQoKXsNCiAgICByZXR1cm4gIiI7DQp9DQoNCiAgICANCi8qDQogICAgaWYoX19ldmVudC5yZXNwb25zZVRvKCkpew0KICAgICAgICBjb3V0IDw8IF9fdG9TdHJpbmcgKyAiYSByZXNwb25zZSB0byBteSBldmVudCI7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uVG9vbC5zdG9yZSgpIikubWV0aG9kKCJzdG9yZSIpLmNsYXNzTmFtZSgiVG9vbCIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKS5yZXNwb25zZVRvKF9fZXZlbnQuX3VuaXF1ZSgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbCogYW5zd2VyOw0KICAgIA0KICAgIGpzb24gZXZKU09OID0gZXZKU09OID0ganNvbjo6cGFyc2UoX19ldmVudC0+cGF5bG9hZCgpKTsNCiAgICBpZihldkpTT05bIl9fdGhpcyJdKSB0aGlzLT5fZnJvbURvY3VtZW50KGV2SlNPTlsiX190aGlzIl0pOw0KICAgIA0KDQogICAgDQogICAgDQogICAgaWYoYW5zd2VyKXsNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiBhbnN3ZXI7DQoqLw0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2w6OnN0b3JlKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJUb29sOjpzdG9yZSgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Ub29sLnN0b3JlKCkiKS5tZXRob2QoInN0b3JlIikuY2xhc3NOYW1lKCJUb29sIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sKiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlciE9bnVsbHB0cil7DQogICAgDQoNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQogICAgDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQovKg0KICAgIGlmKF9fZXZlbnQucmVzcG9uc2VUbygpKXsNCiAgICAgICAgY291dCA8PCBfX3RvU3RyaW5nICsgImEgcmVzcG9uc2UgdG8gbXkgZXZlbnQiOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLlRvb2wuZmluZEFsbCgpIikubWV0aG9kKCJmaW5kQWxsIikuY2xhc3NOYW1lKCJUb29sIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpLnJlc3BvbnNlVG8oX19ldmVudC5fdW5pcXVlKCkpOw0KDQogICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sKj4gYW5zd2VyOw0KICAgIA0KICAgIGpzb24gZXZKU09OID0gZXZKU09OID0ganNvbjo6cGFyc2UoX19ldmVudC0+cGF5bG9hZCgpKTsNCiAgICBpZihldkpTT05bIl9fdGhpcyJdKSB0aGlzLT5fZnJvbURvY3VtZW50KGV2SlNPTlsiX190aGlzIl0pOw0KICAgIA0KDQogICAgDQogICAgDQogICAgaWYoYW5zd2VyKXsNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiBhbnN3ZXI7DQoqLw0Kc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sJj4gZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sOjpmaW5kQWxsKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJUb29sOjpmaW5kQWxsKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLlRvb2wuZmluZEFsbCgpIikubWV0aG9kKCJmaW5kQWxsIikuY2xhc3NOYW1lKCJUb29sIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sKj4gYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIuZW1wdHkoKSl7DQogICAgDQoNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQogICAgDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQovKg0KICAgIGlmKF9fZXZlbnQucmVzcG9uc2VUbygpKXsNCiAgICAgICAgY291dCA8PCBfX3RvU3RyaW5nICsgImEgcmVzcG9uc2UgdG8gbXkgZXZlbnQiOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLlRvb2wuZmluZCgpIikubWV0aG9kKCJmaW5kIikuY2xhc3NOYW1lKCJUb29sIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpLnJlc3BvbnNlVG8oX19ldmVudC5fdW5pcXVlKCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sKiBhbnN3ZXI7DQogICAgDQogICAganNvbiBldkpTT04gPSBldkpTT04gPSBqc29uOjpwYXJzZShfX2V2ZW50LT5wYXlsb2FkKCkpOw0KICAgIGlmKGV2SlNPTlsiX190aGlzIl0pIHRoaXMtPl9mcm9tRG9jdW1lbnQoZXZKU09OWyJfX3RoaXMiXSk7DQogICAgDQoNCiAgICANCiAgICANCiAgICBpZihhbnN3ZXIpew0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuIGFuc3dlcjsNCiovDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2wmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbDo6ZmluZCgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiVG9vbDo6ZmluZCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Ub29sLmZpbmQoKSIpLm1ldGhvZCgiZmluZCIpLmNsYXNzTmFtZSgiVG9vbCIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbCogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KICAgIA0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KDQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cDo6YWN0aXZlKGJvb2wgdil7DQogICAgdGhpcy0+X2FjdGl2ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwOjphY3RpdmUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2FjdGl2ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwOjplbmFibGVkKGJvb2wgdil7DQogICAgdGhpcy0+X2VuYWJsZWQgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KYm9vbCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cDo6ZW5hYmxlZCgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fZW5hYmxlZDsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwOjpjb2RlKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9jb2RlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwOjpjb2RlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9jb2RlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXA6Om9yZGVyKGludCB2KXsNCiAgICB0aGlzLT5fb3JkZXIgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KaW50IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwOjpvcmRlcigpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fb3JkZXI7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cDo6ZGF0ZSh0aW1lX3Qgdil7DQogICAgdGhpcy0+X2RhdGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KdGltZV90IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwOjpkYXRlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9kYXRlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXA6Om5hbWUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X25hbWUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXA6Om5hbWUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X25hbWU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cDo6cmVtYXJrKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9yZW1hcmsgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXA6OnJlbWFyaygpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fcmVtYXJrOw0KICAgIA0KfQ0KICAgIA0KDQogICAgDQoNCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwOjpfdW5pcXVlKCl7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXA6Ol9mcm9tRG9jdW1lbnQoc3RkOjpzdHJpbmcgb2JqKXsNCiAgICBqc29uIGRhdGEgPSBqc29uOjpwYXJzZShvYmopOw0KICAgIA0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXA6Ol90b0RvY3VtZW50KCl7DQogICAgcmV0dXJuICIiOw0KfQ0KDQogICAgDQovKg0KICAgIGlmKF9fZXZlbnQucmVzcG9uc2VUbygpKXsNCiAgICAgICAgY291dCA8PCBfX3RvU3RyaW5nICsgImEgcmVzcG9uc2UgdG8gbXkgZXZlbnQiOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLkNvbmZpZ19Hcm91cC5zdG9yZSgpIikubWV0aG9kKCJzdG9yZSIpLmNsYXNzTmFtZSgiQ29uZmlnX0dyb3VwIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpLnJlc3BvbnNlVG8oX19ldmVudC5fdW5pcXVlKCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXAqIGFuc3dlcjsNCiAgICANCiAgICBqc29uIGV2SlNPTiA9IGV2SlNPTiA9IGpzb246OnBhcnNlKF9fZXZlbnQtPnBheWxvYWQoKSk7DQogICAgaWYoZXZKU09OWyJfX3RoaXMiXSkgdGhpcy0+X2Zyb21Eb2N1bWVudChldkpTT05bIl9fdGhpcyJdKTsNCiAgICANCg0KICAgIA0KICAgIA0KICAgIGlmKGFuc3dlcil7DQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXIuX3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gYW5zd2VyOw0KKi8NCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cDo6c3RvcmUoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIkNvbmZpZ19Hcm91cDo6c3RvcmUoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uQ29uZmlnX0dyb3VwLnN0b3JlKCkiKS5tZXRob2QoInN0b3JlIikuY2xhc3NOYW1lKCJDb25maWdfR3JvdXAiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cCogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KICAgIA0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KLyoNCiAgICBpZihfX2V2ZW50LnJlc3BvbnNlVG8oKSl7DQogICAgICAgIGNvdXQgPDwgX190b1N0cmluZyArICJhIHJlc3BvbnNlIHRvIG15IGV2ZW50IjsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Db25maWdfR3JvdXAuZmluZEFsbCgpIikubWV0aG9kKCJmaW5kQWxsIikuY2xhc3NOYW1lKCJDb25maWdfR3JvdXAiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSkucmVzcG9uc2VUbyhfX2V2ZW50Ll91bmlxdWUoKSk7DQoNCiAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cCo+IGFuc3dlcjsNCiAgICANCiAgICBqc29uIGV2SlNPTiA9IGV2SlNPTiA9IGpzb246OnBhcnNlKF9fZXZlbnQtPnBheWxvYWQoKSk7DQogICAgaWYoZXZKU09OWyJfX3RoaXMiXSkgdGhpcy0+X2Zyb21Eb2N1bWVudChldkpTT05bIl9fdGhpcyJdKTsNCiAgICANCg0KICAgIA0KICAgIA0KICAgIGlmKGFuc3dlcil7DQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXIuX3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gYW5zd2VyOw0KKi8NCnN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwJj4gZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXA6OmZpbmRBbGwoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIkNvbmZpZ19Hcm91cDo6ZmluZEFsbCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Db25maWdfR3JvdXAuZmluZEFsbCgpIikubWV0aG9kKCJmaW5kQWxsIikuY2xhc3NOYW1lKCJDb25maWdfR3JvdXAiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSk7DQoNCiAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cCo+IGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyLmVtcHR5KCkpew0KICAgIA0KDQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KICAgIA0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KLyoNCiAgICBpZihfX2V2ZW50LnJlc3BvbnNlVG8oKSl7DQogICAgICAgIGNvdXQgPDwgX190b1N0cmluZyArICJhIHJlc3BvbnNlIHRvIG15IGV2ZW50IjsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Db25maWdfR3JvdXAuZmluZCgpIikubWV0aG9kKCJmaW5kIikuY2xhc3NOYW1lKCJDb25maWdfR3JvdXAiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSkucmVzcG9uc2VUbyhfX2V2ZW50Ll91bmlxdWUoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkNvbmZpZ19Hcm91cCogYW5zd2VyOw0KICAgIA0KICAgIGpzb24gZXZKU09OID0gZXZKU09OID0ganNvbjo6cGFyc2UoX19ldmVudC0+cGF5bG9hZCgpKTsNCiAgICBpZihldkpTT05bIl9fdGhpcyJdKSB0aGlzLT5fZnJvbURvY3VtZW50KGV2SlNPTlsiX190aGlzIl0pOw0KICAgIA0KDQogICAgDQogICAgDQogICAgaWYoYW5zd2VyKXsNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiBhbnN3ZXI7DQoqLw0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwOjpmaW5kKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJDb25maWdfR3JvdXA6OmZpbmQoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uQ29uZmlnX0dyb3VwLmZpbmQoKSIpLm1ldGhvZCgiZmluZCIpLmNsYXNzTmFtZSgiQ29uZmlnX0dyb3VwIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpDb25maWdfR3JvdXAqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCiAgICANCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCg0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmdfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cDo6YWN0aXZlKGJvb2wgdil7DQogICAgdGhpcy0+X2FjdGl2ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cDo6YWN0aXZlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9hY3RpdmU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nX0dyb3VwOjplbmFibGVkKGJvb2wgdil7DQogICAgdGhpcy0+X2VuYWJsZWQgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KYm9vbCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmdfR3JvdXA6OmVuYWJsZWQoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2VuYWJsZWQ7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nX0dyb3VwOjpjb2RlKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9jb2RlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cDo6Y29kZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fY29kZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmdfR3JvdXA6Om9yZGVyKGludCB2KXsNCiAgICB0aGlzLT5fb3JkZXIgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KaW50IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cDo6b3JkZXIoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X29yZGVyOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmdfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cDo6ZGF0ZSh0aW1lX3Qgdil7DQogICAgdGhpcy0+X2RhdGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KdGltZV90IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cDo6ZGF0ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fZGF0ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmdfR3JvdXA6Om5hbWUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X25hbWUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nX0dyb3VwOjpuYW1lKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9uYW1lOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmdfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cDo6cmVtYXJrKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9yZW1hcmsgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nX0dyb3VwOjpyZW1hcmsoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3JlbWFyazsNCiAgICANCn0NCiAgICANCg0KICAgIA0KDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nX0dyb3VwOjpfdW5pcXVlKCl7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmdfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cDo6X2Zyb21Eb2N1bWVudChzdGQ6OnN0cmluZyBvYmopew0KICAgIGpzb24gZGF0YSA9IGpzb246OnBhcnNlKG9iaik7DQogICAgDQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmdfR3JvdXA6Ol90b0RvY3VtZW50KCl7DQogICAgcmV0dXJuICIiOw0KfQ0KDQogICAgDQovKg0KICAgIGlmKF9fZXZlbnQucmVzcG9uc2VUbygpKXsNCiAgICAgICAgY291dCA8PCBfX3RvU3RyaW5nICsgImEgcmVzcG9uc2UgdG8gbXkgZXZlbnQiOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLk1hcHBpbmdfR3JvdXAuc3RvcmUoKSIpLm1ldGhvZCgic3RvcmUiKS5jbGFzc05hbWUoIk1hcHBpbmdfR3JvdXAiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSkucmVzcG9uc2VUbyhfX2V2ZW50Ll91bmlxdWUoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmdfR3JvdXAqIGFuc3dlcjsNCiAgICANCiAgICBqc29uIGV2SlNPTiA9IGV2SlNPTiA9IGpzb246OnBhcnNlKF9fZXZlbnQtPnBheWxvYWQoKSk7DQogICAgaWYoZXZKU09OWyJfX3RoaXMiXSkgdGhpcy0+X2Zyb21Eb2N1bWVudChldkpTT05bIl9fdGhpcyJdKTsNCiAgICANCg0KICAgIA0KICAgIA0KICAgIGlmKGFuc3dlcil7DQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXIuX3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gYW5zd2VyOw0KKi8NCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nX0dyb3VwOjpzdG9yZSgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiTWFwcGluZ19Hcm91cDo6c3RvcmUoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uTWFwcGluZ19Hcm91cC5zdG9yZSgpIikubWV0aG9kKCJzdG9yZSIpLmNsYXNzTmFtZSgiTWFwcGluZ19Hcm91cCIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cCogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KICAgIA0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KLyoNCiAgICBpZihfX2V2ZW50LnJlc3BvbnNlVG8oKSl7DQogICAgICAgIGNvdXQgPDwgX190b1N0cmluZyArICJhIHJlc3BvbnNlIHRvIG15IGV2ZW50IjsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5NYXBwaW5nX0dyb3VwLmZpbmRBbGwoKSIpLm1ldGhvZCgiZmluZEFsbCIpLmNsYXNzTmFtZSgiTWFwcGluZ19Hcm91cCIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKS5yZXNwb25zZVRvKF9fZXZlbnQuX3VuaXF1ZSgpKTsNCg0KICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cCo+IGFuc3dlcjsNCiAgICANCiAgICBqc29uIGV2SlNPTiA9IGV2SlNPTiA9IGpzb246OnBhcnNlKF9fZXZlbnQtPnBheWxvYWQoKSk7DQogICAgaWYoZXZKU09OWyJfX3RoaXMiXSkgdGhpcy0+X2Zyb21Eb2N1bWVudChldkpTT05bIl9fdGhpcyJdKTsNCiAgICANCg0KICAgIA0KICAgIA0KICAgIGlmKGFuc3dlcil7DQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXIuX3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gYW5zd2VyOw0KKi8NCnN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cCY+IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cDo6ZmluZEFsbCgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiTWFwcGluZ19Hcm91cDo6ZmluZEFsbCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5NYXBwaW5nX0dyb3VwLmZpbmRBbGwoKSIpLm1ldGhvZCgiZmluZEFsbCIpLmNsYXNzTmFtZSgiTWFwcGluZ19Hcm91cCIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKTsNCg0KICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cCo+IGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyLmVtcHR5KCkpew0KICAgIA0KDQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KICAgIA0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KLyoNCiAgICBpZihfX2V2ZW50LnJlc3BvbnNlVG8oKSl7DQogICAgICAgIGNvdXQgPDwgX190b1N0cmluZyArICJhIHJlc3BvbnNlIHRvIG15IGV2ZW50IjsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5NYXBwaW5nX0dyb3VwLmZpbmQoKSIpLm1ldGhvZCgiZmluZCIpLmNsYXNzTmFtZSgiTWFwcGluZ19Hcm91cCIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKS5yZXNwb25zZVRvKF9fZXZlbnQuX3VuaXF1ZSgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZ19Hcm91cCogYW5zd2VyOw0KICAgIA0KICAgIGpzb24gZXZKU09OID0gZXZKU09OID0ganNvbjo6cGFyc2UoX19ldmVudC0+cGF5bG9hZCgpKTsNCiAgICBpZihldkpTT05bIl9fdGhpcyJdKSB0aGlzLT5fZnJvbURvY3VtZW50KGV2SlNPTlsiX190aGlzIl0pOw0KICAgIA0KDQogICAgDQogICAgDQogICAgaWYoYW5zd2VyKXsNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiBhbnN3ZXI7DQoqLw0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmdfR3JvdXA6OmZpbmQoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIk1hcHBpbmdfR3JvdXA6OmZpbmQoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uTWFwcGluZ19Hcm91cC5maW5kKCkiKS5tZXRob2QoImZpbmQiKS5jbGFzc05hbWUoIk1hcHBpbmdfR3JvdXAiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmdfR3JvdXAqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCiAgICANCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCg0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGU6OmFjdGl2ZShib29sIHYpew0KICAgIHRoaXMtPl9hY3RpdmUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KYm9vbCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZTo6YWN0aXZlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9hY3RpdmU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZTo6ZW5hYmxlZChib29sIHYpew0KICAgIHRoaXMtPl9lbmFibGVkID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmJvb2wgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGU6OmVuYWJsZWQoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2VuYWJsZWQ7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZTo6Y29kZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fY29kZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZTo6Y29kZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fY29kZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlOjpvcmRlcihpbnQgdil7DQogICAgdGhpcy0+X29yZGVyID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmludCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZTo6b3JkZXIoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X29yZGVyOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGU6OmRhdGUodGltZV90IHYpew0KICAgIHRoaXMtPl9kYXRlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnRpbWVfdCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZTo6ZGF0ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fZGF0ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlOjpuYW1lKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9uYW1lID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlOjpuYW1lKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9uYW1lOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGU6OnJlbWFyayhzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fcmVtYXJrID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlOjpyZW1hcmsoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3JlbWFyazsNCiAgICANCn0NCiAgICANCg0KICAgIA0KDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZTo6X3VuaXF1ZSgpew0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlOjpfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iail7DQogICAganNvbiBkYXRhID0ganNvbjo6cGFyc2Uob2JqKTsNCiAgICANCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlOjpfdG9Eb2N1bWVudCgpew0KICAgIHJldHVybiAiIjsNCn0NCg0KICAgIA0KLyoNCiAgICBpZihfX2V2ZW50LnJlc3BvbnNlVG8oKSl7DQogICAgICAgIGNvdXQgPDwgX190b1N0cmluZyArICJhIHJlc3BvbnNlIHRvIG15IGV2ZW50IjsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Ub29sX1R5cGUuc3RvcmUoKSIpLm1ldGhvZCgic3RvcmUiKS5jbGFzc05hbWUoIlRvb2xfVHlwZSIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKS5yZXNwb25zZVRvKF9fZXZlbnQuX3VuaXF1ZSgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlKiBhbnN3ZXI7DQogICAgDQogICAganNvbiBldkpTT04gPSBldkpTT04gPSBqc29uOjpwYXJzZShfX2V2ZW50LT5wYXlsb2FkKCkpOw0KICAgIGlmKGV2SlNPTlsiX190aGlzIl0pIHRoaXMtPl9mcm9tRG9jdW1lbnQoZXZKU09OWyJfX3RoaXMiXSk7DQogICAgDQoNCiAgICANCiAgICANCiAgICBpZihhbnN3ZXIpew0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuIGFuc3dlcjsNCiovDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGU6OnN0b3JlKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJUb29sX1R5cGU6OnN0b3JlKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLlRvb2xfVHlwZS5zdG9yZSgpIikubWV0aG9kKCJzdG9yZSIpLmNsYXNzTmFtZSgiVG9vbF9UeXBlIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGUqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCiAgICANCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCi8qDQogICAgaWYoX19ldmVudC5yZXNwb25zZVRvKCkpew0KICAgICAgICBjb3V0IDw8IF9fdG9TdHJpbmcgKyAiYSByZXNwb25zZSB0byBteSBldmVudCI7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uVG9vbF9UeXBlLmZpbmRBbGwoKSIpLm1ldGhvZCgiZmluZEFsbCIpLmNsYXNzTmFtZSgiVG9vbF9UeXBlIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpLnJlc3BvbnNlVG8oX19ldmVudC5fdW5pcXVlKCkpOw0KDQogICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGUqPiBhbnN3ZXI7DQogICAgDQogICAganNvbiBldkpTT04gPSBldkpTT04gPSBqc29uOjpwYXJzZShfX2V2ZW50LT5wYXlsb2FkKCkpOw0KICAgIGlmKGV2SlNPTlsiX190aGlzIl0pIHRoaXMtPl9mcm9tRG9jdW1lbnQoZXZKU09OWyJfX3RoaXMiXSk7DQogICAgDQoNCiAgICANCiAgICANCiAgICBpZihhbnN3ZXIpew0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuIGFuc3dlcjsNCiovDQpzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZSY+IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlOjpmaW5kQWxsKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJUb29sX1R5cGU6OmZpbmRBbGwoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uVG9vbF9UeXBlLmZpbmRBbGwoKSIpLm1ldGhvZCgiZmluZEFsbCIpLmNsYXNzTmFtZSgiVG9vbF9UeXBlIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGUqPiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlci5lbXB0eSgpKXsNCiAgICANCg0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCiAgICANCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCi8qDQogICAgaWYoX19ldmVudC5yZXNwb25zZVRvKCkpew0KICAgICAgICBjb3V0IDw8IF9fdG9TdHJpbmcgKyAiYSByZXNwb25zZSB0byBteSBldmVudCI7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uVG9vbF9UeXBlLmZpbmQoKSIpLm1ldGhvZCgiZmluZCIpLmNsYXNzTmFtZSgiVG9vbF9UeXBlIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpLnJlc3BvbnNlVG8oX19ldmVudC5fdW5pcXVlKCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGUqIGFuc3dlcjsNCiAgICANCiAgICBqc29uIGV2SlNPTiA9IGV2SlNPTiA9IGpzb246OnBhcnNlKF9fZXZlbnQtPnBheWxvYWQoKSk7DQogICAgaWYoZXZKU09OWyJfX3RoaXMiXSkgdGhpcy0+X2Zyb21Eb2N1bWVudChldkpTT05bIl9fdGhpcyJdKTsNCiAgICANCg0KICAgIA0KICAgIA0KICAgIGlmKGFuc3dlcil7DQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXIuX3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gYW5zd2VyOw0KKi8NCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZTo6ZmluZCgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiVG9vbF9UeXBlOjpmaW5kKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLlRvb2xfVHlwZS5maW5kKCkiKS5tZXRob2QoImZpbmQiKS5jbGFzc05hbWUoIlRvb2xfVHlwZSIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6VG9vbF9UeXBlKiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlciE9bnVsbHB0cil7DQogICAgDQoNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQogICAgDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQoNCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6YWN0aXZlKGJvb2wgdil7DQogICAgdGhpcy0+X2FjdGl2ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQ6OmFjdGl2ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fYWN0aXZlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50OjplbmFibGVkKGJvb2wgdil7DQogICAgdGhpcy0+X2VuYWJsZWQgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KYm9vbCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50OjplbmFibGVkKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9lbmFibGVkOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50Ojpjb2RlKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9jb2RlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQ6OmNvZGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2NvZGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQ6Om9yZGVyKGludCB2KXsNCiAgICB0aGlzLT5fb3JkZXIgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KaW50IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQ6Om9yZGVyKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9vcmRlcjsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6ZGF0ZSh0aW1lX3Qgdil7DQogICAgdGhpcy0+X2RhdGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KdGltZV90IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQ6OmRhdGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2RhdGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQ6Om5hbWUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X25hbWUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6bmFtZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fbmFtZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6cmVtYXJrKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9yZW1hcmsgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6cmVtYXJrKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9yZW1hcms7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQ6OmNsYXNzTmFtZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fY2xhc3NOYW1lID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQ6OmNsYXNzTmFtZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fY2xhc3NOYW1lOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50OjptZXRob2Qoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X21ldGhvZCA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50OjptZXRob2QoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X21ldGhvZDsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6cGF5bG9hZChzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fcGF5bG9hZCA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50OjpwYXlsb2FkKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9wYXlsb2FkOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50OjpjYXJyaWVyKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgdil7DQogICAgdGhpcy0+X2NhcnJpZXIgPSAmdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6Y2Fycmllcigpew0KICAgIA0KICAgIHJldHVybiAqKHRoaXMtPl9jYXJyaWVyKTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6c2VuZGVyKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgdil7DQogICAgdGhpcy0+X3NlbmRlciA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50OjpzZW5kZXIoKXsNCiAgICANCiAgICByZXR1cm4gKih0aGlzLT5fc2VuZGVyKTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6cmVjaXBpZW50KGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgdil7DQogICAgdGhpcy0+X3JlY2lwaWVudCA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50OjpyZWNpcGllbnQoKXsNCiAgICANCiAgICByZXR1cm4gKih0aGlzLT5fcmVjaXBpZW50KTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6cmVzcG9uc2VUbyhlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50JiB2KXsNCiAgICB0aGlzLT5fcmVzcG9uc2VUbyA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6cmVzcG9uc2VUbygpew0KICAgIA0KICAgIHJldHVybiAqKHRoaXMtPl9yZXNwb25zZVRvKTsNCiAgICANCn0NCiAgICANCg0KICAgIA0KDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQ6Ol91bmlxdWUoKXsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQ6Ol9mcm9tRG9jdW1lbnQoc3RkOjpzdHJpbmcgb2JqKXsNCiAgICBqc29uIGRhdGEgPSBqc29uOjpwYXJzZShvYmopOw0KICAgIA0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6X3RvRG9jdW1lbnQoKXsNCiAgICByZXR1cm4gIiI7DQp9DQoNCiAgICANCi8qDQogICAgaWYoX19ldmVudC5yZXNwb25zZVRvKCkpew0KICAgICAgICBjb3V0IDw8IF9fdG9TdHJpbmcgKyAiYSByZXNwb25zZSB0byBteSBldmVudCI7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uRXZlbnQuc3RvcmUoKSIpLm1ldGhvZCgic3RvcmUiKS5jbGFzc05hbWUoIkV2ZW50IikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpLnJlc3BvbnNlVG8oX19ldmVudC5fdW5pcXVlKCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCogYW5zd2VyOw0KICAgIA0KICAgIGpzb24gZXZKU09OID0gZXZKU09OID0ganNvbjo6cGFyc2UoX19ldmVudC0+cGF5bG9hZCgpKTsNCiAgICBpZihldkpTT05bIl9fdGhpcyJdKSB0aGlzLT5fZnJvbURvY3VtZW50KGV2SlNPTlsiX190aGlzIl0pOw0KICAgIA0KDQogICAgDQogICAgDQogICAgaWYoYW5zd2VyKXsNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiBhbnN3ZXI7DQoqLw0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6c3RvcmUoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIkV2ZW50OjpzdG9yZSgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5FdmVudC5zdG9yZSgpIikubWV0aG9kKCJzdG9yZSIpLmNsYXNzTmFtZSgiRXZlbnQiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlciE9bnVsbHB0cil7DQogICAgDQoNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQogICAgDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQovKg0KICAgIGlmKF9fZXZlbnQucmVzcG9uc2VUbygpKXsNCiAgICAgICAgY291dCA8PCBfX3RvU3RyaW5nICsgImEgcmVzcG9uc2UgdG8gbXkgZXZlbnQiOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLkV2ZW50LmZpbmRBbGwoKSIpLm1ldGhvZCgiZmluZEFsbCIpLmNsYXNzTmFtZSgiRXZlbnQiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSkucmVzcG9uc2VUbyhfX2V2ZW50Ll91bmlxdWUoKSk7DQoNCiAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50Kj4gYW5zd2VyOw0KICAgIA0KICAgIGpzb24gZXZKU09OID0gZXZKU09OID0ganNvbjo6cGFyc2UoX19ldmVudC0+cGF5bG9hZCgpKTsNCiAgICBpZihldkpTT05bIl9fdGhpcyJdKSB0aGlzLT5fZnJvbURvY3VtZW50KGV2SlNPTlsiX190aGlzIl0pOw0KICAgIA0KDQogICAgDQogICAgDQogICAgaWYoYW5zd2VyKXsNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiBhbnN3ZXI7DQoqLw0Kc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCY+IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQ6OmZpbmRBbGwoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIkV2ZW50OjpmaW5kQWxsKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLkV2ZW50LmZpbmRBbGwoKSIpLm1ldGhvZCgiZmluZEFsbCIpLmNsYXNzTmFtZSgiRXZlbnQiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSk7DQoNCiAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50Kj4gYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIuZW1wdHkoKSl7DQogICAgDQoNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQogICAgDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQovKg0KICAgIGlmKF9fZXZlbnQucmVzcG9uc2VUbygpKXsNCiAgICAgICAgY291dCA8PCBfX3RvU3RyaW5nICsgImEgcmVzcG9uc2UgdG8gbXkgZXZlbnQiOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLkV2ZW50LmZpbmQoKSIpLm1ldGhvZCgiZmluZCIpLmNsYXNzTmFtZSgiRXZlbnQiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSkucmVzcG9uc2VUbyhfX2V2ZW50Ll91bmlxdWUoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KiBhbnN3ZXI7DQogICAgDQogICAganNvbiBldkpTT04gPSBldkpTT04gPSBqc29uOjpwYXJzZShfX2V2ZW50LT5wYXlsb2FkKCkpOw0KICAgIGlmKGV2SlNPTlsiX190aGlzIl0pIHRoaXMtPl9mcm9tRG9jdW1lbnQoZXZKU09OWyJfX3RoaXMiXSk7DQogICAgDQoNCiAgICANCiAgICANCiAgICBpZihhbnN3ZXIpew0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuIGFuc3dlcjsNCiovDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50OjpmaW5kKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJFdmVudDo6ZmluZCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5FdmVudC5maW5kKCkiKS5tZXRob2QoImZpbmQiKS5jbGFzc05hbWUoIkV2ZW50IikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KICAgIA0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KLyoNCiAgICBpZihfX2V2ZW50LnJlc3BvbnNlVG8oKSl7DQogICAgICAgIGNvdXQgPDwgX190b1N0cmluZyArICJhIHJlc3BvbnNlIHRvIG15IGV2ZW50IjsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5FdmVudC5saXN0ZW4oKSIpLm1ldGhvZCgibGlzdGVuIikuY2xhc3NOYW1lKCJFdmVudCIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKS5yZXNwb25zZVRvKF9fZXZlbnQuX3VuaXF1ZSgpKTsNCg0KICAgIHZvaWQgYW5zd2VyOw0KICAgIA0KICAgIGpzb24gZXZKU09OID0gZXZKU09OID0ganNvbjo6cGFyc2UoX19ldmVudC0+cGF5bG9hZCgpKTsNCiAgICBpZihldkpTT05bIl9fdGhpcyJdKSB0aGlzLT5fZnJvbURvY3VtZW50KGV2SlNPTlsiX190aGlzIl0pOw0KICAgIA0KICAgIGlmKGV2SlNPTlsibm9kZSJdKSBub2RlID0gZXZKU09OWyJub2RlIl07DQogICAgDQoNCiAgICANCiAgICANCiAgICBpZihhbnN3ZXIpew0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoKHN0ZDo6c3RyaW5nKWFuc3dlcik7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gYW5zd2VyOw0KKi8NCnZvaWQgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudDo6bGlzdGVuKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgbm9kZSl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJFdmVudDo6bGlzdGVuKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLkV2ZW50Lmxpc3RlbigpIikubWV0aG9kKCJsaXN0ZW4iKS5jbGFzc05hbWUoIkV2ZW50IikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgdm9pZCBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlciE9bnVsbHB0cil7DQogICAgDQoNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKChzdGQ6OnN0cmluZylhbnN3ZXIpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KICAgIA0KICAgIHJldHVybiBhbnN3ZXI7DQp9DQogICAgDQovKg0KICAgIGlmKF9fZXZlbnQucmVzcG9uc2VUbygpKXsNCiAgICAgICAgY291dCA8PCBfX3RvU3RyaW5nICsgImEgcmVzcG9uc2UgdG8gbXkgZXZlbnQiOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLkV2ZW50LnRyaWdnZXIoKSIpLm1ldGhvZCgidHJpZ2dlciIpLmNsYXNzTmFtZSgiRXZlbnQiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSkucmVzcG9uc2VUbyhfX2V2ZW50Ll91bmlxdWUoKSk7DQoNCiAgICB2b2lkIGFuc3dlcjsNCiAgICANCiAgICBqc29uIGV2SlNPTiA9IGV2SlNPTiA9IGpzb246OnBhcnNlKF9fZXZlbnQtPnBheWxvYWQoKSk7DQogICAgaWYoZXZKU09OWyJfX3RoaXMiXSkgdGhpcy0+X2Zyb21Eb2N1bWVudChldkpTT05bIl9fdGhpcyJdKTsNCiAgICANCg0KICAgIA0KICAgIA0KICAgIGlmKGFuc3dlcil7DQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZCgoc3RkOjpzdHJpbmcpYW5zd2VyKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiBhbnN3ZXI7DQoqLw0Kdm9pZCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50Ojp0cmlnZ2VyKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJFdmVudDo6dHJpZ2dlcigpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5FdmVudC50cmlnZ2VyKCkiKS5tZXRob2QoInRyaWdnZXIiKS5jbGFzc05hbWUoIkV2ZW50IikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgdm9pZCBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlciE9bnVsbHB0cil7DQogICAgDQoNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKChzdGQ6OnN0cmluZylhbnN3ZXIpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KICAgIA0KICAgIHJldHVybiBhbnN3ZXI7DQp9DQogICAgDQovKg0KICAgIGlmKF9fZXZlbnQucmVzcG9uc2VUbygpKXsNCiAgICAgICAgY291dCA8PCBfX3RvU3RyaW5nICsgImEgcmVzcG9uc2UgdG8gbXkgZXZlbnQiOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLkV2ZW50LnByb2Nlc3MoKSIpLm1ldGhvZCgicHJvY2VzcyIpLmNsYXNzTmFtZSgiRXZlbnQiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSkucmVzcG9uc2VUbyhfX2V2ZW50Ll91bmlxdWUoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KiBhbnN3ZXI7DQogICAgDQogICAganNvbiBldkpTT04gPSBldkpTT04gPSBqc29uOjpwYXJzZShfX2V2ZW50LT5wYXlsb2FkKCkpOw0KICAgIGlmKGV2SlNPTlsiX190aGlzIl0pIHRoaXMtPl9mcm9tRG9jdW1lbnQoZXZKU09OWyJfX3RoaXMiXSk7DQogICAgDQoNCiAgICANCiAgICANCiAgICBpZihhbnN3ZXIpew0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuIGFuc3dlcjsNCiovDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50Ojpwcm9jZXNzKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJFdmVudDo6cHJvY2VzcygpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5FdmVudC5wcm9jZXNzKCkiKS5tZXRob2QoInByb2Nlc3MiKS5jbGFzc05hbWUoIkV2ZW50IikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KICAgIA0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KDQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjphY3RpdmUoYm9vbCB2KXsNCiAgICB0aGlzLT5fYWN0aXZlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmJvb2wgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjphY3RpdmUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2FjdGl2ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OmVuYWJsZWQoYm9vbCB2KXsNCiAgICB0aGlzLT5fZW5hYmxlZCA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZTo6ZW5hYmxlZCgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fZW5hYmxlZDsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OmNvZGUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X2NvZGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpjb2RlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9jb2RlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZTo6b3JkZXIoaW50IHYpew0KICAgIHRoaXMtPl9vcmRlciA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQppbnQgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpvcmRlcigpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fb3JkZXI7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpkYXRlKHRpbWVfdCB2KXsNCiAgICB0aGlzLT5fZGF0ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQp0aW1lX3QgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpkYXRlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9kYXRlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZTo6bmFtZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fbmFtZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6Om5hbWUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X25hbWU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpyZW1hcmsoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X3JlbWFyayA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OnJlbWFyaygpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fcmVtYXJrOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZTo6YWRkcmVzcyhzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fYWRkcmVzcyA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OmFkZHJlc3MoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2FkZHJlc3M7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpiYWNrdXAoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiB2KXsNCiAgICB0aGlzLT5fYmFja3VwID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZTo6YmFja3VwKCl7DQogICAgDQogICAgcmV0dXJuICoodGhpcy0+X2JhY2t1cCk7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpwYXJlbnQoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiB2KXsNCiAgICB0aGlzLT5fcGFyZW50ID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZTo6cGFyZW50KCl7DQogICAgDQogICAgcmV0dXJuICoodGhpcy0+X3BhcmVudCk7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpncm91cChlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXAmIHYpew0KICAgIHRoaXMtPl9ncm91cCA9ICZ2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6Omdyb3VwKCl7DQogICAgDQogICAgcmV0dXJuICoodGhpcy0+X2dyb3VwKTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OmNvbnRleHQoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQmIHYpew0KICAgIHRoaXMtPl9jb250ZXh0ID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpjb250ZXh0KCl7DQogICAgDQogICAgcmV0dXJuICoodGhpcy0+X2NvbnRleHQpOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZTo6cG9ydChpbnQgdil7DQogICAgdGhpcy0+X3BvcnQgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KaW50IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZTo6cG9ydCgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fcG9ydDsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6Om9ubGluZSh0aW1lX3Qgdil7DQogICAgdGhpcy0+X29ubGluZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQp0aW1lX3QgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpvbmxpbmUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X29ubGluZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OnNlY3VyZShib29sIHYpew0KICAgIHRoaXMtPl9zZWN1cmUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KYm9vbCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OnNlY3VyZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fc2VjdXJlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZTo6dHlwZShlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZSYgdil7DQogICAgdGhpcy0+X3R5cGUgPSAmdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OnR5cGUoKXsNCiAgICANCiAgICByZXR1cm4gKih0aGlzLT5fdHlwZSk7DQogICAgDQp9DQogICAgDQoNCiAgICANCg0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZTo6X3VuaXF1ZSgpew0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6Ol9mcm9tRG9jdW1lbnQoc3RkOjpzdHJpbmcgb2JqKXsNCiAgICBqc29uIGRhdGEgPSBqc29uOjpwYXJzZShvYmopOw0KICAgIA0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpfdG9Eb2N1bWVudCgpew0KICAgIHJldHVybiAiIjsNCn0NCg0KICAgIA0KLyoNCiAgICBpZihfX2V2ZW50LnJlc3BvbnNlVG8oKSl7DQogICAgICAgIGNvdXQgPDwgX190b1N0cmluZyArICJhIHJlc3BvbnNlIHRvIG15IGV2ZW50IjsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Ob2RlLnN0b3JlKCkiKS5tZXRob2QoInN0b3JlIikuY2xhc3NOYW1lKCJOb2RlIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpLnJlc3BvbnNlVG8oX19ldmVudC5fdW5pcXVlKCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlKiBhbnN3ZXI7DQogICAgDQogICAganNvbiBldkpTT04gPSBldkpTT04gPSBqc29uOjpwYXJzZShfX2V2ZW50LT5wYXlsb2FkKCkpOw0KICAgIGlmKGV2SlNPTlsiX190aGlzIl0pIHRoaXMtPl9mcm9tRG9jdW1lbnQoZXZKU09OWyJfX3RoaXMiXSk7DQogICAgDQoNCiAgICANCiAgICANCiAgICBpZihhbnN3ZXIpew0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuIGFuc3dlcjsNCiovDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZTo6c3RvcmUoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIk5vZGU6OnN0b3JlKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLk5vZGUuc3RvcmUoKSIpLm1ldGhvZCgic3RvcmUiKS5jbGFzc05hbWUoIk5vZGUiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCiAgICANCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCi8qDQogICAgaWYoX19ldmVudC5yZXNwb25zZVRvKCkpew0KICAgICAgICBjb3V0IDw8IF9fdG9TdHJpbmcgKyAiYSByZXNwb25zZSB0byBteSBldmVudCI7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uTm9kZS5maW5kQWxsKCkiKS5tZXRob2QoImZpbmRBbGwiKS5jbGFzc05hbWUoIk5vZGUiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSkucmVzcG9uc2VUbyhfX2V2ZW50Ll91bmlxdWUoKSk7DQoNCiAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUqPiBhbnN3ZXI7DQogICAgDQogICAganNvbiBldkpTT04gPSBldkpTT04gPSBqc29uOjpwYXJzZShfX2V2ZW50LT5wYXlsb2FkKCkpOw0KICAgIGlmKGV2SlNPTlsiX190aGlzIl0pIHRoaXMtPl9mcm9tRG9jdW1lbnQoZXZKU09OWyJfX3RoaXMiXSk7DQogICAgDQoNCiAgICANCiAgICANCiAgICBpZihhbnN3ZXIpew0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuIGFuc3dlcjsNCiovDQpzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUmPiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OmZpbmRBbGwoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIk5vZGU6OmZpbmRBbGwoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uTm9kZS5maW5kQWxsKCkiKS5tZXRob2QoImZpbmRBbGwiKS5jbGFzc05hbWUoIk5vZGUiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSk7DQoNCiAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUqPiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlci5lbXB0eSgpKXsNCiAgICANCg0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCiAgICANCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCi8qDQogICAgaWYoX19ldmVudC5yZXNwb25zZVRvKCkpew0KICAgICAgICBjb3V0IDw8IF9fdG9TdHJpbmcgKyAiYSByZXNwb25zZSB0byBteSBldmVudCI7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uTm9kZS5maW5kKCkiKS5tZXRob2QoImZpbmQiKS5jbGFzc05hbWUoIk5vZGUiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSkucmVzcG9uc2VUbyhfX2V2ZW50Ll91bmlxdWUoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUqIGFuc3dlcjsNCiAgICANCiAgICBqc29uIGV2SlNPTiA9IGV2SlNPTiA9IGpzb246OnBhcnNlKF9fZXZlbnQtPnBheWxvYWQoKSk7DQogICAgaWYoZXZKU09OWyJfX3RoaXMiXSkgdGhpcy0+X2Zyb21Eb2N1bWVudChldkpTT05bIl9fdGhpcyJdKTsNCiAgICANCg0KICAgIA0KICAgIA0KICAgIGlmKGFuc3dlcil7DQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXIuX3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gYW5zd2VyOw0KKi8NCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjpmaW5kKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJOb2RlOjpmaW5kKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLk5vZGUuZmluZCgpIikubWV0aG9kKCJmaW5kIikuY2xhc3NOYW1lKCJOb2RlIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlKiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlciE9bnVsbHB0cil7DQogICAgDQoNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQogICAgDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQovKg0KICAgIGlmKF9fZXZlbnQucmVzcG9uc2VUbygpKXsNCiAgICAgICAgY291dCA8PCBfX3RvU3RyaW5nICsgImEgcmVzcG9uc2UgdG8gbXkgZXZlbnQiOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLk5vZGUuYXV0aENvZGUoKSIpLm1ldGhvZCgiYXV0aENvZGUiKS5jbGFzc05hbWUoIk5vZGUiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSkucmVzcG9uc2VUbyhfX2V2ZW50Ll91bmlxdWUoKSk7DQoNCiAgICB2b2lkIGFuc3dlcjsNCiAgICANCiAgICBqc29uIGV2SlNPTiA9IGV2SlNPTiA9IGpzb246OnBhcnNlKF9fZXZlbnQtPnBheWxvYWQoKSk7DQogICAgaWYoZXZKU09OWyJfX3RoaXMiXSkgdGhpcy0+X2Zyb21Eb2N1bWVudChldkpTT05bIl9fdGhpcyJdKTsNCiAgICANCiAgICBpZihldkpTT05bImNvZGUiXSkgY29kZSA9IGV2SlNPTlsiY29kZSJdOw0KICAgIA0KICAgIGlmKGV2SlNPTlsidG9vbCJdKSB0b29sID0gZXZKU09OWyJ0b29sIl07DQogICAgDQoNCiAgICANCiAgICANCiAgICBpZihhbnN3ZXIpew0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoKHN0ZDo6c3RyaW5nKWFuc3dlcik7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gYW5zd2VyOw0KKi8NCnZvaWQgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlOjphdXRoQ29kZShzdGQ6OnN0cmluZyBjb2RlLCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2wmIHRvb2wpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiTm9kZTo6YXV0aENvZGUoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uTm9kZS5hdXRoQ29kZSgpIikubWV0aG9kKCJhdXRoQ29kZSIpLmNsYXNzTmFtZSgiTm9kZSIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKTsNCg0KICAgIHZvaWQgYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZCgoc3RkOjpzdHJpbmcpYW5zd2VyKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCiAgICANCiAgICByZXR1cm4gYW5zd2VyOw0KfQ0KICAgIA0KLyoNCiAgICBpZihfX2V2ZW50LnJlc3BvbnNlVG8oKSl7DQogICAgICAgIGNvdXQgPDwgX190b1N0cmluZyArICJhIHJlc3BvbnNlIHRvIG15IGV2ZW50IjsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Ob2RlLmluaXQoKSIpLm1ldGhvZCgiaW5pdCIpLmNsYXNzTmFtZSgiTm9kZSIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKS5yZXNwb25zZVRvKF9fZXZlbnQuX3VuaXF1ZSgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZSogYW5zd2VyOw0KICAgIA0KICAgIGpzb24gZXZKU09OID0gZXZKU09OID0ganNvbjo6cGFyc2UoX19ldmVudC0+cGF5bG9hZCgpKTsNCiAgICBpZihldkpTT05bIl9fdGhpcyJdKSB0aGlzLT5fZnJvbURvY3VtZW50KGV2SlNPTlsiX190aGlzIl0pOw0KICAgIA0KICAgIGlmKGV2SlNPTlsib25saW5lIl0pIG9ubGluZSA9IGV2SlNPTlsib25saW5lIl07DQogICAgDQogICAgaWYoZXZKU09OWyJjb2RlIl0pIGNvZGUgPSBldkpTT05bImNvZGUiXTsNCiAgICANCiAgICBpZihldkpTT05bInVpZCJdKSB1aWQgPSBldkpTT05bInVpZCJdOw0KICAgIA0KDQogICAgDQogICAgDQogICAgaWYoYW5zd2VyKXsNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiBhbnN3ZXI7DQoqLw0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGU6OmluaXQoaW50IG9ubGluZSwgc3RkOjpzdHJpbmcgY29kZSwgc3RkOjpzdHJpbmcgdWlkKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIk5vZGU6OmluaXQoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uTm9kZS5pbml0KCkiKS5tZXRob2QoImluaXQiKS5jbGFzc05hbWUoIk5vZGUiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGUqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCiAgICANCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCg0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQ6OmFjdGl2ZShib29sIHYpew0KICAgIHRoaXMtPl9hY3RpdmUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KYm9vbCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dDo6YWN0aXZlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9hY3RpdmU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Db250ZXh0JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dDo6ZW5hYmxlZChib29sIHYpew0KICAgIHRoaXMtPl9lbmFibGVkID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmJvb2wgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQ6OmVuYWJsZWQoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2VuYWJsZWQ7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Db250ZXh0JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dDo6Y29kZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fY29kZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dDo6Y29kZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fY29kZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Db250ZXh0OjpvcmRlcihpbnQgdil7DQogICAgdGhpcy0+X29yZGVyID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmludCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dDo6b3JkZXIoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X29yZGVyOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQ6OmRhdGUodGltZV90IHYpew0KICAgIHRoaXMtPl9kYXRlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnRpbWVfdCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dDo6ZGF0ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fZGF0ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Db250ZXh0OjpuYW1lKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9uYW1lID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Db250ZXh0OjpuYW1lKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9uYW1lOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQ6OnJlbWFyayhzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fcmVtYXJrID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Db250ZXh0OjpyZW1hcmsoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3JlbWFyazsNCiAgICANCn0NCiAgICANCg0KICAgIA0KDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Db250ZXh0JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dDo6X3VuaXF1ZSgpew0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Db250ZXh0OjpfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iail7DQogICAganNvbiBkYXRhID0ganNvbjo6cGFyc2Uob2JqKTsNCiAgICANCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Db250ZXh0OjpfdG9Eb2N1bWVudCgpew0KICAgIHJldHVybiAiIjsNCn0NCg0KICAgIA0KLyoNCiAgICBpZihfX2V2ZW50LnJlc3BvbnNlVG8oKSl7DQogICAgICAgIGNvdXQgPDwgX190b1N0cmluZyArICJhIHJlc3BvbnNlIHRvIG15IGV2ZW50IjsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Ob2RlX0NvbnRleHQuc3RvcmUoKSIpLm1ldGhvZCgic3RvcmUiKS5jbGFzc05hbWUoIk5vZGVfQ29udGV4dCIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKS5yZXNwb25zZVRvKF9fZXZlbnQuX3VuaXF1ZSgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Db250ZXh0KiBhbnN3ZXI7DQogICAgDQogICAganNvbiBldkpTT04gPSBldkpTT04gPSBqc29uOjpwYXJzZShfX2V2ZW50LT5wYXlsb2FkKCkpOw0KICAgIGlmKGV2SlNPTlsiX190aGlzIl0pIHRoaXMtPl9mcm9tRG9jdW1lbnQoZXZKU09OWyJfX3RoaXMiXSk7DQogICAgDQoNCiAgICANCiAgICANCiAgICBpZihhbnN3ZXIpew0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuIGFuc3dlcjsNCiovDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQ6OnN0b3JlKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJOb2RlX0NvbnRleHQ6OnN0b3JlKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLk5vZGVfQ29udGV4dC5zdG9yZSgpIikubWV0aG9kKCJzdG9yZSIpLmNsYXNzTmFtZSgiTm9kZV9Db250ZXh0IikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCiAgICANCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCi8qDQogICAgaWYoX19ldmVudC5yZXNwb25zZVRvKCkpew0KICAgICAgICBjb3V0IDw8IF9fdG9TdHJpbmcgKyAiYSByZXNwb25zZSB0byBteSBldmVudCI7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uTm9kZV9Db250ZXh0LmZpbmRBbGwoKSIpLm1ldGhvZCgiZmluZEFsbCIpLmNsYXNzTmFtZSgiTm9kZV9Db250ZXh0IikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpLnJlc3BvbnNlVG8oX19ldmVudC5fdW5pcXVlKCkpOw0KDQogICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQqPiBhbnN3ZXI7DQogICAgDQogICAganNvbiBldkpTT04gPSBldkpTT04gPSBqc29uOjpwYXJzZShfX2V2ZW50LT5wYXlsb2FkKCkpOw0KICAgIGlmKGV2SlNPTlsiX190aGlzIl0pIHRoaXMtPl9mcm9tRG9jdW1lbnQoZXZKU09OWyJfX3RoaXMiXSk7DQogICAgDQoNCiAgICANCiAgICANCiAgICBpZihhbnN3ZXIpew0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuIGFuc3dlcjsNCiovDQpzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dCY+IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Db250ZXh0OjpmaW5kQWxsKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJOb2RlX0NvbnRleHQ6OmZpbmRBbGwoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uTm9kZV9Db250ZXh0LmZpbmRBbGwoKSIpLm1ldGhvZCgiZmluZEFsbCIpLmNsYXNzTmFtZSgiTm9kZV9Db250ZXh0IikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQqPiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlci5lbXB0eSgpKXsNCiAgICANCg0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCiAgICANCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCi8qDQogICAgaWYoX19ldmVudC5yZXNwb25zZVRvKCkpew0KICAgICAgICBjb3V0IDw8IF9fdG9TdHJpbmcgKyAiYSByZXNwb25zZSB0byBteSBldmVudCI7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uTm9kZV9Db250ZXh0LmZpbmQoKSIpLm1ldGhvZCgiZmluZCIpLmNsYXNzTmFtZSgiTm9kZV9Db250ZXh0IikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpLnJlc3BvbnNlVG8oX19ldmVudC5fdW5pcXVlKCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0NvbnRleHQqIGFuc3dlcjsNCiAgICANCiAgICBqc29uIGV2SlNPTiA9IGV2SlNPTiA9IGpzb246OnBhcnNlKF9fZXZlbnQtPnBheWxvYWQoKSk7DQogICAgaWYoZXZKU09OWyJfX3RoaXMiXSkgdGhpcy0+X2Zyb21Eb2N1bWVudChldkpTT05bIl9fdGhpcyJdKTsNCiAgICANCg0KICAgIA0KICAgIA0KICAgIGlmKGFuc3dlcil7DQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXIuX3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gYW5zd2VyOw0KKi8NCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Db250ZXh0JiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfQ29udGV4dDo6ZmluZCgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiTm9kZV9Db250ZXh0OjpmaW5kKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLk5vZGVfQ29udGV4dC5maW5kKCkiKS5tZXRob2QoImZpbmQiKS5jbGFzc05hbWUoIk5vZGVfQ29udGV4dCIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Db250ZXh0KiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlciE9bnVsbHB0cil7DQogICAgDQoNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQogICAgDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQoNCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXA6OmFjdGl2ZShib29sIHYpew0KICAgIHRoaXMtPl9hY3RpdmUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KYm9vbCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXA6OmFjdGl2ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fYWN0aXZlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cDo6ZW5hYmxlZChib29sIHYpew0KICAgIHRoaXMtPl9lbmFibGVkID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmJvb2wgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwOjplbmFibGVkKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9lbmFibGVkOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cDo6Y29kZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fY29kZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXA6OmNvZGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2NvZGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwOjpvcmRlcihpbnQgdil7DQogICAgdGhpcy0+X29yZGVyID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmludCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXA6Om9yZGVyKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9vcmRlcjsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXA6OmRhdGUodGltZV90IHYpew0KICAgIHRoaXMtPl9kYXRlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnRpbWVfdCBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXA6OmRhdGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2RhdGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwOjpuYW1lKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9uYW1lID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cDo6bmFtZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fbmFtZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXA6OnJlbWFyayhzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fcmVtYXJrID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cDo6cmVtYXJrKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9yZW1hcms7DQogICAgDQp9DQogICAgDQoNCiAgICANCg0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cDo6X3VuaXF1ZSgpew0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXA6Ol9mcm9tRG9jdW1lbnQoc3RkOjpzdHJpbmcgb2JqKXsNCiAgICBqc29uIGRhdGEgPSBqc29uOjpwYXJzZShvYmopOw0KICAgIA0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwOjpfdG9Eb2N1bWVudCgpew0KICAgIHJldHVybiAiIjsNCn0NCg0KICAgIA0KLyoNCiAgICBpZihfX2V2ZW50LnJlc3BvbnNlVG8oKSl7DQogICAgICAgIGNvdXQgPDwgX190b1N0cmluZyArICJhIHJlc3BvbnNlIHRvIG15IGV2ZW50IjsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Ob2RlX0dyb3VwLnN0b3JlKCkiKS5tZXRob2QoInN0b3JlIikuY2xhc3NOYW1lKCJOb2RlX0dyb3VwIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpLnJlc3BvbnNlVG8oX19ldmVudC5fdW5pcXVlKCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwKiBhbnN3ZXI7DQogICAgDQogICAganNvbiBldkpTT04gPSBldkpTT04gPSBqc29uOjpwYXJzZShfX2V2ZW50LT5wYXlsb2FkKCkpOw0KICAgIGlmKGV2SlNPTlsiX190aGlzIl0pIHRoaXMtPl9mcm9tRG9jdW1lbnQoZXZKU09OWyJfX3RoaXMiXSk7DQogICAgDQoNCiAgICANCiAgICANCiAgICBpZihhbnN3ZXIpew0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuIGFuc3dlcjsNCiovDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXAmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cDo6c3RvcmUoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIk5vZGVfR3JvdXA6OnN0b3JlKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLk5vZGVfR3JvdXAuc3RvcmUoKSIpLm1ldGhvZCgic3RvcmUiKS5jbGFzc05hbWUoIk5vZGVfR3JvdXAiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXAqIGFuc3dlcjsNCg0KICAgIA0KDQogICAgDQogICAgaWYoYW5zd2VyIT1udWxscHRyKXsNCiAgICANCg0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCiAgICANCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCi8qDQogICAgaWYoX19ldmVudC5yZXNwb25zZVRvKCkpew0KICAgICAgICBjb3V0IDw8IF9fdG9TdHJpbmcgKyAiYSByZXNwb25zZSB0byBteSBldmVudCI7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uTm9kZV9Hcm91cC5maW5kQWxsKCkiKS5tZXRob2QoImZpbmRBbGwiKS5jbGFzc05hbWUoIk5vZGVfR3JvdXAiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSkucmVzcG9uc2VUbyhfX2V2ZW50Ll91bmlxdWUoKSk7DQoNCiAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXAqPiBhbnN3ZXI7DQogICAgDQogICAganNvbiBldkpTT04gPSBldkpTT04gPSBqc29uOjpwYXJzZShfX2V2ZW50LT5wYXlsb2FkKCkpOw0KICAgIGlmKGV2SlNPTlsiX190aGlzIl0pIHRoaXMtPl9mcm9tRG9jdW1lbnQoZXZKU09OWyJfX3RoaXMiXSk7DQogICAgDQoNCiAgICANCiAgICANCiAgICBpZihhbnN3ZXIpew0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuIGFuc3dlcjsNCiovDQpzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXAmPiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXA6OmZpbmRBbGwoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIk5vZGVfR3JvdXA6OmZpbmRBbGwoKTogIjsNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uTm9kZV9Hcm91cC5maW5kQWxsKCkiKS5tZXRob2QoImZpbmRBbGwiKS5jbGFzc05hbWUoIk5vZGVfR3JvdXAiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSk7DQoNCiAgICBzdGQ6OnZlY3Rvcjxlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXAqPiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlci5lbXB0eSgpKXsNCiAgICANCg0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLT5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCiAgICANCiAgICByZXR1cm4gKmFuc3dlcjsNCn0NCiAgICANCi8qDQogICAgaWYoX19ldmVudC5yZXNwb25zZVRvKCkpew0KICAgICAgICBjb3V0IDw8IF9fdG9TdHJpbmcgKyAiYSByZXNwb25zZSB0byBteSBldmVudCI7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uTm9kZV9Hcm91cC5maW5kKCkiKS5tZXRob2QoImZpbmQiKS5jbGFzc05hbWUoIk5vZGVfR3JvdXAiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSkucmVzcG9uc2VUbyhfX2V2ZW50Ll91bmlxdWUoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfR3JvdXAqIGFuc3dlcjsNCiAgICANCiAgICBqc29uIGV2SlNPTiA9IGV2SlNPTiA9IGpzb246OnBhcnNlKF9fZXZlbnQtPnBheWxvYWQoKSk7DQogICAgaWYoZXZKU09OWyJfX3RoaXMiXSkgdGhpcy0+X2Zyb21Eb2N1bWVudChldkpTT05bIl9fdGhpcyJdKTsNCiAgICANCg0KICAgIA0KICAgIA0KICAgIGlmKGFuc3dlcil7DQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXIuX3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQoNCiAgICByZXR1cm4gYW5zd2VyOw0KKi8NCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9Hcm91cCYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwOjpmaW5kKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJOb2RlX0dyb3VwOjpmaW5kKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLk5vZGVfR3JvdXAuZmluZCgpIikubWV0aG9kKCJmaW5kIikuY2xhc3NOYW1lKCJOb2RlX0dyb3VwIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX0dyb3VwKiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlciE9bnVsbHB0cil7DQogICAgDQoNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQogICAgDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQoNCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlOjphY3RpdmUoYm9vbCB2KXsNCiAgICB0aGlzLT5fYWN0aXZlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmJvb2wgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGU6OmFjdGl2ZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fYWN0aXZlOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGU6OmVuYWJsZWQoYm9vbCB2KXsNCiAgICB0aGlzLT5fZW5hYmxlZCA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlOjplbmFibGVkKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9lbmFibGVkOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGU6OmNvZGUoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X2NvZGUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGU6OmNvZGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2NvZGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZTo6b3JkZXIoaW50IHYpew0KICAgIHRoaXMtPl9vcmRlciA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQppbnQgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGU6Om9yZGVyKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9vcmRlcjsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlOjpkYXRlKHRpbWVfdCB2KXsNCiAgICB0aGlzLT5fZGF0ZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQp0aW1lX3QgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGU6OmRhdGUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2RhdGU7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZTo6bmFtZShzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fbmFtZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZTo6bmFtZSgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fbmFtZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlOjpyZW1hcmsoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X3JlbWFyayA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZTo6cmVtYXJrKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9yZW1hcms7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZTo6ZHluYW1pYyhib29sIHYpew0KICAgIHRoaXMtPl9keW5hbWljID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmJvb2wgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGU6OmR5bmFtaWMoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2R5bmFtaWM7DQogICAgDQp9DQogICAgDQoNCiAgICANCg0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGU6Ol91bmlxdWUoKXsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZTo6X2Zyb21Eb2N1bWVudChzdGQ6OnN0cmluZyBvYmopew0KICAgIGpzb24gZGF0YSA9IGpzb246OnBhcnNlKG9iaik7DQogICAgDQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZTo6X3RvRG9jdW1lbnQoKXsNCiAgICByZXR1cm4gIiI7DQp9DQoNCiAgICANCi8qDQogICAgaWYoX19ldmVudC5yZXNwb25zZVRvKCkpew0KICAgICAgICBjb3V0IDw8IF9fdG9TdHJpbmcgKyAiYSByZXNwb25zZSB0byBteSBldmVudCI7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uTm9kZV9UeXBlLnN0b3JlKCkiKS5tZXRob2QoInN0b3JlIikuY2xhc3NOYW1lKCJOb2RlX1R5cGUiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSkucmVzcG9uc2VUbyhfX2V2ZW50Ll91bmlxdWUoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZSogYW5zd2VyOw0KICAgIA0KICAgIGpzb24gZXZKU09OID0gZXZKU09OID0ganNvbjo6cGFyc2UoX19ldmVudC0+cGF5bG9hZCgpKTsNCiAgICBpZihldkpTT05bIl9fdGhpcyJdKSB0aGlzLT5fZnJvbURvY3VtZW50KGV2SlNPTlsiX190aGlzIl0pOw0KICAgIA0KDQogICAgDQogICAgDQogICAgaWYoYW5zd2VyKXsNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiBhbnN3ZXI7DQoqLw0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGUmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlOjpzdG9yZSgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiTm9kZV9UeXBlOjpzdG9yZSgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Ob2RlX1R5cGUuc3RvcmUoKSIpLm1ldGhvZCgic3RvcmUiKS5jbGFzc05hbWUoIk5vZGVfVHlwZSIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlKiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlciE9bnVsbHB0cil7DQogICAgDQoNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQogICAgDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQovKg0KICAgIGlmKF9fZXZlbnQucmVzcG9uc2VUbygpKXsNCiAgICAgICAgY291dCA8PCBfX3RvU3RyaW5nICsgImEgcmVzcG9uc2UgdG8gbXkgZXZlbnQiOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLk5vZGVfVHlwZS5maW5kQWxsKCkiKS5tZXRob2QoImZpbmRBbGwiKS5jbGFzc05hbWUoIk5vZGVfVHlwZSIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKS5yZXNwb25zZVRvKF9fZXZlbnQuX3VuaXF1ZSgpKTsNCg0KICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlKj4gYW5zd2VyOw0KICAgIA0KICAgIGpzb24gZXZKU09OID0gZXZKU09OID0ganNvbjo6cGFyc2UoX19ldmVudC0+cGF5bG9hZCgpKTsNCiAgICBpZihldkpTT05bIl9fdGhpcyJdKSB0aGlzLT5fZnJvbURvY3VtZW50KGV2SlNPTlsiX190aGlzIl0pOw0KICAgIA0KDQogICAgDQogICAgDQogICAgaWYoYW5zd2VyKXsNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiBhbnN3ZXI7DQoqLw0Kc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGUmPiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZTo6ZmluZEFsbCgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiTm9kZV9UeXBlOjpmaW5kQWxsKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLk5vZGVfVHlwZS5maW5kQWxsKCkiKS5tZXRob2QoImZpbmRBbGwiKS5jbGFzc05hbWUoIk5vZGVfVHlwZSIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKTsNCg0KICAgIHN0ZDo6dmVjdG9yPGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlKj4gYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIuZW1wdHkoKSl7DQogICAgDQoNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQogICAgDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQovKg0KICAgIGlmKF9fZXZlbnQucmVzcG9uc2VUbygpKXsNCiAgICAgICAgY291dCA8PCBfX3RvU3RyaW5nICsgImEgcmVzcG9uc2UgdG8gbXkgZXZlbnQiOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLk5vZGVfVHlwZS5maW5kKCkiKS5tZXRob2QoImZpbmQiKS5jbGFzc05hbWUoIk5vZGVfVHlwZSIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKS5yZXNwb25zZVRvKF9fZXZlbnQuX3VuaXF1ZSgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Tm9kZV9UeXBlKiBhbnN3ZXI7DQogICAgDQogICAganNvbiBldkpTT04gPSBldkpTT04gPSBqc29uOjpwYXJzZShfX2V2ZW50LT5wYXlsb2FkKCkpOw0KICAgIGlmKGV2SlNPTlsiX190aGlzIl0pIHRoaXMtPl9mcm9tRG9jdW1lbnQoZXZKU09OWyJfX3RoaXMiXSk7DQogICAgDQoNCiAgICANCiAgICANCiAgICBpZihhbnN3ZXIpew0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuIGFuc3dlcjsNCiovDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpOb2RlX1R5cGU6OmZpbmQoKXsNCiAgICBzdGQ6OnN0cmluZyBfX3RvU3RyaW5nID0gIk5vZGVfVHlwZTo6ZmluZCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5Ob2RlX1R5cGUuZmluZCgpIikubWV0aG9kKCJmaW5kIikuY2xhc3NOYW1lKCJOb2RlX1R5cGUiKS5jYXJyaWVyKG5vZGUpLnNlbmRlcihub2RlKS5yZWNpcGllbnQobm9kZS5wYXJlbnQoKSk7DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok5vZGVfVHlwZSogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KICAgIA0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KDQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nOjphY3RpdmUoYm9vbCB2KXsNCiAgICB0aGlzLT5fYWN0aXZlID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmJvb2wgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nOjphY3RpdmUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2FjdGl2ZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmc6OmVuYWJsZWQoYm9vbCB2KXsNCiAgICB0aGlzLT5fZW5hYmxlZCA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpib29sIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZzo6ZW5hYmxlZCgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fZW5hYmxlZDsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmc6Om9yZGVyKGludCB2KXsNCiAgICB0aGlzLT5fb3JkZXIgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0KaW50IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZzo6b3JkZXIoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X29yZGVyOw0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZzo6Y2xhc3NOYW1lKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9jbGFzc05hbWUgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nOjpjbGFzc05hbWUoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X2NsYXNzTmFtZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmc6OnNjb3BlKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9zY29wZSA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmc6OnNjb3BlKCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9zY29wZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmc6OmNvbnRleHQoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X2NvbnRleHQgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nOjpjb250ZXh0KCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl9jb250ZXh0Ow0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZzo6c291cmNlKHN0ZDo6c3RyaW5nIHYpew0KICAgIHRoaXMtPl9zb3VyY2UgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nOjpzb3VyY2UoKXsNCiAgICANCiAgICByZXR1cm4gdGhpcy0+X3NvdXJjZTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmc6OnRhcmdldChzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5fdGFyZ2V0ID0gdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZzo6dGFyZ2V0KCl7DQogICAgDQogICAgcmV0dXJuIHRoaXMtPl90YXJnZXQ7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nOjppblNjcmlwdChzdGQ6OnN0cmluZyB2KXsNCiAgICB0aGlzLT5faW5TY3JpcHQgPSB2Ow0KICAgIHJldHVybiAqdGhpczsNCn0NCg0Kc3RkOjpzdHJpbmcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nOjppblNjcmlwdCgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5faW5TY3JpcHQ7DQogICAgDQp9DQogICAgDQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nOjpvdXRTY3JpcHQoc3RkOjpzdHJpbmcgdil7DQogICAgdGhpcy0+X291dFNjcmlwdCA9IHY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQpzdGQ6OnN0cmluZyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmc6Om91dFNjcmlwdCgpew0KICAgIA0KICAgIHJldHVybiB0aGlzLT5fb3V0U2NyaXB0Ow0KICAgIA0KfQ0KICAgIA0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZzo6dG9vbChlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2wmIHYpew0KICAgIHRoaXMtPl90b29sID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2wmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZzo6dG9vbCgpew0KICAgIA0KICAgIHJldHVybiAqKHRoaXMtPl90b29sKTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmc6Omdyb3VwKGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwJiB2KXsNCiAgICB0aGlzLT5fZ3JvdXAgPSAmdjsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6Q29uZmlnX0dyb3VwJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmc6Omdyb3VwKCl7DQogICAgDQogICAgcmV0dXJuICoodGhpcy0+X2dyb3VwKTsNCiAgICANCn0NCiAgICANCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmc6OnR5cGUoZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpUb29sX1R5cGUmIHYpew0KICAgIHRoaXMtPl90eXBlID0gJnY7DQogICAgcmV0dXJuICp0aGlzOw0KfQ0KDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OlRvb2xfVHlwZSYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nOjp0eXBlKCl7DQogICAgDQogICAgcmV0dXJuICoodGhpcy0+X3R5cGUpOw0KICAgIA0KfQ0KICAgIA0KDQogICAgDQoNCg0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmc6Ol91bmlxdWUoKXsNCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCmVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZyYgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nOjpfZnJvbURvY3VtZW50KHN0ZDo6c3RyaW5nIG9iail7DQogICAganNvbiBkYXRhID0ganNvbjo6cGFyc2Uob2JqKTsNCiAgICANCiAgICByZXR1cm4gKnRoaXM7DQp9DQoNCnN0ZDo6c3RyaW5nIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZzo6X3RvRG9jdW1lbnQoKXsNCiAgICByZXR1cm4gIiI7DQp9DQoNCiAgICANCi8qDQogICAgaWYoX19ldmVudC5yZXNwb25zZVRvKCkpew0KICAgICAgICBjb3V0IDw8IF9fdG9TdHJpbmcgKyAiYSByZXNwb25zZSB0byBteSBldmVudCI7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50IF9fcmVzcG9uc2UgPSAobmV3IGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQoKSktPmNvZGUoIlsiK25vZGUuY29kZSgpKyJAdGltZSIrIl0uTWFwcGluZy5zdG9yZSgpIikubWV0aG9kKCJzdG9yZSIpLmNsYXNzTmFtZSgiTWFwcGluZyIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKS5yZXNwb25zZVRvKF9fZXZlbnQuX3VuaXF1ZSgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZyogYW5zd2VyOw0KICAgIA0KICAgIGpzb24gZXZKU09OID0gZXZKU09OID0ganNvbjo6cGFyc2UoX19ldmVudC0+cGF5bG9hZCgpKTsNCiAgICBpZihldkpTT05bIl9fdGhpcyJdKSB0aGlzLT5fZnJvbURvY3VtZW50KGV2SlNPTlsiX190aGlzIl0pOw0KICAgIA0KDQogICAgDQogICAgDQogICAgaWYoYW5zd2VyKXsNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiBhbnN3ZXI7DQoqLw0KZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nJiBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmc6OnN0b3JlKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJNYXBwaW5nOjpzdG9yZSgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5NYXBwaW5nLnN0b3JlKCkiKS5tZXRob2QoInN0b3JlIikuY2xhc3NOYW1lKCJNYXBwaW5nIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nKiBhbnN3ZXI7DQoNCiAgICANCg0KICAgIA0KICAgIGlmKGFuc3dlciE9bnVsbHB0cil7DQogICAgDQoNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQogICAgDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQovKg0KICAgIGlmKF9fZXZlbnQucmVzcG9uc2VUbygpKXsNCiAgICAgICAgY291dCA8PCBfX3RvU3RyaW5nICsgImEgcmVzcG9uc2UgdG8gbXkgZXZlbnQiOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLk1hcHBpbmcuZmluZEFsbCgpIikubWV0aG9kKCJmaW5kQWxsIikuY2xhc3NOYW1lKCJNYXBwaW5nIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpLnJlc3BvbnNlVG8oX19ldmVudC5fdW5pcXVlKCkpOw0KDQogICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nKj4gYW5zd2VyOw0KICAgIA0KICAgIGpzb24gZXZKU09OID0gZXZKU09OID0ganNvbjo6cGFyc2UoX19ldmVudC0+cGF5bG9hZCgpKTsNCiAgICBpZihldkpTT05bIl9fdGhpcyJdKSB0aGlzLT5fZnJvbURvY3VtZW50KGV2SlNPTlsiX190aGlzIl0pOw0KICAgIA0KDQogICAgDQogICAgDQogICAgaWYoYW5zd2VyKXsNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci5fdG9Eb2N1bWVudCgpKTsNCiAgICANCiAgICB9ZWxzZXsNCiAgICAgICAgLy9fX3Jlc3BvbnNlLnBheWxvYWQoeyJfX3RoaXMiOiBzZWxmLl90b0RvY3VtZW50KCl9KTsNCiAgICB9DQoNCiAgICBfX3Jlc3BvbnNlLnRyaWdnZXIoKTsNCg0KICAgIHJldHVybiBhbnN3ZXI7DQoqLw0Kc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nJj4gZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nOjpmaW5kQWxsKCl7DQogICAgc3RkOjpzdHJpbmcgX190b1N0cmluZyA9ICJNYXBwaW5nOjpmaW5kQWxsKCk6ICI7DQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLk1hcHBpbmcuZmluZEFsbCgpIikubWV0aG9kKCJmaW5kQWxsIikuY2xhc3NOYW1lKCJNYXBwaW5nIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpOw0KDQogICAgc3RkOjp2ZWN0b3I8ZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nKj4gYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIuZW1wdHkoKSl7DQogICAgDQoNCiAgICANCiAgICAgICAgX19yZXNwb25zZS5wYXlsb2FkKGFuc3dlci0+X3RvRG9jdW1lbnQoKSk7DQogICAgDQogICAgfWVsc2V7DQogICAgICAgIC8vX19yZXNwb25zZS5wYXlsb2FkKHsiX190aGlzIjogc2VsZi5fdG9Eb2N1bWVudCgpfSk7DQogICAgfQ0KDQogICAgX19yZXNwb25zZS50cmlnZ2VyKCk7DQogICAgDQogICAgcmV0dXJuICphbnN3ZXI7DQp9DQogICAgDQovKg0KICAgIGlmKF9fZXZlbnQucmVzcG9uc2VUbygpKXsNCiAgICAgICAgY291dCA8PCBfX3RvU3RyaW5nICsgImEgcmVzcG9uc2UgdG8gbXkgZXZlbnQiOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCBfX3Jlc3BvbnNlID0gKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5jb2RlKCJbIitub2RlLmNvZGUoKSsiQHRpbWUiKyJdLk1hcHBpbmcuZmluZCgpIikubWV0aG9kKCJmaW5kIikuY2xhc3NOYW1lKCJNYXBwaW5nIikuY2Fycmllcihub2RlKS5zZW5kZXIobm9kZSkucmVjaXBpZW50KG5vZGUucGFyZW50KCkpLnJlc3BvbnNlVG8oX19ldmVudC5fdW5pcXVlKCkpOw0KDQogICAgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpNYXBwaW5nKiBhbnN3ZXI7DQogICAgDQogICAganNvbiBldkpTT04gPSBldkpTT04gPSBqc29uOjpwYXJzZShfX2V2ZW50LT5wYXlsb2FkKCkpOw0KICAgIGlmKGV2SlNPTlsiX190aGlzIl0pIHRoaXMtPl9mcm9tRG9jdW1lbnQoZXZKU09OWyJfX3RoaXMiXSk7DQogICAgDQoNCiAgICANCiAgICANCiAgICBpZihhbnN3ZXIpew0KICAgIA0KICAgICAgICBfX3Jlc3BvbnNlLnBheWxvYWQoYW5zd2VyLl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KDQogICAgcmV0dXJuIGFuc3dlcjsNCiovDQplc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206Ok1hcHBpbmcmIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZzo6ZmluZCgpew0KICAgIHN0ZDo6c3RyaW5nIF9fdG9TdHJpbmcgPSAiTWFwcGluZzo6ZmluZCgpOiAiOw0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6RXZlbnQgX19yZXNwb25zZSA9IChuZXcgZXNwdGVzdDo6Y29tOjpuYW1tb3VyOjpkY29tOjpFdmVudCgpKS0+Y29kZSgiWyIrbm9kZS5jb2RlKCkrIkB0aW1lIisiXS5NYXBwaW5nLmZpbmQoKSIpLm1ldGhvZCgiZmluZCIpLmNsYXNzTmFtZSgiTWFwcGluZyIpLmNhcnJpZXIobm9kZSkuc2VuZGVyKG5vZGUpLnJlY2lwaWVudChub2RlLnBhcmVudCgpKTsNCg0KICAgIGVzcHRlc3Q6OmNvbTo6bmFtbW91cjo6ZGNvbTo6TWFwcGluZyogYW5zd2VyOw0KDQogICAgDQoNCiAgICANCiAgICBpZihhbnN3ZXIhPW51bGxwdHIpew0KICAgIA0KDQogICAgDQogICAgICAgIF9fcmVzcG9uc2UucGF5bG9hZChhbnN3ZXItPl90b0RvY3VtZW50KCkpOw0KICAgIA0KICAgIH1lbHNlew0KICAgICAgICAvL19fcmVzcG9uc2UucGF5bG9hZCh7Il9fdGhpcyI6IHNlbGYuX3RvRG9jdW1lbnQoKX0pOw0KICAgIH0NCg0KICAgIF9fcmVzcG9uc2UudHJpZ2dlcigpOw0KICAgIA0KICAgIHJldHVybiAqYW5zd2VyOw0KfQ0KICAgIA0KDQoNCmludCBtYWluKGludCBhcmdjLCBjaGFyKiBhcmd2W10pIHsNCg0KICAgIGNvbnN0IHN0ZDo6c3RyaW5nIFNFUlZFUl9BRERSRVNTKCJtcXR0Oi8vdGVzdC5tb3NxdWl0dG8ub3JnOjE4ODMiKTsNCiAgICBtcXR0Ojphc3luY19jbGllbnQgY2xpKFNFUlZFUl9BRERSRVNTLCAiIiwgbXF0dDo6Y3JlYXRlX29wdGlvbnMoTVFUVFZFUlNJT05fNSkpOw0KICAgIGNsaS5zZXRfbWVzc2FnZV9jYWxsYmFjayhbXShtcXR0Ojpjb25zdF9tZXNzYWdlX3B0ciBtc2cpIHsgKG5ldyBlc3B0ZXN0Ojpjb206Om5hbW1vdXI6OmRjb206OkV2ZW50KCkpLT5fZnJvbURvY3VtZW50KG1zZy5nZXRfcGF5bG9hZF9zdHIoKSkucHJvY2VzcygpOyB9KTsNCiAgICBhdXRvIHRvayA9IGNsaS5jb25uZWN0KG1xdHQ6OmNvbm5lY3Rfb3B0aW9uc19idWlsZGVyKCkNCgkJLnByb3BlcnRpZXMoew0KCQkJe21xdHQ6OnByb3BlcnR5OjpTRVNTSU9OX0VYUElSWV9JTlRFUlZBTCwgNjA0ODAwfQ0KCQl9KQ0KCQkuY2xlYW5fc3RhcnQoZmFsc2UpDQoJCS8vLndpbGwoc3RkOjptb3ZlKGx3dCkpDQoJCS5rZWVwX2FsaXZlX2ludGVydmFsKHN0ZDo6Y2hyb25vOjpzZWNvbmRzKDIwKSkNCgkJLmZpbmFsaXplKCkpOw0KICAgIHRvay53YWl0KCk7DQoNCiAgICByZXR1cm4gMDsNCn0=",
	"__keys": ["name"],
	"__trMap": []
}
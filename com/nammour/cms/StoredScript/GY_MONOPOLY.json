{
	"Id": "77b215fa04b7fa28c9ffb43b413f76bd5a8ec3e9",
	"after": null,
	"async": null,
	"before": null,
	"date": "undefined",
	"name": "GY_MONOPOLY",
	"order": null,
	"remark": "dW5kZWZpbmVk",
	"script": "W3sKCU5hbWU6ICJTcGllbCIsCglFbnRpdHlBdHRyaWJ1dGVzOiBbewoJCU5hbWU6ICJuYW1lIiwKCQlJc1N0cmluZzogdHJ1ZSwKCX0sIHsKCQlOYW1lOiAicnVuZGVuTGltaXQiLAoJCUlzSW50OiB0cnVlLAoJfSwgewoJCU5hbWU6ICJha3R1ZWxsZXJTcGllbGVyIiwKCQlFbnRpdHlUeXBlOiB7CgkJCU5hbWU6ICJTcGllbGVyIgoJCX0KCX0sIHsKCQlOYW1lOiAic3BpZWxicmV0dCIsCgkJRW50aXR5VHlwZTogewoJCQlOYW1lOiAiU3BpZWxicmV0dCIKCQl9Cgl9XSwKCUVudGl0eU1ldGhvZHM6IFt7CgkJTmFtZTogInd1ZXJmZWxuIiwKCQlBdXRob3I6ICJDaHJpc3RpbmEiLAoJCU1ldGhvZFBhcmFtZXRlcnM6IFtdLAoJCVJlbWFyazogImdpYnQgMCB6dXLDg8KDw4LCvGNrLCBmYWxscyBkYXMgUnVuZGVubGltaXQgZXJyZWljaHQgaXN0IG9kZXIgZGVyIGFrdHVlbGxlIFNwaWVsZXIga2VpbiBHZWxkIG1laHIgaGF0LCB2ZXJyaW5nZXJ0IGRhcyBydW5kZW5MaW1pdCwgd2VubiBkZXIgYWt0dWVsbGUgU3BpZWxlciBkaWUgTnVtbWVyIDEgaGF0LCBsYWVzc3QgZGVuIGFrdHVlbGxlbiBTcGllbGVyIGVpbmUgenVmw4PCg8OCwqRsbGlnZSBBbnphaGwgYW4gU2Nocml0dGVuIHp3aXNjaGVuIDEgdW5kIDYgZ2VoZW4sIHNldHp0IGRlbiBuYWVjaHN0ZW4gU3BpZWxlciBhbHMgYWt0dWVsbGVuIFNwaWVsZXIgdm9tIEJyZXR0IiwKCQlKYXZhOiBgCgkJaWYgKHRoaXMuZ2V0UnVuZGVuTGltaXQoKSA8PSAwIHx8IGFrdHVlbGxlclNwaWVsZXIuZ2V0R2VsZCgpIDwgMCkgewoJCSAgICByZXR1cm4gMDsKCQl9CgkJaWYodGhpcy5nZXRBa3R1ZWxsZXJTcGllbGVyKCkuZ2V0TnVtbWVyKCkgPT0gMSkgewoJCSAgICB0aGlzLnNldFJ1bmRlbkxpbWl0KHRoaXMuZ2V0UnVuZGVuTGltaXQoKSAtIDEpOwoJCX0KCQkKCQlpbnQgc2Nocml0dGUgPSBuZXcgamF2YS51dGlsLlJhbmRvbSgpLm5leHRJbnQoMSw2KTsKCQl0aGlzLmdldEFrdHVlbGxlclNwaWVsZXIoKS5nZWhlbihzY2hyaXR0ZSk7CgkJdGhpcy5zZXRBa3R1ZWxsZXJTcGllbGVyKHRoaXMuZ2V0QWt0dWVsbGVyU3BpZWxlcigpLmdldE5hZWNoc3RlclNwaWVsZXIoKSk7CgkJcmV0dXJuIHNjaHJpdHRlOwoJCWAsCgkJUmVzcG9uc2VBdHRyaWJ1dGU6IHsKCQkJSXNJbnQ6IHRydWUsCgkJfQoJfSwgewoJCU5hbWU6ICJTcGllbCIsCgkJT3JkZXI6IDEsCgkJQXV0aG9yOiAiQ2hyaXN0aW5hIiwKCQlNZXRob2RQYXJhbWV0ZXJzOiBbewoJCQlOYW1lOiAic3BpZWxlciIsCgkJCUlzQXJyYXk6IHRydWUsCgkJCUVudGl0eVR5cGU6IHsKCQkJCU5hbWU6ICJTcGllbGVyIgoJCQl9CgkJfV0sCgkJSmF2YTogYAoJCXRoaXMuc2V0UnVuZGVuTGltaXQoNTApOwoJCXRoaXMuc2V0TmFtZSgiU3BpZWwgMSIpOwoJCQoJCVNwaWVsYnJldHQgc2IgPSBuZXcgU3BpZWxicmV0dCgpOwoJCXNiLnNldE5hbWUoIlNwaWVsYnJldHQgMSIpOwoJCQoJCXNiLnNldFN0YXJ0ZmVsZCgoR29GZWxkKW5ldyBHb0ZlbGQoKS5zZXROYW1lKCJHTyIpLnNldE1pZXRlKC0yMDApKTsgLy9uZXVlcyBHb0ZlbGQgZXJzdGVsbGVuIHVuZCBhbHMgU3RhcnRmZWxkIGRlcyBTcGllbGJyZXR0cyBzZXR6ZW4KCQkvL2Z1ZXIgamVkZXMgU3BpZWxmZWxkIGRhcyBwYXNzZW5kZSBuYWVjaHN0ZSBGZWxkIGVyc3RlbGxlbiB1bmQgenV3ZWlzZW4KCQlzYi5nZXRTdGFydGZlbGQoKS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICBuZXcgU3RyYXNzZSgpLnNldEthdWZQcmVpcyg2MCkuc2V0TWlldGUoMTApLnNldE5hbWUoIk1lZGl0ZXJyYW5pYW4gQXZlbnVlIikuc2V0RmFyYmUoImN5YW4iKS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICAgICAgbmV3IFN0cmFzc2UoKS5zZXRLYXVmUHJlaXMoNjApLnNldE1pZXRlKDEwKS5zZXROYW1lKCJCYWx0aWMgQXZlbnVlIikuc2V0RmFyYmUoImN5YW4iKS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICAgICAgICAgIG5ldyBLaXN0ZSgpLnNldE5hbWUoIkNoZXN0Iikuc2V0TWlldGUoLTEwKS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICAgICAgICAgICAgICBuZXcgU3RyYXNzZSgpLnNldEthdWZQcmVpcyg2MCkuc2V0TWlldGUoMTApLnNldE5hbWUoIkF0bGFudGljIEF2ZW51ZSIpLnNldEZhcmJlKCJjeWFuIikuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBFcmVpZ25pc2ZlbGQoKS5zZXROYW1lKCJDaGFuY2UiKS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBTdHJhc3NlKCkuc2V0S2F1ZlByZWlzKDEwMCkuc2V0TWlldGUoMjApLnNldE5hbWUoIk9yaWVudGFsIEF2ZW51ZSIpLnNldEZhcmJlKCJncmF1Iikuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEtpc3RlKCkuc2V0TmFtZSgiQ2hlc3QiKS5zZXRNaWV0ZSgtMTUpLnNldE5hZWNoc3Rlc0ZlbGQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgU3RyYXNzZSgpLnNldEthdWZQcmVpcygxMDApLnNldE1pZXRlKDIwKS5zZXROYW1lKCJWZXJtb250IEF2ZW51ZSIpLnNldEZhcmJlKCJncmF1Iikuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgU3RyYXNzZSgpLnNldEthdWZQcmVpcygxMDApLnNldE1pZXRlKDIwKS5zZXROYW1lKCJDb25uZXRpY3V0IEF2ZW51ZSIpLnNldEZhcmJlKCJncmF1Iikuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEdlZmFlbmduaXMoKS5zZXROYW1lKCJJbiBqYWlsIikuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBTdHJhc3NlKCkuc2V0S2F1ZlByZWlzKDE0MCkuc2V0TWlldGUoNDApLnNldE5hbWUoIlN0LiBDaGFybGVzIFBsYWNlIikuc2V0RmFyYmUoIm1hZ2VudGEiKS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBTdHJhc3NlKCkuc2V0S2F1ZlByZWlzKDE0MCkuc2V0TWlldGUoNDApLnNldE5hbWUoIlN0YXRlcyBBdmVudWUiKS5zZXRGYXJiZSgibWFnZW50YSIpLnNldE5hZWNoc3Rlc0ZlbGQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBLaXN0ZSgpLnNldE5hbWUoIkNoZXN0Iikuc2V0TWlldGUoLTIwKS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFN0cmFzc2UoKS5zZXRLYXVmUHJlaXMoMTQwKS5zZXRNaWV0ZSg0MCkuc2V0TmFtZSgiVmlyZ2luaWEgQXZlbnVlIikuc2V0RmFyYmUoIm1hZ2VudGEiKS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBFcmVpZ25pc2ZlbGQoKS5zZXROYW1lKCJDaGFuY2UiKS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgU3RyYXNzZSgpLnNldEthdWZQcmVpcygxODApLnNldE1pZXRlKDYwKS5zZXROYW1lKCJTdC4gSmFtZXMgUGxhY2UiKS5zZXRGYXJiZSgib3JhbmdlIikuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBLaXN0ZSgpLnNldE5hbWUoIkNoZXN0Iikuc2V0TWlldGUoLTI1KS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBTdHJhc3NlKCkuc2V0S2F1ZlByZWlzKDE4MCkuc2V0TWlldGUoNjApLnNldE5hbWUoIlRlbm5lc3NlZSBBdmVudWUiKS5zZXRGYXJiZSgib3JhbmdlIikuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFN0cmFzc2UoKS5zZXRLYXVmUHJlaXMoMTgwKS5zZXRNaWV0ZSg2MCkuc2V0TmFtZSgiTmV3IFlvcmsgQXZlbnVlIikuc2V0RmFyYmUoIm9yYW5nZSIpLnNldE5hZWNoc3Rlc0ZlbGQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgUGFya3BsYXR6KCkuc2V0TmFtZSgiRnJlZSBQYXJraW5nIikuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgU3RyYXNzZSgpLnNldEthdWZQcmVpcygyMjApLnNldE1pZXRlKDgwKS5zZXROYW1lKCJLZW50dWNreSBBdmVudWUiKS5zZXRGYXJiZSgicm90Iikuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFN0cmFzc2UoKS5zZXRLYXVmUHJlaXMoMjIwKS5zZXRNaWV0ZSg4MCkuc2V0TmFtZSgiSW5kaWFuYSBBdmVudWUiKS5zZXRGYXJiZSgicm90Iikuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBLaXN0ZSgpLnNldE5hbWUoIkNoZXN0Iikuc2V0TWlldGUoLTMwKS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBTdHJhc3NlKCkuc2V0S2F1ZlByZWlzKDIyMCkuc2V0TWlldGUoODApLnNldE5hbWUoIklsbGlub2lzIEF2ZW51ZSIpLnNldEZhcmJlKCJyb3QiKS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgRXJlaWduaXNmZWxkKCkuc2V0TmFtZSgiQ2hhbmNlIikuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBTdHJhc3NlKCkuc2V0S2F1ZlByZWlzKDI2MCkuc2V0TWlldGUoMTAwKS5zZXROYW1lKCJNb29uIFN0cmVldCIpLnNldEZhcmJlKCJnZWxiIikuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgS2lzdGUoKS5zZXROYW1lKCJDaGVzdCIpLnNldE1pZXRlKC0zNSkuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFN0cmFzc2UoKS5zZXRLYXVmUHJlaXMoMjYwKS5zZXRNaWV0ZSgxMDApLnNldE5hbWUoIlZlbnRvciBBdmVudWUiKS5zZXRGYXJiZSgiZ2VsYiIpLnNldE5hZWNoc3Rlc0ZlbGQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgU3RyYXNzZSgpLnNldEthdWZQcmVpcygyNjApLnNldE1pZXRlKDEwMCkuc2V0TmFtZSgiTWFydmluIEdhcmRlbnMiKS5zZXRGYXJiZSgiZ2VsYiIpLnNldE5hZWNoc3Rlc0ZlbGQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFBvbGl6ZWkoKS5zZXROYW1lKCJHbyB0byBqYWlsISIpLnNldE5hZWNoc3Rlc0ZlbGQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBTdHJhc3NlKCkuc2V0S2F1ZlByZWlzKDMwMCkuc2V0TWlldGUoMTIwKS5zZXROYW1lKCJQYWNpZmljIEF2ZW51ZSIpLnNldEZhcmJlKCJncnVlbiIpLnNldE5hZWNoc3Rlc0ZlbGQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgU3RyYXNzZSgpLnNldEthdWZQcmVpcygzMDApLnNldE1pZXRlKDEyMCkuc2V0TmFtZSgiTm9ydGggQ2Fyb2xpbmEgQXZlbnVlIikuc2V0RmFyYmUoImdydWVuIikuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgS2lzdGUoKS5zZXROYW1lKCJDaGVzdCIpLnNldE1pZXRlKC00MCkuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFN0cmFzc2UoKS5zZXRLYXVmUHJlaXMoMzAwKS5zZXRNaWV0ZSgxMjApLnNldE5hbWUoIlBlbm5zeWx2YW5pYSBBdmVudWUiKS5zZXRGYXJiZSgiZ3J1ZW4iKS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEVyZWlnbmlzZmVsZCgpLnNldE5hbWUoIkNoYW5jZSIpLnNldE5hZWNoc3Rlc0ZlbGQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFN0cmFzc2UoKS5zZXRLYXVmUHJlaXMoMzUwKS5zZXRNaWV0ZSgxNDApLnNldE5hbWUoIlBhcmsgUGxhY2UiKS5zZXRGYXJiZSgiaGVsbGdlbGIiKS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgS2lzdGUoKS5zZXROYW1lKCJDaGVzdCIpLnNldE1pZXRlKC01MCkuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBTdHJhc3NlKCkuc2V0S2F1ZlByZWlzKDQwMCkuc2V0TWlldGUoMTQwKS5zZXROYW1lKCJCb2FyZHdhbGsiKS5zZXRGYXJiZSgiaGVsbGdlbGIiKS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBTdHJhc3NlKCkuc2V0S2F1ZlByZWlzKDQ1MCkuc2V0TWlldGUoMjAwKS5zZXROYW1lKCJMYUxhTGFuZCIpLnNldEZhcmJlKCJoZWxsZ2VsYiIpLnNldE5hZWNoc3Rlc0ZlbGQoc2IuZ2V0U3RhcnRmZWxkKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICkKICAgICAgICApOwoJCQoJCS8vYWxsZSBGZWxkZXIgaW4gZGVyIHJpY2h0aWdlbiBSZWloZW5mb2xnZSBudW1tZXJpZXJlbgoJCXNiLmdldFN0YXJ0ZmVsZCgpLmdldE5hZWNoc3Rlc0ZlbGQoKS5zZXROdW1tZXIoMik7CgkJZm9yKFNwaWVsZmVsZCBzcEZlbGQgPSBzYi5nZXRTdGFydGZlbGQoKS5nZXROYWVjaHN0ZXNGZWxkKCk7IHNwRmVsZCE9c2IuZ2V0U3RhcnRmZWxkKCk7IHNwRmVsZCA9IHNwRmVsZC5nZXROYWVjaHN0ZXNGZWxkKCkpewoJCSAgICBzcEZlbGQuZ2V0TmFlY2hzdGVzRmVsZCgpLnNldE51bW1lcihzcEZlbGQuZ2V0TnVtbWVyKCkrMSk7CgkJfQoJCXNiLmdldFN0YXJ0ZmVsZCgpLnNldE51bW1lcigxKTsKCQkKCgkJdGhpcy5zZXRTcGllbGJyZXR0KHNiKTsgLy9kZW0gU3BpZWwgZGFzIFNwaWVsYnJldHQgenV3ZWlzZW4KCQkKICAgICAgICAvLyB6LkIuOiBzcGllbGVyPVtTUCgiVGltbyIsICJoZWxsZ2VsYiIpLCBTUCgiSmVubnkiLCAicm90IiksIFNQKCJMaW5hIiwgImdydWVuIildCiAgICAgICAgU3BpZWxlciBsZXR6dGVyU3BpZWxlciA9IG51bGw7CiAgICAgICAgCiAgICAgICAgLy9mb3JFYWNoIGF1cyBkZXIgQXJyYXlMaXN0IHNwaWVsZXIgKHdpcmQgYmVpbSBFcnN0ZWxsZW4gZGVzIFNwaWVscyBkZW0gS29uc3RydWt0b3IgYWxzIFBhcmFtZXRlciB1ZWJlcmdlYmVuKQoJCWZvcihTcGllbGVyIG5hZWNoc3RlclNwaWVsZXIgOiBzcGllbGVyKXsKCQkKICAgIAkJLy8gVGltbzogIGxzPW51bGw7ICBucz1UaW1vOyAgdGhpcy5hcz1UaW1vOyA9PiBscz1UaW1vCiAgICAJCS8vIEplbm55OiBscz1UaW1vOyAgbnM9SmVubnk7IHRoaXMuYXM9VGltbzsgVGltby5ucz1KZW5ueTsgPT4gbHM9SmVubnkKICAgIAkJLy8gTGluYTogIGxzPUplbm55OyBucz1MaW5hOyAgdGhpcy5hcz1UaW1vOyBKZW5ueS5ucz1MaW5hOyA9PiBscz1MaW5hCgoJCSAgICBuYWVjaHN0ZXJTcGllbGVyLnNldFNwaWVsZmVsZChzYi5nZXRTdGFydGZlbGQoKSk7CgkJICAgIAoJCSAgICBpZih0aGlzLmdldEFrdHVlbGxlclNwaWVsZXIoKT09bnVsbCl7CgkJICAgICAgICBuYWVjaHN0ZXJTcGllbGVyLnNldE51bW1lcigxKTsKCQkgICAgICAgIHRoaXMuc2V0QWt0dWVsbGVyU3BpZWxlcihuYWVjaHN0ZXJTcGllbGVyKTsKCQkgICAgfQoJCSAgICAKCQkgICAgaWYobGV0enRlclNwaWVsZXIhPW51bGwpewogICAgICAgICAgICAgICAgbmFlY2hzdGVyU3BpZWxlci5zZXROdW1tZXIobGV0enRlclNwaWVsZXIuZ2V0TnVtbWVyKCkrMSk7CgkJICAgICAgICBsZXR6dGVyU3BpZWxlci5zZXROYWVjaHN0ZXJTcGllbGVyKG5hZWNoc3RlclNwaWVsZXIpOwoJCSAgICB9CgkJICAgIAoJCSAgICBsZXR6dGVyU3BpZWxlciA9IG5hZWNoc3RlclNwaWVsZXI7CiAgICAgICAgfQogICAgICAgIAoJCS8vIExpbmEubnM9dGhpcy5hcwogICAgICAgIGxldHp0ZXJTcGllbGVyLnNldE5hZWNoc3RlclNwaWVsZXIodGhpcy5nZXRBa3R1ZWxsZXJTcGllbGVyKCkpOwoJCQoJCQoJCWAsCgl9XQp9LCB7CglOYW1lOiAiU3BpZWxlciIsCglFbnRpdHlBdHRyaWJ1dGVzOiBbewoJCU5hbWU6ICJuYW1lIiwKCQlJc1N0cmluZzogdHJ1ZSwKCX0sIHsKCQlOYW1lOiAibnVtbWVyIiwKCQlJc0ludDogdHJ1ZSwKCX0sIHsKCQlOYW1lOiAiZ2VsZCIsCgkJSXNJbnQ6IHRydWUsCgl9LCB7CgkJTmFtZTogInZlcmhhZnRldCIsCgkJSXNCb29sOiB0cnVlLAoJfSwgewoJCU5hbWU6ICJmYXJiZSIsCgkJSXNTdHJpbmc6IHRydWUsCgl9LCB7CgkJTmFtZTogImFrdHVlbGxlUnVuZGUiLAoJCUlzSW50OiB0cnVlLAoJfSwgewoJCU5hbWU6ICJzcGllbGZlbGQiLAoJCUVudGl0eVR5cGU6IHsKCQkJTmFtZTogIlNwaWVsZmVsZCIKCQl9Cgl9LCB7CgkJTmFtZTogIm5hZWNoc3RlclNwaWVsZXIiLAoJCUVudGl0eVR5cGU6IHsKCQkJTmFtZTogIlNwaWVsZXIiCgkJfQoJfV0sCglFbnRpdHlNZXRob2RzOiBbewoJCU5hbWU6ICJTcGllbGVyIiwKCQlPcmRlcjogMSwKCQlBdXRob3I6ICJGcmFuemkiLAoJCU1ldGhvZFBhcmFtZXRlcnM6IFt7CgkJCU5hbWU6ICJuYW1lIiwKCQkJSXNTdHJpbmc6IHRydWUsCgkJfSwgewoJCQlOYW1lOiAiZmFyYmUiLAoJCQlJc1N0cmluZzogdHJ1ZSwKCQl9XSwKCQlKYXZhOiBgCgkJdGhpcy5zZXROYW1lKG5hbWUpLnNldEZhcmJlKGZhcmJlKS5zZXRHZWxkKDIwMDApOwoJCWAsCgl9LCB7CgkJTmFtZTogImdlaGVuIiwKCQlPcmRlcjogMiwKCQlBdXRob3I6ICJIYW5uYSIsCgkJUmVtYXJrOiAiRWluZW4gU2Nocml0dCBuYWNoIHZvcm5lIGdlaGVuLCBiaXMgZGllIGdld3VlcmZlbHRlIFphaGwgZXJyZWljaHQgaXN0IiwKCQlNZXRob2RQYXJhbWV0ZXJzOiBbewoJCQlOYW1lOiAic2Nocml0dGUiLAoJCQlJc0ludDogdHJ1ZSwKCQl9XSwKCQlKYXZhOiBgCiAgICAgICAgaWYgKHRoaXMuZ2V0VmVyaGFmdGV0KCkpIHsKICAgICAgICAgICAgdGhpcy5zZXRWZXJoYWZ0ZXQoZmFsc2UpOyAvL2ZhbGxzIGVpbiBTcGllbGVyIHZlcmhhZnRldCBpc3QsIHdpcmQgZXIgYWxzIG5pY2h0IHZlcmhhZnRldCBnZXNldHp0LCBkYW1pdCBlciBpbiBkZXIgbmFlY2hzdGVuIFJ1bmRlIHdpZWRlciBzcGllbGVuIGthbm4KCQl9IGVsc2UgewogICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHNjaHJpdHRlOyBpKyspewogICAgICAgICAgICAgICAgdGhpcy5zZXRTcGllbGZlbGQodGhpcy5nZXRTcGllbGZlbGQoKS5nZXROYWVjaHN0ZXNGZWxkKCkpOyAvL3ZlcnNldHp0IGRlbiBTcGllbGVyIGVpbiBGZWxkIG5hY2ggdm9ybmUsIHNvbGFuZ2UgZGllIEFuemFobCBkZXIgaW0gUGFyYW1ldGVyIMODwoPDgsK8YmVyZ2ViZW5lbiBTY2hyaXR0ZSBub2NoIG5pY2h0IGVycmVpY2h0IGlzdAogICAgICAgICAgICB9CgkJfQoJCXRoaXMuc2V0QWt0dWVsbGVSdW5kZSh0aGlzLmdldEFrdHVlbGxlUnVuZGUoKSArIDEpOwoJICAgIGAKCX0sIHsKCQlOYW1lOiAiZ2VrYXVmdGVGZWxkZXIiLAoJCU9yZGVyOiAzLAoJCUF1dGhvcjogIkpvaGFubmEiLAoJCVJlbWFyazogImdpYnQgZWluZSBMaXN0ZSBhbiBhbGxlbiBGZWxkZXJuIHp1csODwoPDgsK8Y2ssIGRpZSBlaW5lbSBTcGllbGVyIGdlaMODwoPDgsK2cmVuIiwKCQlNZXRob2RQYXJhbWV0ZXJzOiBbXSwKCQlKYXZhOiBgCgkJamF2YS51dGlsLkFycmF5TGlzdDxTcGllbGZlbGQ+IGdla2F1ZnRlTGlzdGUgPSBuZXcgamF2YS51dGlsLkFycmF5TGlzdDxTcGllbGZlbGQ+KCk7CgkJaWYodGhpcy5nZXRTcGllbGZlbGQoKS5nZXRCZXNpdHplcigpPT10aGlzKXsKCQkgICAgZ2VrYXVmdGVMaXN0ZS5hZGQodGhpcy5nZXRTcGllbGZlbGQoKSk7IC8vZnVlZ3QgZGFzIGpldHppZ2UgU3BpZWxmZWxkICB6dSBkZXIgQXJyYXlMaXN0IGhpbnp1LCBmYWxscyBlcyBkZW0gU3BpZWxlciBnZWhvZXJ0CgkJfQoJCQoJCWZvcihTcGllbGZlbGQgc3AgPSB0aGlzLmdldFNwaWVsZmVsZCgpLmdldE5hZWNoc3Rlc0ZlbGQoKTsgc3AhPXRoaXMuZ2V0U3BpZWxmZWxkKCk7IHNwID0gc3AuZ2V0TmFlY2hzdGVzRmVsZCgpKXsKCQkgICAgaWYoc3AuZ2V0QmVzaXR6ZXIoKT09dGhpcyl7CgkJICAgICAgICBnZWthdWZ0ZUxpc3RlLmFkZChzcCk7IC8vZnVlZ3QgYWIgZGVtIG5hZWNoc3RlbiBTcGllbGZlbGQgYWxsZSBTcGllbGZlbGRlciB6dSBkZXIgTGlzdGUgZGVyIGdla2F1ZnRlbiBGZWxkZXIgaGluenUsIGRpZSBkZW0gU3BpZWxlciBnZWjDg8KDw4LCtnJlbgoJCSAgICB9CgkJfQoJCQoJCS8vc29ydGllcnQgZGllIEFycmF5TGlzdCBkZXIgZ2VrYXVmdGVuIEZlbGRlciBuYWNoIGlocmVyIFBvc2l0aW9uIGF1ZiBkZW0gU3BpZWxmZWxkCgkJamF2YS51dGlsLkNvbGxlY3Rpb25zLnNvcnQoZ2VrYXVmdGVMaXN0ZSwgbmV3IGphdmEudXRpbC5Db21wYXJhdG9yPFNwaWVsZmVsZD4oKSB7CiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAvKiAqLwogICAgICAgICAgICBwdWJsaWMgaW50IGNvbXBhcmUoU3BpZWxmZWxkIHoxLCBTcGllbGZlbGQgejIpIHsKICAgICAgICAgICAgICAgIGlmICh6MS5nZXROdW1tZXIoKSA+IHoyLmdldE51bW1lcigpKQogICAgICAgICAgICAgICAgICAgIHJldHVybiAxOwogICAgICAgICAgICAgICAgaWYgKHoxLmdldE51bW1lcigpIDwgejIuZ2V0TnVtbWVyKCkpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCQlyZXR1cm4gZ2VrYXVmdGVMaXN0ZTsKCSAgICBgLAoJCVJlc3BvbnNlQXR0cmlidXRlOiB7CgkJCUlzQXJyYXk6IHRydWUsCgkJCUVudGl0eVR5cGU6IHsKCQkJCU5hbWU6ICJTcGllbGZlbGQiCgkJCX0KCQl9Cgl9XQp9LCB7CglOYW1lOiAiU3BpZWxicmV0dCIsCglFbnRpdHlBdHRyaWJ1dGVzOiBbewoJCU5hbWU6ICJuYW1lIiwKCQlJc1N0cmluZzogdHJ1ZSwKCQlJc1VuaXF1ZTogdHJ1ZSwKCX0sIHsKCQlOYW1lOiAiYnJldHRCcmVpdGUiLAoJCUlzSW50OiB0cnVlCgl9LCB7CgkJTmFtZTogInhQb3NpdGlvbiIsCgkJSXNJbnQ6IHRydWUKCX0sIHsKCQlOYW1lOiAieVBvc2l0aW9uIiwKCQlJc0ludDogdHJ1ZQoJfSwgewoJCU5hbWU6ICJzdGFydGZlbGQiLAoJCUVudGl0eVR5cGU6IHsKCQkJTmFtZTogIkdvRmVsZCIKCQl9Cgl9XSwKCUVudGl0eU1ldGhvZHM6IFt7CgkJTmFtZTogImZlbGRYUG9zaXRpb24iLAoJCUF1dGhvcjogIkNocmlzdGluYSIsCgkJUmVtYXJrOiAiIiwKCQlNZXRob2RQYXJhbWV0ZXJzOiBbewoJCQlOYW1lOiAic3BpZWxGZWxkIiwKCQkJRW50aXR5VHlwZTogewoJCQkJTmFtZTogIlNwaWVsZmVsZCIKCQkJfQoJCX1dLAoJCUphdmE6IGAKCQlpZihzcGllbEZlbGQuZ2V0TnVtbWVyKCk8MTEpewogICAgICAgICAgICByZXR1cm4geFBvc2l0aW9uICsgYnJldHRCcmVpdGUgLSAoc3BpZWxGZWxkLmdldE51bW1lcigpKzEpKmJyZXR0QnJlaXRlLzEzOwoJCX1lbHNlIGlmKHNwaWVsRmVsZC5nZXROdW1tZXIoKTwyMSl7CgkJICAgIHJldHVybiB4UG9zaXRpb247CgkJfWVsc2UgaWYoc3BpZWxGZWxkLmdldE51bW1lcigpPDMxKXsKCQkgICAgcmV0dXJuIHhQb3NpdGlvbiArIChzcGllbEZlbGQuZ2V0TnVtbWVyKCktKHNwaWVsRmVsZC5nZXROdW1tZXIoKT09MjE/MjE6MjApKSpicmV0dEJyZWl0ZS8xMzsKCQl9ZWxzZSBpZihzcGllbEZlbGQuZ2V0TnVtbWVyKCk8NDEpewoJCSAgICByZXR1cm4geFBvc2l0aW9uICsgYnJldHRCcmVpdGUgLSAyKmJyZXR0QnJlaXRlLzEzOwoJCX1lbHNlewoJCSAgICByZXR1cm4gMDsKCQl9CgkJYCwKCQlSZXNwb25zZUF0dHJpYnV0ZTogewoJCQlJc0ludDogdHJ1ZQoJCX0KCX0sIHsKCQlOYW1lOiAiZmVsZFlQb3NpdGlvbiIsCgkJQXV0aG9yOiAiQ2hyaXN0aW5hIiwKCQlNZXRob2RQYXJhbWV0ZXJzOiBbewoJCQlOYW1lOiAic3BpZWxGZWxkIiwKCQkJRW50aXR5VHlwZTogewoJCQkJTmFtZTogIlNwaWVsZmVsZCIKCQkJfQoJCX1dLAoJCUphdmE6IGAKCQlpZihzcGllbEZlbGQuZ2V0TnVtbWVyKCk8MTEpewogICAgICAgICAgICByZXR1cm4geVBvc2l0aW9uICsgYnJldHRCcmVpdGUgLSAyKihicmV0dEJyZWl0ZS8xMyk7CgkJfWVsc2UgaWYoc3BpZWxGZWxkLmdldE51bW1lcigpPDIxKXsKCQkgICAgcmV0dXJuIHlQb3NpdGlvbiArIGJyZXR0QnJlaXRlIC0gMiooYnJldHRCcmVpdGUvMTMpIC0gKHNwaWVsRmVsZC5nZXROdW1tZXIoKS0xMSkqYnJldHRCcmVpdGUvMTM7CgkJfWVsc2UgaWYoc3BpZWxGZWxkLmdldE51bW1lcigpPDMxKXsKCQkgICAgcmV0dXJuIHlQb3NpdGlvbjsKCQl9ZWxzZSBpZihzcGllbEZlbGQuZ2V0TnVtbWVyKCk8NDEpewoJCSAgICByZXR1cm4geVBvc2l0aW9uICsgKHNwaWVsRmVsZC5nZXROdW1tZXIoKS0oc3BpZWxGZWxkLmdldE51bW1lcigpPT0zMT8zMTozMCkpKmJyZXR0QnJlaXRlLzEzOwoJCX1lbHNlewoJCSAgICByZXR1cm4gMDsKCQl9CgkJYCwKCQlSZXNwb25zZUF0dHJpYnV0ZTogewoJCQlJc0ludDogdHJ1ZQoJCX0KCX1dCn0sIHsKCU5hbWU6ICJTcGllbGZlbGQiLAoJSXNBYnN0cmFjdDogdHJ1ZSwKCUVudGl0eUF0dHJpYnV0ZXM6IFt7CgkJTmFtZTogIm5hbWUiLAoJCUlzU3RyaW5nOiB0cnVlCgl9LCB7CgkJTmFtZTogIm51bW1lciIsCgkJSXNJbnQ6IHRydWUKCX0sIHsKCQlOYW1lOiAibWlldGUiLAoJCUlzSW50OiB0cnVlCgl9LCB7CgkJTmFtZTogImZhcmJlIiwKCQlJc1N0cmluZzogdHJ1ZSwKCX0sIHsKCQlOYW1lOiAibmFlY2hzdGVzRmVsZCIsCgkJRW50aXR5VHlwZTogewoJCQlOYW1lOiAiU3BpZWxmZWxkIgoJCX0KCX0sIHsKCQlOYW1lOiAiYmVzaXR6ZXIiLAoJCUVudGl0eVR5cGU6IHsKCQkJTmFtZTogIlNwaWVsZXIiCgkJfQoJfV0sCglFbnRpdHlNZXRob2RzOiBbewoJCU5hbWU6ICJzcGllbGVyTGlzdGUiLAoJCUF1dGhvcjogIklkaWwiLAoJCU1ldGhvZFBhcmFtZXRlcnM6IFtdLAoJCVJlc3BvbnNlQXR0cmlidXRlOiB7CgkJCUlzQXJyYXk6IHRydWUsCgkJCUVudGl0eVR5cGU6IHsKCQkJCU5hbWU6ICJTcGllbGVyIiwKCQkJfQoJCX0KCX0sIHsKCQlOYW1lOiAiYWt0aW9uQXVzZnVlaHJlbiIsCgkJQXV0aG9yOiAiRXN6dGVyIiwKCQlNZXRob2RQYXJhbWV0ZXJzOiBbewoJCQlOYW1lOiAic3BpZWxlciIsCgkJCUVudGl0eVR5cGU6IHsKCQkJCU5hbWU6ICJTcGllbGVyIiwKCQkJfQoJCX0sIHsKCQkJTmFtZTogImFrdGlvbmVuTGlzdGUiLAoJCQlJc0FycmF5OiB0cnVlLAoJCQlJc1N0cmluZzogdHJ1ZSwKCQl9XSwKCQlKYXZhOiBgcmV0dXJuO2AsCgl9LCB7CgkJTmFtZTogIm5hbWVJbkV1cm8iLAoJCUF1dGhvcjogIkNocmlzdGluYSIsCgkJTWV0aG9kUGFyYW1ldGVyczogW10sCgkJSmF2YTogYAoJCWlmKHRoaXMuZ2V0TWlldGUoKSAhPSAwKSB7CgkJICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSArICIgIiArICgtMSkqdGhpcy5nZXRNaWV0ZSgpICsgIkV1cm8iOwoJCX0KCQlyZXR1cm4gdGhpcy5nZXROYW1lKCk7CgkgICAgYCwKCQlSZXNwb25zZUF0dHJpYnV0ZTogewoJCQlJc1N0cmluZzogdHJ1ZQoJCX0KCX1dLAp9LCB7CglOYW1lOiAiR29GZWxkIiwKCUV4dGVuZHM6IHsKCQlOYW1lOiAiU3BpZWxmZWxkIgoJfSwKCUVudGl0eUF0dHJpYnV0ZXM6IFtdLAoJRW50aXR5TWV0aG9kczogW3sKCQlOYW1lOiAiR29GZWxkIiwKCQlBdXRob3I6ICJGcmFuemkiLAoJCUphdmE6IGB0aGlzLnNldE5hbWUoIkdPIik7YCwKCX0sIHsKCQlOYW1lOiAic3BpZWxlckxpc3RlIiwKCQlNZXRob2RQYXJhbWV0ZXJzOiBbXSwKCQlKYXZhOiBgCgkJcmV0dXJuIG5ldyBqYXZhLnV0aWwuQXJyYXlMaXN0PFNwaWVsZXI+KCk7CgkJYCwKCQlSZXNwb25zZUF0dHJpYnV0ZTogewoJCQlJc0FycmF5OiB0cnVlLAoJCQlFbnRpdHlUeXBlOiB7CgkJCQlOYW1lOiAiU3BpZWxlciIsCgkJCX0KCQl9Cgl9LCB7CgkJTmFtZTogImFrdGlvbkF1c2Z1ZWhyZW4iLAoJCUF1dGhvcjogIkhhbm5hIiwKCQlNZXRob2RQYXJhbWV0ZXJzOiBbewoJCQlOYW1lOiAic3BpZWxlciIsCgkJCUVudGl0eVR5cGU6IHsKCQkJCU5hbWU6ICJTcGllbGVyIiwKCQkJfQoJCX0sIHsKCQkJTmFtZTogImFrdGlvbmVuTGlzdGUiLAoJCQlJc0FycmF5OiB0cnVlLAoJCQlJc1N0cmluZzogdHJ1ZSwKCQl9XSwKCQlKYXZhOiBgCgkJICAgIHNwaWVsZXIuc2V0R2VsZChzcGllbGVyLmdldEdlbGQoKSAtIHRoaXMuZ2V0TWlldGUoKSk7CgkJYAoJfV0sCn0sIHsKCU5hbWU6ICJLaXN0ZSIsCglFeHRlbmRzOiB7CgkJTmFtZTogIlNwaWVsZmVsZCIKCX0sCglFbnRpdHlBdHRyaWJ1dGVzOiBbXSwKCUVudGl0eU1ldGhvZHM6IFt7CgkJTmFtZTogInNwaWVsZXJMaXN0ZSIsCgkJQXV0aG9yOiAiRXN6dGVyIiwKCQlNZXRob2RQYXJhbWV0ZXJzOiBbXSwKCQlKYXZhOiBgCgkJcmV0dXJuIG5ldyBqYXZhLnV0aWwuQXJyYXlMaXN0PFNwaWVsZXI+KCk7CgkJYCwKCQlSZXNwb25zZUF0dHJpYnV0ZTogewoJCQlJc0FycmF5OiB0cnVlLAoJCQlFbnRpdHlUeXBlOiB7CgkJCQlOYW1lOiAiU3BpZWxlciIsCgkJCX0KCQl9Cgl9LCB7CgkJTmFtZTogImFrdGlvbkF1c2Z1ZWhyZW4iLAoJCUF1dGhvcjogIkpvaGFubmEiLAoJCU1ldGhvZFBhcmFtZXRlcnM6IFt7CgkJCU5hbWU6ICJzcGllbGVyIiwKCQkJRW50aXR5VHlwZTogewoJCQkJTmFtZTogIlNwaWVsZXIiLAoJCQl9CgkJfSwgewoJCQlOYW1lOiAiYWt0aW9uZW5MaXN0ZSIsCgkJCUlzQXJyYXk6IHRydWUsCgkJCUlzU3RyaW5nOiB0cnVlLAoJCX1dLAoJCUphdmE6IGAKCQkgICAgc3BpZWxlci5zZXRHZWxkKHNwaWVsZXIuZ2V0R2VsZCgpIC0gdGhpcy5nZXRNaWV0ZSgpKTsKCQlgCgl9XSwKfSwgewoJTmFtZTogIlBvbGl6ZWkiLAoJRXh0ZW5kczogewoJCU5hbWU6ICJTcGllbGZlbGQiCgl9LAoJRW50aXR5QXR0cmlidXRlczogW10sCglFbnRpdHlNZXRob2RzOiBbewoJCU5hbWU6ICJzcGllbGVyTGlzdGUiLAoJCUF1dGhvcjogIkZyYW56aSIsCgkJTWV0aG9kUGFyYW1ldGVyczogW10sCgkJSmF2YTogYAoJCXJldHVybiBuZXcgamF2YS51dGlsLkFycmF5TGlzdDxTcGllbGVyPigpOwoJCWAsCgkJUmVzcG9uc2VBdHRyaWJ1dGU6IHsKCQkJSXNBcnJheTogdHJ1ZSwKCQkJRW50aXR5VHlwZTogewoJCQkJTmFtZTogIlNwaWVsZXIiLAoJCQl9CgkJfQoJfSwgewoJCU5hbWU6ICJha3Rpb25BdXNmdWVocmVuIiwKCQlNZXRob2RQYXJhbWV0ZXJzOiBbewoJCQlOYW1lOiAic3BpZWxlciIsCgkJCUVudGl0eVR5cGU6IHsKCQkJCU5hbWU6ICJTcGllbGVyIiwKCQkJfQoJCX0sIHsKCQkJTmFtZTogImFrdGlvbmVuTGlzdGUiLAoJCQlBdXRob3I6ICJKb2hhbm5hIiwKCQkJSXNBcnJheTogdHJ1ZSwKCQkJSXNTdHJpbmc6IHRydWUsCgkJfV0sCgkJSmF2YTogYAoJCSAgICBzcGllbGVyLnNldFZlcmhhZnRldCh0cnVlKTsKCQkgICAgZm9yKFNwaWVsZmVsZCBzZiA9IHRoaXMuZ2V0TmFlY2hzdGVzRmVsZCgpOyAhKHNmIGluc3RhbmNlb2YgR2VmYWVuZ25pcyk7IHNmID0gc2YuZ2V0TmFlY2hzdGVzRmVsZCgpKXsKCQkgICAgICAgIHNwaWVsZXIuc2V0U3BpZWxmZWxkKHNmLmdldE5hZWNoc3Rlc0ZlbGQoKSk7CgkJICAgIH0KCQkgICAgCgkJYAoJfV0sCn0sIHsKCU5hbWU6ICJQYXJrcGxhdHoiLAoJRXh0ZW5kczogewoJCU5hbWU6ICJTcGllbGZlbGQiCgl9LAoJRW50aXR5QXR0cmlidXRlczogW10sCglFbnRpdHlNZXRob2RzOiBbewoJCU5hbWU6ICJzcGllbGVyTGlzdGUiLAoJCU1ldGhvZFBhcmFtZXRlcnM6IFtdLAoJCUphdmE6IGAKCQlyZXR1cm4gbmV3IGphdmEudXRpbC5BcnJheUxpc3Q8U3BpZWxlcj4oKTsKCQlgLAoJCVJlc3BvbnNlQXR0cmlidXRlOiB7CgkJCUlzQXJyYXk6IHRydWUsCgkJCUVudGl0eVR5cGU6IHsKCQkJCU5hbWU6ICJTcGllbGVyIiwKCQkJfQoJCX0KCX0sIHsKCQlOYW1lOiAiYWt0aW9uQXVzZnVlaHJlbiIsCgkJTWV0aG9kUGFyYW1ldGVyczogW3sKCQkJTmFtZTogInNwaWVsZXIiLAoJCQlFbnRpdHlUeXBlOiB7CgkJCQlOYW1lOiAiU3BpZWxlciIsCgkJCX0KCQl9LCB7CgkJCU5hbWU6ICJha3Rpb25lbkxpc3RlIiwKCQkJSXNBcnJheTogdHJ1ZSwKCQkJSXNTdHJpbmc6IHRydWUsCgkJfV0sCgkJSmF2YTogYGAsCgl9XSwKfSwgewoJTmFtZTogIldhc3NlciIsCglBY3RpdmU6IGZhbHNlLAoJRXh0ZW5kczogewoJCU5hbWU6ICJTcGllbGZlbGQiCgl9LAoJRW50aXR5QXR0cmlidXRlczogW10sCglFbnRpdHlNZXRob2RzOiBbewoJCU5hbWU6ICJzcGllbGVyTGlzdGUiLAoJCU1ldGhvZFBhcmFtZXRlcnM6IFtdLAoJCUphdmE6IGAKCQlyZXR1cm4gbmV3IGphdmEudXRpbC5BcnJheUxpc3Q8U3BpZWxlcj4oKTsKCQlgLAoJCVJlc3BvbnNlQXR0cmlidXRlOiB7CgkJCUlzQXJyYXk6IHRydWUsCgkJCUVudGl0eVR5cGU6IHsKCQkJCU5hbWU6ICJTcGllbGVyIiwKCQkJfQoJCX0KCX1dLAp9LCB7CglOYW1lOiAiTGFtcGUiLAoJQWN0aXZlOiBmYWxzZSwKCUV4dGVuZHM6IHsKCQlOYW1lOiAiU3BpZWxmZWxkIgoJfSwKCUVudGl0eUF0dHJpYnV0ZXM6IFtdLAoJRW50aXR5TWV0aG9kczogW3sKCQlOYW1lOiAic3BpZWxlckxpc3RlIiwKCQlNZXRob2RQYXJhbWV0ZXJzOiBbXSwKCQlKYXZhOiBgCgkJcmV0dXJuIG5ldyBqYXZhLnV0aWwuQXJyYXlMaXN0PFNwaWVsZXI+KCk7CgkJYCwKCQlSZXNwb25zZUF0dHJpYnV0ZTogewoJCQlJc0FycmF5OiB0cnVlLAoJCQlFbnRpdHlUeXBlOiB7CgkJCQlOYW1lOiAiU3BpZWxlciIsCgkJCX0KCQl9Cgl9XSwKfSwgewoJTmFtZTogIkdlZmFlbmduaXMiLAoJRXh0ZW5kczogewoJCU5hbWU6ICJTcGllbGZlbGQiCgl9LAoJRW50aXR5QXR0cmlidXRlczogW10sCglFbnRpdHlNZXRob2RzOiBbewoJCU5hbWU6ICJzcGllbGVyTGlzdGUiLAoJCUF1dGhvcjogIkhhbm5hIiwKCQlNZXRob2RQYXJhbWV0ZXJzOiBbXSwKCQlKYXZhOiBgCgkJcmV0dXJuIG5ldyBqYXZhLnV0aWwuQXJyYXlMaXN0PFNwaWVsZXI+KCk7CgkJYCwKCQlSZXNwb25zZUF0dHJpYnV0ZTogewoJCQlJc0FycmF5OiB0cnVlLAoJCQlFbnRpdHlUeXBlOiB7CgkJCQlOYW1lOiAiU3BpZWxlciIsCgkJCX0KCQl9Cgl9LCB7CgkJTmFtZTogImFrdGlvbkF1c2Z1ZWhyZW4iLAoJCU1ldGhvZFBhcmFtZXRlcnM6IFt7CgkJCU5hbWU6ICJzcGllbGVyIiwKCQkJRW50aXR5VHlwZTogewoJCQkJTmFtZTogIlNwaWVsZXIiLAoJCQl9CgkJfSwgewoJCQlOYW1lOiAiYWt0aW9uZW5MaXN0ZSIsCgkJCUlzQXJyYXk6IHRydWUsCgkJCUlzU3RyaW5nOiB0cnVlLAoJCX1dLAoJCUphdmE6IGAKCQkgICAgCgkJYAoJfV0sCn0sIHsKCU5hbWU6ICJFcmVpZ25pc2ZlbGQiLAoJRXh0ZW5kczogewoJCU5hbWU6ICJTcGllbGZlbGQiCgl9LAoJRW50aXR5QXR0cmlidXRlczogW10sCglFbnRpdHlNZXRob2RzOiBbewoJCU5hbWU6ICJzcGllbGVyTGlzdGUiLAoJCUF1dGhvcjogIklkaWwiLAoJCU1ldGhvZFBhcmFtZXRlcnM6IFtdLAoJCUphdmE6IGAKCQlyZXR1cm4gbmV3IGphdmEudXRpbC5BcnJheUxpc3Q8U3BpZWxlcj4oKTsKCQlgLAoJCVJlc3BvbnNlQXR0cmlidXRlOiB7CgkJCUlzQXJyYXk6IHRydWUsCgkJCUVudGl0eVR5cGU6IHsKCQkJCU5hbWU6ICJTcGllbGVyIiwKCQkJfQoJCX0KCX0sIHsKCQlOYW1lOiAiYWt0aW9uQXVzZnVlaHJlbiIsCgkJQXV0aG9yOiAiSGFubmEiLAoJCU1ldGhvZFBhcmFtZXRlcnM6IFt7CgkJCU5hbWU6ICJzcGllbGVyIiwKCQkJRW50aXR5VHlwZTogewoJCQkJTmFtZTogIlNwaWVsZXIiLAoJCQl9CgkJfSwgewoJCQlOYW1lOiAiYWt0aW9uZW5MaXN0ZSIsCgkJCUlzQXJyYXk6IHRydWUsCgkJCUlzU3RyaW5nOiB0cnVlLAoJCX1dLAoJCUphdmE6IGAKCQkgICAgdGhpcy5zZXRNaWV0ZSgxMCoobmV3IGphdmEudXRpbC5SYW5kb20oKS5uZXh0SW50KC01MCw1MCkgLyAxMCkpOwoJCSAgICAKCQkgICAgc3BpZWxlci5zZXRHZWxkKHNwaWVsZXIuZ2V0R2VsZCgpIC0gdGhpcy5nZXRNaWV0ZSgpKTsKCQlgCgl9XSwKfSwgewoJTmFtZTogIkJhaG5ob2YiLAoJQWN0aXZlOiBmYWxzZSwKCUV4dGVuZHM6IHsKCQlOYW1lOiAiU3BpZWxmZWxkIgoJfSwKCUVudGl0eUF0dHJpYnV0ZXM6IFtdLAoJRW50aXR5TWV0aG9kczogW3sKCQlOYW1lOiAic3BpZWxlckxpc3RlIiwKCQlNZXRob2RQYXJhbWV0ZXJzOiBbXSwKCQlKYXZhOiBgCgkJcmV0dXJuIG5ldyBqYXZhLnV0aWwuQXJyYXlMaXN0PFNwaWVsZXI+KCk7CgkJYCwKCQlSZXNwb25zZUF0dHJpYnV0ZTogewoJCQlJc0FycmF5OiB0cnVlLAoJCQlFbnRpdHlUeXBlOiB7CgkJCQlOYW1lOiAiU3BpZWxlciIsCgkJCX0KCQl9Cgl9LCB7CgkJTmFtZTogImFrdGlvbkF1c2Z1ZWhyZW4iLAoJCU1ldGhvZFBhcmFtZXRlcnM6IFt7CgkJCU5hbWU6ICJzcGllbGVyIiwKCQkJRW50aXR5VHlwZTogewoJCQkJTmFtZTogIlNwaWVsZXIiLAoJCQl9CgkJfSwgewoJCQlOYW1lOiAiYWt0aW9uZW5MaXN0ZSIsCgkJCUlzQXJyYXk6IHRydWUsCgkJCUlzU3RyaW5nOiB0cnVlLAoJCX1dLAoJCUphdmE6IGAKCQkgICAgc3BpZWxlci5zZXRHZWxkKHNwaWVsZXIuZ2V0R2VsZCgpIC0gdGhpcy5nZXRNaWV0ZSgpKTsKCQlgCgl9XSwKfSwgewoJTmFtZTogIlN0cmFzc2UiLAoJRXh0ZW5kczogewoJCU5hbWU6ICJTcGllbGZlbGQiCgl9LAoJRW50aXR5QXR0cmlidXRlczogW3sKCQlOYW1lOiAia2F1ZlByZWlzIiwKCQlJc0ludDogdHJ1ZQoJfV0sCglFbnRpdHlNZXRob2RzOiBbewoJCU5hbWU6ICJzcGllbGVyTGlzdGUiLAoJCU1ldGhvZFBhcmFtZXRlcnM6IFtdLAoJCUphdmE6IGAKCQlyZXR1cm4gbmV3IGphdmEudXRpbC5BcnJheUxpc3Q8U3BpZWxlcj4oKTsKCQlgLAoJCVJlc3BvbnNlQXR0cmlidXRlOiB7CgkJCUlzQXJyYXk6IHRydWUsCgkJCUVudGl0eVR5cGU6IHsKCQkJCU5hbWU6ICJTcGllbGVyIiwKCQkJfQoJCX0KCX0sIHsKCQlOYW1lOiAiYWt0aW9uQXVzZnVlaHJlbiIsCgkJTWV0aG9kUGFyYW1ldGVyczogW3sKCQkJTmFtZTogInNwaWVsZXIiLAoJCQlFbnRpdHlUeXBlOiB7CgkJCQlOYW1lOiAiU3BpZWxlciIsCgkJCX0KCQl9LCB7CgkJCU5hbWU6ICJha3Rpb25lbkxpc3RlIiwKCQkJQXV0aG9yOiAiQ2hyaXN0aW5hIiwKCQkJSXNBcnJheTogdHJ1ZSwKCQkJSXNTdHJpbmc6IHRydWUsCgkJfV0sCgkJSmF2YTogYAoJCSAgICBha3Rpb25lbkxpc3RlLmZvckVhY2goYWsgLT4gewoJCSAgICAgICAgc3dpdGNoKGFrKXsKCQkgICAgICAgICAgICBjYXNlICJrYXVmZW4iOgoJCSAgICAgICAgICAgICAgICBzcGllbGVyLnNldEdlbGQoc3BpZWxlci5nZXRHZWxkKCkgLSB0aGlzLmdldEthdWZQcmVpcygpKTsKCQkgICAgICAgICAgICAgICAgdGhpcy5zZXRCZXNpdHplcihzcGllbGVyKTsKCQkgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgY2FzZSAibWlldGUiOgoJCSAgICAgICAgICAgICAgICBzcGllbGVyLnNldEdlbGQoc3BpZWxlci5nZXRHZWxkKCkgLSB0aGlzLmdldE1pZXRlKCkpOwoJCSAgICAgICAgICAgICAgICB0aGlzLmdldEJlc2l0emVyKCkuc2V0R2VsZCh0aGlzLmdldEJlc2l0emVyKCkuZ2V0R2VsZCgpK3RoaXMuZ2V0TWlldGUoKSk7CgkJICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgfQoJCSAgICB9KTsKCQkgICAgCgkJYAoJfSwgewoJCU5hbWU6ICJuYW1lSW5FdXJvIiwKCQlBdXRob3I6ICJFc3p0ZXIiLAoJCU1ldGhvZFBhcmFtZXRlcnM6IFtdLAoJCUphdmE6IGAKCQlpZih0aGlzLmdldEthdWZQcmVpcygpICE9IDApIHsKCQkgICAgcmV0dXJuIHRoaXMuZ2V0TmFtZSgpICsgIiAiICsgKC0xKSp0aGlzLmdldEthdWZQcmVpcygpICsgIkV1cm8iOwoJCX0KCQlyZXR1cm4gdGhpcy5nZXROYW1lKCk7CgkgICAgYCwKCQlSZXNwb25zZUF0dHJpYnV0ZTogewoJCQlJc1N0cmluZzogdHJ1ZQoJCX0KCX1dLAp9LCB7CglOYW1lOiAiU3RldWVybiIsCglBY3RpdmU6IGZhbHNlLAoJRXh0ZW5kczogewoJCU5hbWU6ICJTcGllbGZlbGQiCgl9LAoJRW50aXR5QXR0cmlidXRlczogW10sCglFbnRpdHlNZXRob2RzOiBbewoJCU5hbWU6ICJzcGllbGVyTGlzdGUiLAoJCU1ldGhvZFBhcmFtZXRlcnM6IFtdLAoJCUphdmE6IGAKCQlyZXR1cm4gbmV3IGphdmEudXRpbC5BcnJheUxpc3Q8U3BpZWxlcj4oKTsKCQlgLAoJCVJlc3BvbnNlQXR0cmlidXRlOiB7CgkJCUlzQXJyYXk6IHRydWUsCgkJCUVudGl0eVR5cGU6IHsKCQkJCU5hbWU6ICJTcGllbGVyIiwKCQkJfQoJCX0KCX0sIHsKCQlOYW1lOiAiYWt0aW9uQXVzZnVlaHJlbiIsCgkJTWV0aG9kUGFyYW1ldGVyczogW3sKCQkJTmFtZTogInNwaWVsZXIiLAoJCQlFbnRpdHlUeXBlOiB7CgkJCQlOYW1lOiAiU3BpZWxlciIsCgkJCX0KCQl9LCB7CgkJCU5hbWU6ICJha3Rpb25lbkxpc3RlIiwKCQkJSXNBcnJheTogdHJ1ZSwKCQkJSXNTdHJpbmc6IHRydWUsCgkJfV0sCgkJSmF2YTogYAoJCSAgICBzcGllbGVyLnNldEdlbGQoc3BpZWxlci5nZXRHZWxkKCkgLSB0aGlzLmdldE1pZXRlKCkpOwoJCWAKCX1dLAp9XQ==",
	"Name": "R1lfTU9OT1BPTFk=",
	"Script": "W3sKCU5hbWU6ICJTcGllbCIsCglFbnRpdHlBdHRyaWJ1dGVzOiBbewoJCU5hbWU6ICJuYW1lIiwKCQlJc1N0cmluZzogdHJ1ZSwKCX0sIHsKCQlOYW1lOiAicnVuZGVuTGltaXQiLAoJCUlzSW50OiB0cnVlLAoJfSwgewoJCU5hbWU6ICJha3R1ZWxsZXJTcGllbGVyIiwKCQlFbnRpdHlUeXBlOiB7CgkJCU5hbWU6ICJTcGllbGVyIgoJCX0KCX0sIHsKCQlOYW1lOiAic3BpZWxicmV0dCIsCgkJRW50aXR5VHlwZTogewoJCQlOYW1lOiAiU3BpZWxicmV0dCIKCQl9Cgl9XSwKCUVudGl0eU1ldGhvZHM6IFt7CgkJTmFtZTogInd1ZXJmZWxuIiwKCQlBdXRob3I6ICJDaHJpc3RpbmEiLAoJCU1ldGhvZFBhcmFtZXRlcnM6IFtdLAoJCVJlbWFyazogImdpYnQgMCB6dXLDg8KDw4LCvGNrLCBmYWxscyBkYXMgUnVuZGVubGltaXQgZXJyZWljaHQgaXN0IG9kZXIgZGVyIGFrdHVlbGxlIFNwaWVsZXIga2VpbiBHZWxkIG1laHIgaGF0LCB2ZXJyaW5nZXJ0IGRhcyBydW5kZW5MaW1pdCwgd2VubiBkZXIgYWt0dWVsbGUgU3BpZWxlciBkaWUgTnVtbWVyIDEgaGF0LCBsYWVzc3QgZGVuIGFrdHVlbGxlbiBTcGllbGVyIGVpbmUgenVmw4PCg8OCwqRsbGlnZSBBbnphaGwgYW4gU2Nocml0dGVuIHp3aXNjaGVuIDEgdW5kIDYgZ2VoZW4sIHNldHp0IGRlbiBuYWVjaHN0ZW4gU3BpZWxlciBhbHMgYWt0dWVsbGVuIFNwaWVsZXIgdm9tIEJyZXR0IiwKCQlKYXZhOiBgCgkJaWYgKHRoaXMuZ2V0UnVuZGVuTGltaXQoKSA8PSAwIHx8IGFrdHVlbGxlclNwaWVsZXIuZ2V0R2VsZCgpIDwgMCkgewoJCSAgICByZXR1cm4gMDsKCQl9CgkJaWYodGhpcy5nZXRBa3R1ZWxsZXJTcGllbGVyKCkuZ2V0TnVtbWVyKCkgPT0gMSkgewoJCSAgICB0aGlzLnNldFJ1bmRlbkxpbWl0KHRoaXMuZ2V0UnVuZGVuTGltaXQoKSAtIDEpOwoJCX0KCQkKCQlpbnQgc2Nocml0dGUgPSBuZXcgamF2YS51dGlsLlJhbmRvbSgpLm5leHRJbnQoMSw2KTsKCQl0aGlzLmdldEFrdHVlbGxlclNwaWVsZXIoKS5nZWhlbihzY2hyaXR0ZSk7CgkJdGhpcy5zZXRBa3R1ZWxsZXJTcGllbGVyKHRoaXMuZ2V0QWt0dWVsbGVyU3BpZWxlcigpLmdldE5hZWNoc3RlclNwaWVsZXIoKSk7CgkJcmV0dXJuIHNjaHJpdHRlOwoJCWAsCgkJUmVzcG9uc2VBdHRyaWJ1dGU6IHsKCQkJSXNJbnQ6IHRydWUsCgkJfQoJfSwgewoJCU5hbWU6ICJTcGllbCIsCgkJT3JkZXI6IDEsCgkJQXV0aG9yOiAiQ2hyaXN0aW5hIiwKCQlNZXRob2RQYXJhbWV0ZXJzOiBbewoJCQlOYW1lOiAic3BpZWxlciIsCgkJCUlzQXJyYXk6IHRydWUsCgkJCUVudGl0eVR5cGU6IHsKCQkJCU5hbWU6ICJTcGllbGVyIgoJCQl9CgkJfV0sCgkJSmF2YTogYAoJCXRoaXMuc2V0UnVuZGVuTGltaXQoNTApOwoJCXRoaXMuc2V0TmFtZSgiU3BpZWwgMSIpOwoJCQoJCVNwaWVsYnJldHQgc2IgPSBuZXcgU3BpZWxicmV0dCgpOwoJCXNiLnNldE5hbWUoIlNwaWVsYnJldHQgMSIpOwoJCQoJCXNiLnNldFN0YXJ0ZmVsZCgoR29GZWxkKW5ldyBHb0ZlbGQoKS5zZXROYW1lKCJHTyIpLnNldE1pZXRlKC0yMDApKTsgLy9uZXVlcyBHb0ZlbGQgZXJzdGVsbGVuIHVuZCBhbHMgU3RhcnRmZWxkIGRlcyBTcGllbGJyZXR0cyBzZXR6ZW4KCQkvL2Z1ZXIgamVkZXMgU3BpZWxmZWxkIGRhcyBwYXNzZW5kZSBuYWVjaHN0ZSBGZWxkIGVyc3RlbGxlbiB1bmQgenV3ZWlzZW4KCQlzYi5nZXRTdGFydGZlbGQoKS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICBuZXcgU3RyYXNzZSgpLnNldEthdWZQcmVpcyg2MCkuc2V0TWlldGUoMTApLnNldE5hbWUoIk1lZGl0ZXJyYW5pYW4gQXZlbnVlIikuc2V0RmFyYmUoImN5YW4iKS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICAgICAgbmV3IFN0cmFzc2UoKS5zZXRLYXVmUHJlaXMoNjApLnNldE1pZXRlKDEwKS5zZXROYW1lKCJCYWx0aWMgQXZlbnVlIikuc2V0RmFyYmUoImN5YW4iKS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICAgICAgICAgIG5ldyBLaXN0ZSgpLnNldE5hbWUoIkNoZXN0Iikuc2V0TWlldGUoLTEwKS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICAgICAgICAgICAgICBuZXcgU3RyYXNzZSgpLnNldEthdWZQcmVpcyg2MCkuc2V0TWlldGUoMTApLnNldE5hbWUoIkF0bGFudGljIEF2ZW51ZSIpLnNldEZhcmJlKCJjeWFuIikuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBFcmVpZ25pc2ZlbGQoKS5zZXROYW1lKCJDaGFuY2UiKS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBTdHJhc3NlKCkuc2V0S2F1ZlByZWlzKDEwMCkuc2V0TWlldGUoMjApLnNldE5hbWUoIk9yaWVudGFsIEF2ZW51ZSIpLnNldEZhcmJlKCJncmF1Iikuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEtpc3RlKCkuc2V0TmFtZSgiQ2hlc3QiKS5zZXRNaWV0ZSgtMTUpLnNldE5hZWNoc3Rlc0ZlbGQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgU3RyYXNzZSgpLnNldEthdWZQcmVpcygxMDApLnNldE1pZXRlKDIwKS5zZXROYW1lKCJWZXJtb250IEF2ZW51ZSIpLnNldEZhcmJlKCJncmF1Iikuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgU3RyYXNzZSgpLnNldEthdWZQcmVpcygxMDApLnNldE1pZXRlKDIwKS5zZXROYW1lKCJDb25uZXRpY3V0IEF2ZW51ZSIpLnNldEZhcmJlKCJncmF1Iikuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEdlZmFlbmduaXMoKS5zZXROYW1lKCJJbiBqYWlsIikuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBTdHJhc3NlKCkuc2V0S2F1ZlByZWlzKDE0MCkuc2V0TWlldGUoNDApLnNldE5hbWUoIlN0LiBDaGFybGVzIFBsYWNlIikuc2V0RmFyYmUoIm1hZ2VudGEiKS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBTdHJhc3NlKCkuc2V0S2F1ZlByZWlzKDE0MCkuc2V0TWlldGUoNDApLnNldE5hbWUoIlN0YXRlcyBBdmVudWUiKS5zZXRGYXJiZSgibWFnZW50YSIpLnNldE5hZWNoc3Rlc0ZlbGQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBLaXN0ZSgpLnNldE5hbWUoIkNoZXN0Iikuc2V0TWlldGUoLTIwKS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFN0cmFzc2UoKS5zZXRLYXVmUHJlaXMoMTQwKS5zZXRNaWV0ZSg0MCkuc2V0TmFtZSgiVmlyZ2luaWEgQXZlbnVlIikuc2V0RmFyYmUoIm1hZ2VudGEiKS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBFcmVpZ25pc2ZlbGQoKS5zZXROYW1lKCJDaGFuY2UiKS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgU3RyYXNzZSgpLnNldEthdWZQcmVpcygxODApLnNldE1pZXRlKDYwKS5zZXROYW1lKCJTdC4gSmFtZXMgUGxhY2UiKS5zZXRGYXJiZSgib3JhbmdlIikuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBLaXN0ZSgpLnNldE5hbWUoIkNoZXN0Iikuc2V0TWlldGUoLTI1KS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBTdHJhc3NlKCkuc2V0S2F1ZlByZWlzKDE4MCkuc2V0TWlldGUoNjApLnNldE5hbWUoIlRlbm5lc3NlZSBBdmVudWUiKS5zZXRGYXJiZSgib3JhbmdlIikuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFN0cmFzc2UoKS5zZXRLYXVmUHJlaXMoMTgwKS5zZXRNaWV0ZSg2MCkuc2V0TmFtZSgiTmV3IFlvcmsgQXZlbnVlIikuc2V0RmFyYmUoIm9yYW5nZSIpLnNldE5hZWNoc3Rlc0ZlbGQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgUGFya3BsYXR6KCkuc2V0TmFtZSgiRnJlZSBQYXJraW5nIikuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgU3RyYXNzZSgpLnNldEthdWZQcmVpcygyMjApLnNldE1pZXRlKDgwKS5zZXROYW1lKCJLZW50dWNreSBBdmVudWUiKS5zZXRGYXJiZSgicm90Iikuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFN0cmFzc2UoKS5zZXRLYXVmUHJlaXMoMjIwKS5zZXRNaWV0ZSg4MCkuc2V0TmFtZSgiSW5kaWFuYSBBdmVudWUiKS5zZXRGYXJiZSgicm90Iikuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBLaXN0ZSgpLnNldE5hbWUoIkNoZXN0Iikuc2V0TWlldGUoLTMwKS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBTdHJhc3NlKCkuc2V0S2F1ZlByZWlzKDIyMCkuc2V0TWlldGUoODApLnNldE5hbWUoIklsbGlub2lzIEF2ZW51ZSIpLnNldEZhcmJlKCJyb3QiKS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgRXJlaWduaXNmZWxkKCkuc2V0TmFtZSgiQ2hhbmNlIikuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBTdHJhc3NlKCkuc2V0S2F1ZlByZWlzKDI2MCkuc2V0TWlldGUoMTAwKS5zZXROYW1lKCJNb29uIFN0cmVldCIpLnNldEZhcmJlKCJnZWxiIikuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgS2lzdGUoKS5zZXROYW1lKCJDaGVzdCIpLnNldE1pZXRlKC0zNSkuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFN0cmFzc2UoKS5zZXRLYXVmUHJlaXMoMjYwKS5zZXRNaWV0ZSgxMDApLnNldE5hbWUoIlZlbnRvciBBdmVudWUiKS5zZXRGYXJiZSgiZ2VsYiIpLnNldE5hZWNoc3Rlc0ZlbGQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgU3RyYXNzZSgpLnNldEthdWZQcmVpcygyNjApLnNldE1pZXRlKDEwMCkuc2V0TmFtZSgiTWFydmluIEdhcmRlbnMiKS5zZXRGYXJiZSgiZ2VsYiIpLnNldE5hZWNoc3Rlc0ZlbGQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFBvbGl6ZWkoKS5zZXROYW1lKCJHbyB0byBqYWlsISIpLnNldE5hZWNoc3Rlc0ZlbGQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBTdHJhc3NlKCkuc2V0S2F1ZlByZWlzKDMwMCkuc2V0TWlldGUoMTIwKS5zZXROYW1lKCJQYWNpZmljIEF2ZW51ZSIpLnNldEZhcmJlKCJncnVlbiIpLnNldE5hZWNoc3Rlc0ZlbGQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgU3RyYXNzZSgpLnNldEthdWZQcmVpcygzMDApLnNldE1pZXRlKDEyMCkuc2V0TmFtZSgiTm9ydGggQ2Fyb2xpbmEgQXZlbnVlIikuc2V0RmFyYmUoImdydWVuIikuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgS2lzdGUoKS5zZXROYW1lKCJDaGVzdCIpLnNldE1pZXRlKC00MCkuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFN0cmFzc2UoKS5zZXRLYXVmUHJlaXMoMzAwKS5zZXRNaWV0ZSgxMjApLnNldE5hbWUoIlBlbm5zeWx2YW5pYSBBdmVudWUiKS5zZXRGYXJiZSgiZ3J1ZW4iKS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEVyZWlnbmlzZmVsZCgpLnNldE5hbWUoIkNoYW5jZSIpLnNldE5hZWNoc3Rlc0ZlbGQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFN0cmFzc2UoKS5zZXRLYXVmUHJlaXMoMzUwKS5zZXRNaWV0ZSgxNDApLnNldE5hbWUoIlBhcmsgUGxhY2UiKS5zZXRGYXJiZSgiaGVsbGdlbGIiKS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgS2lzdGUoKS5zZXROYW1lKCJDaGVzdCIpLnNldE1pZXRlKC01MCkuc2V0TmFlY2hzdGVzRmVsZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBTdHJhc3NlKCkuc2V0S2F1ZlByZWlzKDQwMCkuc2V0TWlldGUoMTQwKS5zZXROYW1lKCJCb2FyZHdhbGsiKS5zZXRGYXJiZSgiaGVsbGdlbGIiKS5zZXROYWVjaHN0ZXNGZWxkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBTdHJhc3NlKCkuc2V0S2F1ZlByZWlzKDQ1MCkuc2V0TWlldGUoMjAwKS5zZXROYW1lKCJMYUxhTGFuZCIpLnNldEZhcmJlKCJoZWxsZ2VsYiIpLnNldE5hZWNoc3Rlc0ZlbGQoc2IuZ2V0U3RhcnRmZWxkKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICkKICAgICAgICApOwoJCQoJCS8vYWxsZSBGZWxkZXIgaW4gZGVyIHJpY2h0aWdlbiBSZWloZW5mb2xnZSBudW1tZXJpZXJlbgoJCXNiLmdldFN0YXJ0ZmVsZCgpLmdldE5hZWNoc3Rlc0ZlbGQoKS5zZXROdW1tZXIoMik7CgkJZm9yKFNwaWVsZmVsZCBzcEZlbGQgPSBzYi5nZXRTdGFydGZlbGQoKS5nZXROYWVjaHN0ZXNGZWxkKCk7IHNwRmVsZCE9c2IuZ2V0U3RhcnRmZWxkKCk7IHNwRmVsZCA9IHNwRmVsZC5nZXROYWVjaHN0ZXNGZWxkKCkpewoJCSAgICBzcEZlbGQuZ2V0TmFlY2hzdGVzRmVsZCgpLnNldE51bW1lcihzcEZlbGQuZ2V0TnVtbWVyKCkrMSk7CgkJfQoJCXNiLmdldFN0YXJ0ZmVsZCgpLnNldE51bW1lcigxKTsKCQkKCgkJdGhpcy5zZXRTcGllbGJyZXR0KHNiKTsgLy9kZW0gU3BpZWwgZGFzIFNwaWVsYnJldHQgenV3ZWlzZW4KCQkKICAgICAgICAvLyB6LkIuOiBzcGllbGVyPVtTUCgiVGltbyIsICJoZWxsZ2VsYiIpLCBTUCgiSmVubnkiLCAicm90IiksIFNQKCJMaW5hIiwgImdydWVuIildCiAgICAgICAgU3BpZWxlciBsZXR6dGVyU3BpZWxlciA9IG51bGw7CiAgICAgICAgCiAgICAgICAgLy9mb3JFYWNoIGF1cyBkZXIgQXJyYXlMaXN0IHNwaWVsZXIgKHdpcmQgYmVpbSBFcnN0ZWxsZW4gZGVzIFNwaWVscyBkZW0gS29uc3RydWt0b3IgYWxzIFBhcmFtZXRlciB1ZWJlcmdlYmVuKQoJCWZvcihTcGllbGVyIG5hZWNoc3RlclNwaWVsZXIgOiBzcGllbGVyKXsKCQkKICAgIAkJLy8gVGltbzogIGxzPW51bGw7ICBucz1UaW1vOyAgdGhpcy5hcz1UaW1vOyA9PiBscz1UaW1vCiAgICAJCS8vIEplbm55OiBscz1UaW1vOyAgbnM9SmVubnk7IHRoaXMuYXM9VGltbzsgVGltby5ucz1KZW5ueTsgPT4gbHM9SmVubnkKICAgIAkJLy8gTGluYTogIGxzPUplbm55OyBucz1MaW5hOyAgdGhpcy5hcz1UaW1vOyBKZW5ueS5ucz1MaW5hOyA9PiBscz1MaW5hCgoJCSAgICBuYWVjaHN0ZXJTcGllbGVyLnNldFNwaWVsZmVsZChzYi5nZXRTdGFydGZlbGQoKSk7CgkJICAgIAoJCSAgICBpZih0aGlzLmdldEFrdHVlbGxlclNwaWVsZXIoKT09bnVsbCl7CgkJICAgICAgICBuYWVjaHN0ZXJTcGllbGVyLnNldE51bW1lcigxKTsKCQkgICAgICAgIHRoaXMuc2V0QWt0dWVsbGVyU3BpZWxlcihuYWVjaHN0ZXJTcGllbGVyKTsKCQkgICAgfQoJCSAgICAKCQkgICAgaWYobGV0enRlclNwaWVsZXIhPW51bGwpewogICAgICAgICAgICAgICAgbmFlY2hzdGVyU3BpZWxlci5zZXROdW1tZXIobGV0enRlclNwaWVsZXIuZ2V0TnVtbWVyKCkrMSk7CgkJICAgICAgICBsZXR6dGVyU3BpZWxlci5zZXROYWVjaHN0ZXJTcGllbGVyKG5hZWNoc3RlclNwaWVsZXIpOwoJCSAgICB9CgkJICAgIAoJCSAgICBsZXR6dGVyU3BpZWxlciA9IG5hZWNoc3RlclNwaWVsZXI7CiAgICAgICAgfQogICAgICAgIAoJCS8vIExpbmEubnM9dGhpcy5hcwogICAgICAgIGxldHp0ZXJTcGllbGVyLnNldE5hZWNoc3RlclNwaWVsZXIodGhpcy5nZXRBa3R1ZWxsZXJTcGllbGVyKCkpOwoJCQoJCQoJCWAsCgl9XQp9LCB7CglOYW1lOiAiU3BpZWxlciIsCglFbnRpdHlBdHRyaWJ1dGVzOiBbewoJCU5hbWU6ICJuYW1lIiwKCQlJc1N0cmluZzogdHJ1ZSwKCX0sIHsKCQlOYW1lOiAibnVtbWVyIiwKCQlJc0ludDogdHJ1ZSwKCX0sIHsKCQlOYW1lOiAiZ2VsZCIsCgkJSXNJbnQ6IHRydWUsCgl9LCB7CgkJTmFtZTogInZlcmhhZnRldCIsCgkJSXNCb29sOiB0cnVlLAoJfSwgewoJCU5hbWU6ICJmYXJiZSIsCgkJSXNTdHJpbmc6IHRydWUsCgl9LCB7CgkJTmFtZTogImFrdHVlbGxlUnVuZGUiLAoJCUlzSW50OiB0cnVlLAoJfSwgewoJCU5hbWU6ICJzcGllbGZlbGQiLAoJCUVudGl0eVR5cGU6IHsKCQkJTmFtZTogIlNwaWVsZmVsZCIKCQl9Cgl9LCB7CgkJTmFtZTogIm5hZWNoc3RlclNwaWVsZXIiLAoJCUVudGl0eVR5cGU6IHsKCQkJTmFtZTogIlNwaWVsZXIiCgkJfQoJfV0sCglFbnRpdHlNZXRob2RzOiBbewoJCU5hbWU6ICJTcGllbGVyIiwKCQlPcmRlcjogMSwKCQlBdXRob3I6ICJGcmFuemkiLAoJCU1ldGhvZFBhcmFtZXRlcnM6IFt7CgkJCU5hbWU6ICJuYW1lIiwKCQkJSXNTdHJpbmc6IHRydWUsCgkJfSwgewoJCQlOYW1lOiAiZmFyYmUiLAoJCQlJc1N0cmluZzogdHJ1ZSwKCQl9XSwKCQlKYXZhOiBgCgkJdGhpcy5zZXROYW1lKG5hbWUpLnNldEZhcmJlKGZhcmJlKS5zZXRHZWxkKDIwMDApOwoJCWAsCgl9LCB7CgkJTmFtZTogImdlaGVuIiwKCQlPcmRlcjogMiwKCQlBdXRob3I6ICJIYW5uYSIsCgkJUmVtYXJrOiAiRWluZW4gU2Nocml0dCBuYWNoIHZvcm5lIGdlaGVuLCBiaXMgZGllIGdld3VlcmZlbHRlIFphaGwgZXJyZWljaHQgaXN0IiwKCQlNZXRob2RQYXJhbWV0ZXJzOiBbewoJCQlOYW1lOiAic2Nocml0dGUiLAoJCQlJc0ludDogdHJ1ZSwKCQl9XSwKCQlKYXZhOiBgCiAgICAgICAgaWYgKHRoaXMuZ2V0VmVyaGFmdGV0KCkpIHsKICAgICAgICAgICAgdGhpcy5zZXRWZXJoYWZ0ZXQoZmFsc2UpOyAvL2ZhbGxzIGVpbiBTcGllbGVyIHZlcmhhZnRldCBpc3QsIHdpcmQgZXIgYWxzIG5pY2h0IHZlcmhhZnRldCBnZXNldHp0LCBkYW1pdCBlciBpbiBkZXIgbmFlY2hzdGVuIFJ1bmRlIHdpZWRlciBzcGllbGVuIGthbm4KCQl9IGVsc2UgewogICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHNjaHJpdHRlOyBpKyspewogICAgICAgICAgICAgICAgdGhpcy5zZXRTcGllbGZlbGQodGhpcy5nZXRTcGllbGZlbGQoKS5nZXROYWVjaHN0ZXNGZWxkKCkpOyAvL3ZlcnNldHp0IGRlbiBTcGllbGVyIGVpbiBGZWxkIG5hY2ggdm9ybmUsIHNvbGFuZ2UgZGllIEFuemFobCBkZXIgaW0gUGFyYW1ldGVyIMODwoPDgsK8YmVyZ2ViZW5lbiBTY2hyaXR0ZSBub2NoIG5pY2h0IGVycmVpY2h0IGlzdAogICAgICAgICAgICB9CgkJfQoJCXRoaXMuc2V0QWt0dWVsbGVSdW5kZSh0aGlzLmdldEFrdHVlbGxlUnVuZGUoKSArIDEpOwoJICAgIGAKCX0sIHsKCQlOYW1lOiAiZ2VrYXVmdGVGZWxkZXIiLAoJCU9yZGVyOiAzLAoJCUF1dGhvcjogIkpvaGFubmEiLAoJCVJlbWFyazogImdpYnQgZWluZSBMaXN0ZSBhbiBhbGxlbiBGZWxkZXJuIHp1csODwoPDgsK8Y2ssIGRpZSBlaW5lbSBTcGllbGVyIGdlaMODwoPDgsK2cmVuIiwKCQlNZXRob2RQYXJhbWV0ZXJzOiBbXSwKCQlKYXZhOiBgCgkJamF2YS51dGlsLkFycmF5TGlzdDxTcGllbGZlbGQ+IGdla2F1ZnRlTGlzdGUgPSBuZXcgamF2YS51dGlsLkFycmF5TGlzdDxTcGllbGZlbGQ+KCk7CgkJaWYodGhpcy5nZXRTcGllbGZlbGQoKS5nZXRCZXNpdHplcigpPT10aGlzKXsKCQkgICAgZ2VrYXVmdGVMaXN0ZS5hZGQodGhpcy5nZXRTcGllbGZlbGQoKSk7IC8vZnVlZ3QgZGFzIGpldHppZ2UgU3BpZWxmZWxkICB6dSBkZXIgQXJyYXlMaXN0IGhpbnp1LCBmYWxscyBlcyBkZW0gU3BpZWxlciBnZWhvZXJ0CgkJfQoJCQoJCWZvcihTcGllbGZlbGQgc3AgPSB0aGlzLmdldFNwaWVsZmVsZCgpLmdldE5hZWNoc3Rlc0ZlbGQoKTsgc3AhPXRoaXMuZ2V0U3BpZWxmZWxkKCk7IHNwID0gc3AuZ2V0TmFlY2hzdGVzRmVsZCgpKXsKCQkgICAgaWYoc3AuZ2V0QmVzaXR6ZXIoKT09dGhpcyl7CgkJICAgICAgICBnZWthdWZ0ZUxpc3RlLmFkZChzcCk7IC8vZnVlZ3QgYWIgZGVtIG5hZWNoc3RlbiBTcGllbGZlbGQgYWxsZSBTcGllbGZlbGRlciB6dSBkZXIgTGlzdGUgZGVyIGdla2F1ZnRlbiBGZWxkZXIgaGluenUsIGRpZSBkZW0gU3BpZWxlciBnZWjDg8KDw4LCtnJlbgoJCSAgICB9CgkJfQoJCQoJCS8vc29ydGllcnQgZGllIEFycmF5TGlzdCBkZXIgZ2VrYXVmdGVuIEZlbGRlciBuYWNoIGlocmVyIFBvc2l0aW9uIGF1ZiBkZW0gU3BpZWxmZWxkCgkJamF2YS51dGlsLkNvbGxlY3Rpb25zLnNvcnQoZ2VrYXVmdGVMaXN0ZSwgbmV3IGphdmEudXRpbC5Db21wYXJhdG9yPFNwaWVsZmVsZD4oKSB7CiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAvKiAqLwogICAgICAgICAgICBwdWJsaWMgaW50IGNvbXBhcmUoU3BpZWxmZWxkIHoxLCBTcGllbGZlbGQgejIpIHsKICAgICAgICAgICAgICAgIGlmICh6MS5nZXROdW1tZXIoKSA+IHoyLmdldE51bW1lcigpKQogICAgICAgICAgICAgICAgICAgIHJldHVybiAxOwogICAgICAgICAgICAgICAgaWYgKHoxLmdldE51bW1lcigpIDwgejIuZ2V0TnVtbWVyKCkpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCQlyZXR1cm4gZ2VrYXVmdGVMaXN0ZTsKCSAgICBgLAoJCVJlc3BvbnNlQXR0cmlidXRlOiB7CgkJCUlzQXJyYXk6IHRydWUsCgkJCUVudGl0eVR5cGU6IHsKCQkJCU5hbWU6ICJTcGllbGZlbGQiCgkJCX0KCQl9Cgl9XQp9LCB7CglOYW1lOiAiU3BpZWxicmV0dCIsCglFbnRpdHlBdHRyaWJ1dGVzOiBbewoJCU5hbWU6ICJuYW1lIiwKCQlJc1N0cmluZzogdHJ1ZSwKCQlJc1VuaXF1ZTogdHJ1ZSwKCX0sIHsKCQlOYW1lOiAiYnJldHRCcmVpdGUiLAoJCUlzSW50OiB0cnVlCgl9LCB7CgkJTmFtZTogInhQb3NpdGlvbiIsCgkJSXNJbnQ6IHRydWUKCX0sIHsKCQlOYW1lOiAieVBvc2l0aW9uIiwKCQlJc0ludDogdHJ1ZQoJfSwgewoJCU5hbWU6ICJzdGFydGZlbGQiLAoJCUVudGl0eVR5cGU6IHsKCQkJTmFtZTogIkdvRmVsZCIKCQl9Cgl9XSwKCUVudGl0eU1ldGhvZHM6IFt7CgkJTmFtZTogImZlbGRYUG9zaXRpb24iLAoJCUF1dGhvcjogIkNocmlzdGluYSIsCgkJUmVtYXJrOiAiIiwKCQlNZXRob2RQYXJhbWV0ZXJzOiBbewoJCQlOYW1lOiAic3BpZWxGZWxkIiwKCQkJRW50aXR5VHlwZTogewoJCQkJTmFtZTogIlNwaWVsZmVsZCIKCQkJfQoJCX1dLAoJCUphdmE6IGAKCQlpZihzcGllbEZlbGQuZ2V0TnVtbWVyKCk8MTEpewogICAgICAgICAgICByZXR1cm4geFBvc2l0aW9uICsgYnJldHRCcmVpdGUgLSAoc3BpZWxGZWxkLmdldE51bW1lcigpKzEpKmJyZXR0QnJlaXRlLzEzOwoJCX1lbHNlIGlmKHNwaWVsRmVsZC5nZXROdW1tZXIoKTwyMSl7CgkJICAgIHJldHVybiB4UG9zaXRpb247CgkJfWVsc2UgaWYoc3BpZWxGZWxkLmdldE51bW1lcigpPDMxKXsKCQkgICAgcmV0dXJuIHhQb3NpdGlvbiArIChzcGllbEZlbGQuZ2V0TnVtbWVyKCktKHNwaWVsRmVsZC5nZXROdW1tZXIoKT09MjE/MjE6MjApKSpicmV0dEJyZWl0ZS8xMzsKCQl9ZWxzZSBpZihzcGllbEZlbGQuZ2V0TnVtbWVyKCk8NDEpewoJCSAgICByZXR1cm4geFBvc2l0aW9uICsgYnJldHRCcmVpdGUgLSAyKmJyZXR0QnJlaXRlLzEzOwoJCX1lbHNlewoJCSAgICByZXR1cm4gMDsKCQl9CgkJYCwKCQlSZXNwb25zZUF0dHJpYnV0ZTogewoJCQlJc0ludDogdHJ1ZQoJCX0KCX0sIHsKCQlOYW1lOiAiZmVsZFlQb3NpdGlvbiIsCgkJQXV0aG9yOiAiQ2hyaXN0aW5hIiwKCQlNZXRob2RQYXJhbWV0ZXJzOiBbewoJCQlOYW1lOiAic3BpZWxGZWxkIiwKCQkJRW50aXR5VHlwZTogewoJCQkJTmFtZTogIlNwaWVsZmVsZCIKCQkJfQoJCX1dLAoJCUphdmE6IGAKCQlpZihzcGllbEZlbGQuZ2V0TnVtbWVyKCk8MTEpewogICAgICAgICAgICByZXR1cm4geVBvc2l0aW9uICsgYnJldHRCcmVpdGUgLSAyKihicmV0dEJyZWl0ZS8xMyk7CgkJfWVsc2UgaWYoc3BpZWxGZWxkLmdldE51bW1lcigpPDIxKXsKCQkgICAgcmV0dXJuIHlQb3NpdGlvbiArIGJyZXR0QnJlaXRlIC0gMiooYnJldHRCcmVpdGUvMTMpIC0gKHNwaWVsRmVsZC5nZXROdW1tZXIoKS0xMSkqYnJldHRCcmVpdGUvMTM7CgkJfWVsc2UgaWYoc3BpZWxGZWxkLmdldE51bW1lcigpPDMxKXsKCQkgICAgcmV0dXJuIHlQb3NpdGlvbjsKCQl9ZWxzZSBpZihzcGllbEZlbGQuZ2V0TnVtbWVyKCk8NDEpewoJCSAgICByZXR1cm4geVBvc2l0aW9uICsgKHNwaWVsRmVsZC5nZXROdW1tZXIoKS0oc3BpZWxGZWxkLmdldE51bW1lcigpPT0zMT8zMTozMCkpKmJyZXR0QnJlaXRlLzEzOwoJCX1lbHNlewoJCSAgICByZXR1cm4gMDsKCQl9CgkJYCwKCQlSZXNwb25zZUF0dHJpYnV0ZTogewoJCQlJc0ludDogdHJ1ZQoJCX0KCX1dCn0sIHsKCU5hbWU6ICJTcGllbGZlbGQiLAoJSXNBYnN0cmFjdDogdHJ1ZSwKCUVudGl0eUF0dHJpYnV0ZXM6IFt7CgkJTmFtZTogIm5hbWUiLAoJCUlzU3RyaW5nOiB0cnVlCgl9LCB7CgkJTmFtZTogIm51bW1lciIsCgkJSXNJbnQ6IHRydWUKCX0sIHsKCQlOYW1lOiAibWlldGUiLAoJCUlzSW50OiB0cnVlCgl9LCB7CgkJTmFtZTogImZhcmJlIiwKCQlJc1N0cmluZzogdHJ1ZSwKCX0sIHsKCQlOYW1lOiAibmFlY2hzdGVzRmVsZCIsCgkJRW50aXR5VHlwZTogewoJCQlOYW1lOiAiU3BpZWxmZWxkIgoJCX0KCX0sIHsKCQlOYW1lOiAiYmVzaXR6ZXIiLAoJCUVudGl0eVR5cGU6IHsKCQkJTmFtZTogIlNwaWVsZXIiCgkJfQoJfV0sCglFbnRpdHlNZXRob2RzOiBbewoJCU5hbWU6ICJzcGllbGVyTGlzdGUiLAoJCUF1dGhvcjogIklkaWwiLAoJCU1ldGhvZFBhcmFtZXRlcnM6IFtdLAoJCVJlc3BvbnNlQXR0cmlidXRlOiB7CgkJCUlzQXJyYXk6IHRydWUsCgkJCUVudGl0eVR5cGU6IHsKCQkJCU5hbWU6ICJTcGllbGVyIiwKCQkJfQoJCX0KCX0sIHsKCQlOYW1lOiAiYWt0aW9uQXVzZnVlaHJlbiIsCgkJQXV0aG9yOiAiRXN6dGVyIiwKCQlNZXRob2RQYXJhbWV0ZXJzOiBbewoJCQlOYW1lOiAic3BpZWxlciIsCgkJCUVudGl0eVR5cGU6IHsKCQkJCU5hbWU6ICJTcGllbGVyIiwKCQkJfQoJCX0sIHsKCQkJTmFtZTogImFrdGlvbmVuTGlzdGUiLAoJCQlJc0FycmF5OiB0cnVlLAoJCQlJc1N0cmluZzogdHJ1ZSwKCQl9XSwKCQlKYXZhOiBgcmV0dXJuO2AsCgl9LCB7CgkJTmFtZTogIm5hbWVJbkV1cm8iLAoJCUF1dGhvcjogIkNocmlzdGluYSIsCgkJTWV0aG9kUGFyYW1ldGVyczogW10sCgkJSmF2YTogYAoJCWlmKHRoaXMuZ2V0TWlldGUoKSAhPSAwKSB7CgkJICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSArICIgIiArICgtMSkqdGhpcy5nZXRNaWV0ZSgpICsgIkV1cm8iOwoJCX0KCQlyZXR1cm4gdGhpcy5nZXROYW1lKCk7CgkgICAgYCwKCQlSZXNwb25zZUF0dHJpYnV0ZTogewoJCQlJc1N0cmluZzogdHJ1ZQoJCX0KCX1dLAp9LCB7CglOYW1lOiAiR29GZWxkIiwKCUV4dGVuZHM6IHsKCQlOYW1lOiAiU3BpZWxmZWxkIgoJfSwKCUVudGl0eUF0dHJpYnV0ZXM6IFtdLAoJRW50aXR5TWV0aG9kczogW3sKCQlOYW1lOiAiR29GZWxkIiwKCQlBdXRob3I6ICJGcmFuemkiLAoJCUphdmE6IGB0aGlzLnNldE5hbWUoIkdPIik7YCwKCX0sIHsKCQlOYW1lOiAic3BpZWxlckxpc3RlIiwKCQlNZXRob2RQYXJhbWV0ZXJzOiBbXSwKCQlKYXZhOiBgCgkJcmV0dXJuIG5ldyBqYXZhLnV0aWwuQXJyYXlMaXN0PFNwaWVsZXI+KCk7CgkJYCwKCQlSZXNwb25zZUF0dHJpYnV0ZTogewoJCQlJc0FycmF5OiB0cnVlLAoJCQlFbnRpdHlUeXBlOiB7CgkJCQlOYW1lOiAiU3BpZWxlciIsCgkJCX0KCQl9Cgl9LCB7CgkJTmFtZTogImFrdGlvbkF1c2Z1ZWhyZW4iLAoJCUF1dGhvcjogIkhhbm5hIiwKCQlNZXRob2RQYXJhbWV0ZXJzOiBbewoJCQlOYW1lOiAic3BpZWxlciIsCgkJCUVudGl0eVR5cGU6IHsKCQkJCU5hbWU6ICJTcGllbGVyIiwKCQkJfQoJCX0sIHsKCQkJTmFtZTogImFrdGlvbmVuTGlzdGUiLAoJCQlJc0FycmF5OiB0cnVlLAoJCQlJc1N0cmluZzogdHJ1ZSwKCQl9XSwKCQlKYXZhOiBgCgkJICAgIHNwaWVsZXIuc2V0R2VsZChzcGllbGVyLmdldEdlbGQoKSAtIHRoaXMuZ2V0TWlldGUoKSk7CgkJYAoJfV0sCn0sIHsKCU5hbWU6ICJLaXN0ZSIsCglFeHRlbmRzOiB7CgkJTmFtZTogIlNwaWVsZmVsZCIKCX0sCglFbnRpdHlBdHRyaWJ1dGVzOiBbXSwKCUVudGl0eU1ldGhvZHM6IFt7CgkJTmFtZTogInNwaWVsZXJMaXN0ZSIsCgkJQXV0aG9yOiAiRXN6dGVyIiwKCQlNZXRob2RQYXJhbWV0ZXJzOiBbXSwKCQlKYXZhOiBgCgkJcmV0dXJuIG5ldyBqYXZhLnV0aWwuQXJyYXlMaXN0PFNwaWVsZXI+KCk7CgkJYCwKCQlSZXNwb25zZUF0dHJpYnV0ZTogewoJCQlJc0FycmF5OiB0cnVlLAoJCQlFbnRpdHlUeXBlOiB7CgkJCQlOYW1lOiAiU3BpZWxlciIsCgkJCX0KCQl9Cgl9LCB7CgkJTmFtZTogImFrdGlvbkF1c2Z1ZWhyZW4iLAoJCUF1dGhvcjogIkpvaGFubmEiLAoJCU1ldGhvZFBhcmFtZXRlcnM6IFt7CgkJCU5hbWU6ICJzcGllbGVyIiwKCQkJRW50aXR5VHlwZTogewoJCQkJTmFtZTogIlNwaWVsZXIiLAoJCQl9CgkJfSwgewoJCQlOYW1lOiAiYWt0aW9uZW5MaXN0ZSIsCgkJCUlzQXJyYXk6IHRydWUsCgkJCUlzU3RyaW5nOiB0cnVlLAoJCX1dLAoJCUphdmE6IGAKCQkgICAgc3BpZWxlci5zZXRHZWxkKHNwaWVsZXIuZ2V0R2VsZCgpIC0gdGhpcy5nZXRNaWV0ZSgpKTsKCQlgCgl9XSwKfSwgewoJTmFtZTogIlBvbGl6ZWkiLAoJRXh0ZW5kczogewoJCU5hbWU6ICJTcGllbGZlbGQiCgl9LAoJRW50aXR5QXR0cmlidXRlczogW10sCglFbnRpdHlNZXRob2RzOiBbewoJCU5hbWU6ICJzcGllbGVyTGlzdGUiLAoJCUF1dGhvcjogIkZyYW56aSIsCgkJTWV0aG9kUGFyYW1ldGVyczogW10sCgkJSmF2YTogYAoJCXJldHVybiBuZXcgamF2YS51dGlsLkFycmF5TGlzdDxTcGllbGVyPigpOwoJCWAsCgkJUmVzcG9uc2VBdHRyaWJ1dGU6IHsKCQkJSXNBcnJheTogdHJ1ZSwKCQkJRW50aXR5VHlwZTogewoJCQkJTmFtZTogIlNwaWVsZXIiLAoJCQl9CgkJfQoJfSwgewoJCU5hbWU6ICJha3Rpb25BdXNmdWVocmVuIiwKCQlNZXRob2RQYXJhbWV0ZXJzOiBbewoJCQlOYW1lOiAic3BpZWxlciIsCgkJCUVudGl0eVR5cGU6IHsKCQkJCU5hbWU6ICJTcGllbGVyIiwKCQkJfQoJCX0sIHsKCQkJTmFtZTogImFrdGlvbmVuTGlzdGUiLAoJCQlBdXRob3I6ICJKb2hhbm5hIiwKCQkJSXNBcnJheTogdHJ1ZSwKCQkJSXNTdHJpbmc6IHRydWUsCgkJfV0sCgkJSmF2YTogYAoJCSAgICBzcGllbGVyLnNldFZlcmhhZnRldCh0cnVlKTsKCQkgICAgZm9yKFNwaWVsZmVsZCBzZiA9IHRoaXMuZ2V0TmFlY2hzdGVzRmVsZCgpOyAhKHNmIGluc3RhbmNlb2YgR2VmYWVuZ25pcyk7IHNmID0gc2YuZ2V0TmFlY2hzdGVzRmVsZCgpKXsKCQkgICAgICAgIHNwaWVsZXIuc2V0U3BpZWxmZWxkKHNmLmdldE5hZWNoc3Rlc0ZlbGQoKSk7CgkJICAgIH0KCQkgICAgCgkJYAoJfV0sCn0sIHsKCU5hbWU6ICJQYXJrcGxhdHoiLAoJRXh0ZW5kczogewoJCU5hbWU6ICJTcGllbGZlbGQiCgl9LAoJRW50aXR5QXR0cmlidXRlczogW10sCglFbnRpdHlNZXRob2RzOiBbewoJCU5hbWU6ICJzcGllbGVyTGlzdGUiLAoJCU1ldGhvZFBhcmFtZXRlcnM6IFtdLAoJCUphdmE6IGAKCQlyZXR1cm4gbmV3IGphdmEudXRpbC5BcnJheUxpc3Q8U3BpZWxlcj4oKTsKCQlgLAoJCVJlc3BvbnNlQXR0cmlidXRlOiB7CgkJCUlzQXJyYXk6IHRydWUsCgkJCUVudGl0eVR5cGU6IHsKCQkJCU5hbWU6ICJTcGllbGVyIiwKCQkJfQoJCX0KCX0sIHsKCQlOYW1lOiAiYWt0aW9uQXVzZnVlaHJlbiIsCgkJTWV0aG9kUGFyYW1ldGVyczogW3sKCQkJTmFtZTogInNwaWVsZXIiLAoJCQlFbnRpdHlUeXBlOiB7CgkJCQlOYW1lOiAiU3BpZWxlciIsCgkJCX0KCQl9LCB7CgkJCU5hbWU6ICJha3Rpb25lbkxpc3RlIiwKCQkJSXNBcnJheTogdHJ1ZSwKCQkJSXNTdHJpbmc6IHRydWUsCgkJfV0sCgkJSmF2YTogYGAsCgl9XSwKfSwgewoJTmFtZTogIldhc3NlciIsCglBY3RpdmU6IGZhbHNlLAoJRXh0ZW5kczogewoJCU5hbWU6ICJTcGllbGZlbGQiCgl9LAoJRW50aXR5QXR0cmlidXRlczogW10sCglFbnRpdHlNZXRob2RzOiBbewoJCU5hbWU6ICJzcGllbGVyTGlzdGUiLAoJCU1ldGhvZFBhcmFtZXRlcnM6IFtdLAoJCUphdmE6IGAKCQlyZXR1cm4gbmV3IGphdmEudXRpbC5BcnJheUxpc3Q8U3BpZWxlcj4oKTsKCQlgLAoJCVJlc3BvbnNlQXR0cmlidXRlOiB7CgkJCUlzQXJyYXk6IHRydWUsCgkJCUVudGl0eVR5cGU6IHsKCQkJCU5hbWU6ICJTcGllbGVyIiwKCQkJfQoJCX0KCX1dLAp9LCB7CglOYW1lOiAiTGFtcGUiLAoJQWN0aXZlOiBmYWxzZSwKCUV4dGVuZHM6IHsKCQlOYW1lOiAiU3BpZWxmZWxkIgoJfSwKCUVudGl0eUF0dHJpYnV0ZXM6IFtdLAoJRW50aXR5TWV0aG9kczogW3sKCQlOYW1lOiAic3BpZWxlckxpc3RlIiwKCQlNZXRob2RQYXJhbWV0ZXJzOiBbXSwKCQlKYXZhOiBgCgkJcmV0dXJuIG5ldyBqYXZhLnV0aWwuQXJyYXlMaXN0PFNwaWVsZXI+KCk7CgkJYCwKCQlSZXNwb25zZUF0dHJpYnV0ZTogewoJCQlJc0FycmF5OiB0cnVlLAoJCQlFbnRpdHlUeXBlOiB7CgkJCQlOYW1lOiAiU3BpZWxlciIsCgkJCX0KCQl9Cgl9XSwKfSwgewoJTmFtZTogIkdlZmFlbmduaXMiLAoJRXh0ZW5kczogewoJCU5hbWU6ICJTcGllbGZlbGQiCgl9LAoJRW50aXR5QXR0cmlidXRlczogW10sCglFbnRpdHlNZXRob2RzOiBbewoJCU5hbWU6ICJzcGllbGVyTGlzdGUiLAoJCUF1dGhvcjogIkhhbm5hIiwKCQlNZXRob2RQYXJhbWV0ZXJzOiBbXSwKCQlKYXZhOiBgCgkJcmV0dXJuIG5ldyBqYXZhLnV0aWwuQXJyYXlMaXN0PFNwaWVsZXI+KCk7CgkJYCwKCQlSZXNwb25zZUF0dHJpYnV0ZTogewoJCQlJc0FycmF5OiB0cnVlLAoJCQlFbnRpdHlUeXBlOiB7CgkJCQlOYW1lOiAiU3BpZWxlciIsCgkJCX0KCQl9Cgl9LCB7CgkJTmFtZTogImFrdGlvbkF1c2Z1ZWhyZW4iLAoJCU1ldGhvZFBhcmFtZXRlcnM6IFt7CgkJCU5hbWU6ICJzcGllbGVyIiwKCQkJRW50aXR5VHlwZTogewoJCQkJTmFtZTogIlNwaWVsZXIiLAoJCQl9CgkJfSwgewoJCQlOYW1lOiAiYWt0aW9uZW5MaXN0ZSIsCgkJCUlzQXJyYXk6IHRydWUsCgkJCUlzU3RyaW5nOiB0cnVlLAoJCX1dLAoJCUphdmE6IGAKCQkgICAgCgkJYAoJfV0sCn0sIHsKCU5hbWU6ICJFcmVpZ25pc2ZlbGQiLAoJRXh0ZW5kczogewoJCU5hbWU6ICJTcGllbGZlbGQiCgl9LAoJRW50aXR5QXR0cmlidXRlczogW10sCglFbnRpdHlNZXRob2RzOiBbewoJCU5hbWU6ICJzcGllbGVyTGlzdGUiLAoJCUF1dGhvcjogIklkaWwiLAoJCU1ldGhvZFBhcmFtZXRlcnM6IFtdLAoJCUphdmE6IGAKCQlyZXR1cm4gbmV3IGphdmEudXRpbC5BcnJheUxpc3Q8U3BpZWxlcj4oKTsKCQlgLAoJCVJlc3BvbnNlQXR0cmlidXRlOiB7CgkJCUlzQXJyYXk6IHRydWUsCgkJCUVudGl0eVR5cGU6IHsKCQkJCU5hbWU6ICJTcGllbGVyIiwKCQkJfQoJCX0KCX0sIHsKCQlOYW1lOiAiYWt0aW9uQXVzZnVlaHJlbiIsCgkJQXV0aG9yOiAiSGFubmEiLAoJCU1ldGhvZFBhcmFtZXRlcnM6IFt7CgkJCU5hbWU6ICJzcGllbGVyIiwKCQkJRW50aXR5VHlwZTogewoJCQkJTmFtZTogIlNwaWVsZXIiLAoJCQl9CgkJfSwgewoJCQlOYW1lOiAiYWt0aW9uZW5MaXN0ZSIsCgkJCUlzQXJyYXk6IHRydWUsCgkJCUlzU3RyaW5nOiB0cnVlLAoJCX1dLAoJCUphdmE6IGAKCQkgICAgdGhpcy5zZXRNaWV0ZSgxMCoobmV3IGphdmEudXRpbC5SYW5kb20oKS5uZXh0SW50KC01MCw1MCkgLyAxMCkpOwoJCSAgICAKCQkgICAgc3BpZWxlci5zZXRHZWxkKHNwaWVsZXIuZ2V0R2VsZCgpIC0gdGhpcy5nZXRNaWV0ZSgpKTsKCQlgCgl9XSwKfSwgewoJTmFtZTogIkJhaG5ob2YiLAoJQWN0aXZlOiBmYWxzZSwKCUV4dGVuZHM6IHsKCQlOYW1lOiAiU3BpZWxmZWxkIgoJfSwKCUVudGl0eUF0dHJpYnV0ZXM6IFtdLAoJRW50aXR5TWV0aG9kczogW3sKCQlOYW1lOiAic3BpZWxlckxpc3RlIiwKCQlNZXRob2RQYXJhbWV0ZXJzOiBbXSwKCQlKYXZhOiBgCgkJcmV0dXJuIG5ldyBqYXZhLnV0aWwuQXJyYXlMaXN0PFNwaWVsZXI+KCk7CgkJYCwKCQlSZXNwb25zZUF0dHJpYnV0ZTogewoJCQlJc0FycmF5OiB0cnVlLAoJCQlFbnRpdHlUeXBlOiB7CgkJCQlOYW1lOiAiU3BpZWxlciIsCgkJCX0KCQl9Cgl9LCB7CgkJTmFtZTogImFrdGlvbkF1c2Z1ZWhyZW4iLAoJCU1ldGhvZFBhcmFtZXRlcnM6IFt7CgkJCU5hbWU6ICJzcGllbGVyIiwKCQkJRW50aXR5VHlwZTogewoJCQkJTmFtZTogIlNwaWVsZXIiLAoJCQl9CgkJfSwgewoJCQlOYW1lOiAiYWt0aW9uZW5MaXN0ZSIsCgkJCUlzQXJyYXk6IHRydWUsCgkJCUlzU3RyaW5nOiB0cnVlLAoJCX1dLAoJCUphdmE6IGAKCQkgICAgc3BpZWxlci5zZXRHZWxkKHNwaWVsZXIuZ2V0R2VsZCgpIC0gdGhpcy5nZXRNaWV0ZSgpKTsKCQlgCgl9XSwKfSwgewoJTmFtZTogIlN0cmFzc2UiLAoJRXh0ZW5kczogewoJCU5hbWU6ICJTcGllbGZlbGQiCgl9LAoJRW50aXR5QXR0cmlidXRlczogW3sKCQlOYW1lOiAia2F1ZlByZWlzIiwKCQlJc0ludDogdHJ1ZQoJfV0sCglFbnRpdHlNZXRob2RzOiBbewoJCU5hbWU6ICJzcGllbGVyTGlzdGUiLAoJCU1ldGhvZFBhcmFtZXRlcnM6IFtdLAoJCUphdmE6IGAKCQlyZXR1cm4gbmV3IGphdmEudXRpbC5BcnJheUxpc3Q8U3BpZWxlcj4oKTsKCQlgLAoJCVJlc3BvbnNlQXR0cmlidXRlOiB7CgkJCUlzQXJyYXk6IHRydWUsCgkJCUVudGl0eVR5cGU6IHsKCQkJCU5hbWU6ICJTcGllbGVyIiwKCQkJfQoJCX0KCX0sIHsKCQlOYW1lOiAiYWt0aW9uQXVzZnVlaHJlbiIsCgkJTWV0aG9kUGFyYW1ldGVyczogW3sKCQkJTmFtZTogInNwaWVsZXIiLAoJCQlFbnRpdHlUeXBlOiB7CgkJCQlOYW1lOiAiU3BpZWxlciIsCgkJCX0KCQl9LCB7CgkJCU5hbWU6ICJha3Rpb25lbkxpc3RlIiwKCQkJQXV0aG9yOiAiQ2hyaXN0aW5hIiwKCQkJSXNBcnJheTogdHJ1ZSwKCQkJSXNTdHJpbmc6IHRydWUsCgkJfV0sCgkJSmF2YTogYAoJCSAgICBha3Rpb25lbkxpc3RlLmZvckVhY2goYWsgLT4gewoJCSAgICAgICAgc3dpdGNoKGFrKXsKCQkgICAgICAgICAgICBjYXNlICJrYXVmZW4iOgoJCSAgICAgICAgICAgICAgICBzcGllbGVyLnNldEdlbGQoc3BpZWxlci5nZXRHZWxkKCkgLSB0aGlzLmdldEthdWZQcmVpcygpKTsKCQkgICAgICAgICAgICAgICAgdGhpcy5zZXRCZXNpdHplcihzcGllbGVyKTsKCQkgICAgICAgICAgICAgICAgYnJlYWs7CgkJICAgICAgICAgICAgY2FzZSAibWlldGUiOgoJCSAgICAgICAgICAgICAgICBzcGllbGVyLnNldEdlbGQoc3BpZWxlci5nZXRHZWxkKCkgLSB0aGlzLmdldE1pZXRlKCkpOwoJCSAgICAgICAgICAgICAgICB0aGlzLmdldEJlc2l0emVyKCkuc2V0R2VsZCh0aGlzLmdldEJlc2l0emVyKCkuZ2V0R2VsZCgpK3RoaXMuZ2V0TWlldGUoKSk7CgkJICAgICAgICAgICAgICAgIGJyZWFrOwoJCSAgICAgICAgfQoJCSAgICB9KTsKCQkgICAgCgkJYAoJfSwgewoJCU5hbWU6ICJuYW1lSW5FdXJvIiwKCQlBdXRob3I6ICJFc3p0ZXIiLAoJCU1ldGhvZFBhcmFtZXRlcnM6IFtdLAoJCUphdmE6IGAKCQlpZih0aGlzLmdldEthdWZQcmVpcygpICE9IDApIHsKCQkgICAgcmV0dXJuIHRoaXMuZ2V0TmFtZSgpICsgIiAiICsgKC0xKSp0aGlzLmdldEthdWZQcmVpcygpICsgIkV1cm8iOwoJCX0KCQlyZXR1cm4gdGhpcy5nZXROYW1lKCk7CgkgICAgYCwKCQlSZXNwb25zZUF0dHJpYnV0ZTogewoJCQlJc1N0cmluZzogdHJ1ZQoJCX0KCX1dLAp9LCB7CglOYW1lOiAiU3RldWVybiIsCglBY3RpdmU6IGZhbHNlLAoJRXh0ZW5kczogewoJCU5hbWU6ICJTcGllbGZlbGQiCgl9LAoJRW50aXR5QXR0cmlidXRlczogW10sCglFbnRpdHlNZXRob2RzOiBbewoJCU5hbWU6ICJzcGllbGVyTGlzdGUiLAoJCU1ldGhvZFBhcmFtZXRlcnM6IFtdLAoJCUphdmE6IGAKCQlyZXR1cm4gbmV3IGphdmEudXRpbC5BcnJheUxpc3Q8U3BpZWxlcj4oKTsKCQlgLAoJCVJlc3BvbnNlQXR0cmlidXRlOiB7CgkJCUlzQXJyYXk6IHRydWUsCgkJCUVudGl0eVR5cGU6IHsKCQkJCU5hbWU6ICJTcGllbGVyIiwKCQkJfQoJCX0KCX0sIHsKCQlOYW1lOiAiYWt0aW9uQXVzZnVlaHJlbiIsCgkJTWV0aG9kUGFyYW1ldGVyczogW3sKCQkJTmFtZTogInNwaWVsZXIiLAoJCQlFbnRpdHlUeXBlOiB7CgkJCQlOYW1lOiAiU3BpZWxlciIsCgkJCX0KCQl9LCB7CgkJCU5hbWU6ICJha3Rpb25lbkxpc3RlIiwKCQkJSXNBcnJheTogdHJ1ZSwKCQkJSXNTdHJpbmc6IHRydWUsCgkJfV0sCgkJSmF2YTogYAoJCSAgICBzcGllbGVyLnNldEdlbGQoc3BpZWxlci5nZXRHZWxkKCkgLSB0aGlzLmdldE1pZXRlKCkpOwoJCWAKCX1dLAp9XQ==",
	"storedMethod": null,
	"__keys": ["name"],
	"active": true,
	"enabled": true,
	"__trMap": []
}
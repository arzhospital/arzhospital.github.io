var method_name = "ContentManager.cmsMethodResultFind";

var server_time = new Date(2019, 12-1, 9, 19, 47, 45);

var execution_time = 0.103244;

ret = new Object();
ret.ToString = "";
ret._ToString = "";
ret.Active = true;
ret.Code = "9d704956-2796-4ad3-9772-f68d865239ba";
ret.Completed = new Date(2019, 12-1, 9, 19, 47, 37);
ret.Date = new Date(2019, 12-1, 9, 19, 47, 15);
ret.Order = 0;
ret.PostData = "";
ret.Query = "";
ret.Result = "var method_name = \"comGroupViewAggregation\";\r\n\r\nvar server_time = new Date(2019, 12-1, 9, 19, 47, 37);\r\n\r\nvar execution_time = 22.021039;\r\n\r\n\r\n\r\nret = [{\"active\":1,\"code\":\"I\",\"date\":\"0001-01-01T00:00:00\",\"name\":\"Internal\",\"order\":null,\"id\":2,\"groupid\":4,\"PARTITIONID\":\"2019-01-01 00:00:00\",\"V0\":7004.0},{\"active\":1,\"code\":\"E\",\"date\":\"0001-01-01T00:00:00\",\"name\":\"External\",\"order\":null,\"id\":14,\"groupid\":4,\"PARTITIONID\":\"2019-01-01 00:00:00\",\"V0\":3517.0},{\"active\":1,\"code\":\"I\",\"date\":\"0001-01-01T00:00:00\",\"name\":\"Internal\",\"order\":null,\"id\":2,\"groupid\":4,\"PARTITIONID\":\"2019-02-01 00:00:00\",\"V0\":6342.0},{\"active\":1,\"code\":\"E\",\"date\":\"0001-01-01T00:00:00\",\"name\":\"External\",\"order\":null,\"id\":14,\"groupid\":4,\"PARTITIONID\":\"2019-02-01 00:00:00\",\"V0\":3404.0},{\"active\":1,\"code\":\"I\",\"date\":\"0001-01-01T00:00:00\",\"name\":\"Internal\",\"order\":null,\"id\":2,\"groupid\":4,\"PARTITIONID\":\"2019-03-01 00:00:00\",\"V0\":6538.0},{\"active\":1,\"code\":\"E\",\"date\":\"0001-01-01T00:00:00\",\"name\":\"External\",\"order\":null,\"id\":14,\"groupid\":4,\"PARTITIONID\":\"2019-03-01 00:00:00\",\"V0\":3912.0},{\"active\":1,\"code\":\"I\",\"date\":\"0001-01-01T00:00:00\",\"name\":\"Internal\",\"order\":null,\"id\":2,\"groupid\":4,\"PARTITIONID\":\"2019-04-01 00:00:00\",\"V0\":5014.0},{\"active\":1,\"code\":\"E\",\"date\":\"0001-01-01T00:00:00\",\"name\":\"External\",\"order\":null,\"id\":14,\"groupid\":4,\"PARTITIONID\":\"2019-04-01 00:00:00\",\"V0\":3304.0},{\"active\":1,\"code\":\"I\",\"date\":\"0001-01-01T00:00:00\",\"name\":\"Internal\",\"order\":null,\"id\":2,\"groupid\":4,\"PARTITIONID\":\"2019-05-01 00:00:00\",\"V0\":5368.0},{\"active\":1,\"code\":\"E\",\"date\":\"0001-01-01T00:00:00\",\"name\":\"External\",\"order\":null,\"id\":14,\"groupid\":4,\"PARTITIONID\":\"2019-05-01 00:00:00\",\"V0\":3751.0},{\"active\":1,\"code\":\"I\",\"date\":\"0001-01-01T00:00:00\",\"name\":\"Internal\",\"order\":null,\"id\":2,\"groupid\":4,\"PARTITIONID\":\"2019-06-01 00:00:00\",\"V0\":4776.0},{\"active\":1,\"code\":\"E\",\"date\":\"0001-01-01T00:00:00\",\"name\":\"External\",\"order\":null,\"id\":14,\"groupid\":4,\"PARTITIONID\":\"2019-06-01 00:00:00\",\"V0\":3553.0},{\"active\":1,\"code\":\"I\",\"date\":\"0001-01-01T00:00:00\",\"name\":\"Internal\",\"order\":null,\"id\":2,\"groupid\":4,\"PARTITIONID\":\"2019-07-01 00:00:00\",\"V0\":5157.0},{\"active\":1,\"code\":\"E\",\"date\":\"0001-01-01T00:00:00\",\"name\":\"External\",\"order\":null,\"id\":14,\"groupid\":4,\"PARTITIONID\":\"2019-07-01 00:00:00\",\"V0\":3642.0},{\"active\":1,\"code\":\"I\",\"date\":\"0001-01-01T00:00:00\",\"name\":\"Internal\",\"order\":null,\"id\":2,\"groupid\":4,\"PARTITIONID\":\"2019-08-01 00:00:00\",\"V0\":5136.0},{\"active\":1,\"code\":\"E\",\"date\":\"0001-01-01T00:00:00\",\"name\":\"External\",\"order\":null,\"id\":14,\"groupid\":4,\"PARTITIONID\":\"2019-08-01 00:00:00\",\"V0\":3660.0},{\"active\":1,\"code\":\"I\",\"date\":\"0001-01-01T00:00:00\",\"name\":\"Internal\",\"order\":null,\"id\":2,\"groupid\":4,\"PARTITIONID\":\"2019-09-01 00:00:00\",\"V0\":5361.0},{\"active\":1,\"code\":\"E\",\"date\":\"0001-01-01T00:00:00\",\"name\":\"External\",\"order\":null,\"id\":14,\"groupid\":4,\"PARTITIONID\":\"2019-09-01 00:00:00\",\"V0\":3252.0},{\"active\":1,\"code\":\"I\",\"date\":\"0001-01-01T00:00:00\",\"name\":\"Internal\",\"order\":null,\"id\":2,\"groupid\":4,\"PARTITIONID\":\"2019-10-01 00:00:00\",\"V0\":4507.0},{\"active\":1,\"code\":\"E\",\"date\":\"0001-01-01T00:00:00\",\"name\":\"External\",\"order\":null,\"id\":14,\"groupid\":4,\"PARTITIONID\":\"2019-10-01 00:00:00\",\"V0\":2737.0},{\"active\":1,\"code\":\"I\",\"date\":\"0001-01-01T00:00:00\",\"name\":\"Internal\",\"order\":null,\"id\":2,\"groupid\":4,\"PARTITIONID\":\"2019-11-01 00:00:00\",\"V0\":3927.0},{\"active\":1,\"code\":\"E\",\"date\":\"0001-01-01T00:00:00\",\"name\":\"External\",\"order\":null,\"id\":14,\"groupid\":4,\"PARTITIONID\":\"2019-11-01 00:00:00\",\"V0\":2410.0},{\"active\":1,\"code\":\"I\",\"date\":\"0001-01-01T00:00:00\",\"name\":\"Internal\",\"order\":null,\"id\":2,\"groupid\":4,\"PARTITIONID\":\"2019-12-01 00:00:00\",\"V0\":0.0},{\"active\":1,\"code\":\"E\",\"date\":\"0001-01-01T00:00:00\",\"name\":\"External\",\"order\":null,\"id\":14,\"groupid\":4,\"PARTITIONID\":\"2019-12-01 00:00:00\",\"V0\":0.0}];";
ret.RunAfter = new Date(2019, 12-1, 9, 19, 47, 15);
ret.Id = 252;
ret.StoredMethodid = 2322;
ret.StoredMethod = new Object();
ret.StoredMethod.ToString = "comGroupViewAggregation";
ret.StoredMethod._ToString = "comGroupViewAggregation";
ret.StoredMethod.Active = true;
ret.StoredMethod.AlwaysCache = false;
ret.StoredMethod.AlwaysCompile = false;
ret.StoredMethod.AlwaysGenerate = false;
ret.StoredMethod.BodyCode = "if(id_values==null) id_values = new Identity[0];\nif(pi_values==null) pi_values = new PerformanceIdentity[0];\nif(pv_values==null) pv_values = new PerformanceValue[0];\nif(p_values==null) p_values = new Performance[0];\n\nif(partitionFields==null) partitionFields = new string[]{\"takenOn\"};\n\nSystem.Data.DataTable ret = new System.Data.DataTable();\ntry\n{\n    List<IDbTable> values = new List<IDbTable>();\n    values.AddRange(id_values);\n    values.AddRange(pi_values);\n    values.AddRange(pv_values);\n    values.AddRange(p_values);\n\n    List<string> fields = new List<string>();\n    for(int i=0; i<id_values.Length; i++) fields.Add(\"id\");\n    for(int i=0; i<pi_values.Length; i++) fields.Add(\"id\");\n    for(int i=0; i<pv_values.Length; i++) fields.Add(\"value\");\n    for(int i=0; i<p_values.Length; i++) fields.Add(\"id\");\n    //$_cmsDebug(\"values: \" + values.Count + \", fields: \" + fields.Count + \", keys: \" + keys.Length + \", aggs: \" + aggs.Length);\n\n    if(series.Length>0){\n        for(int i=0; i<series.Length; i++){\n            // series is an Object array. If it is a date, convert it\n            try{\n                series[i] = DateTime.Parse(series[i].ToString());\n            }catch{}\n        }\n        try{\n            Single.Parse(series[0].ToString());\n            if(partitionFields.Length==1 && partitionFields[0]==\"takenOn\"){\n                partitionFields[0]=\"value\";\n            }\n        }catch{}\n    }\n    \n    ret = User.groupView(keys, values.ToArray(), fields.ToArray(), aggs, Array.ConvertAll(series, d => (object)d), partitionFields, fieldFormatter, \"performanceid\", bTest);\n    $_cmsDebug(User.register(\"_VIEW_SQL\").ToString());\n}catch(Exception ex){\n    $_cmsDebug(\"comGroupViewAggregation: \" + ex.Message);\n}\nreturn ret;";
ret.StoredMethod.Name = "comGroupViewAggregation";
ret.StoredMethod.ObjectBytes = "";
ret.StoredMethod.ObjectCompiled = true;
ret.StoredMethod.ObjectReturn = false;
ret.StoredMethod.RegenerateAfter = new Date(2019, 12-1, 8, 9, 36, 52);
ret.StoredMethod.ReturnBytes = "";
ret.StoredMethod.ReturnCode = "<?=$_DataTableToJS_(oret)?>";
ret.StoredMethod.ReturnCompiled = true;
ret.StoredMethod.ReturnSchema = "System.Data.DataTable";
ret.StoredMethod.Signature = "Identity[] keys, Identity[] id_values, PerformanceIdentity[] pi_values, PerformanceValue[] pv_values, Performance[] p_values, Object[] series, string[] partitionFields, string[] aggs, string fieldFormatter, bool bTest";
ret.StoredMethod.Sql = "";
ret.StoredMethod.SqlMethod = false;
ret.StoredMethod.Id = 2322;
ret.StoredMethod.MethodLayers = new Array();
ret.StoredMethod.ValidatedLayers = new Array();
ret.StoredMethod.MethodResults = new Array();
ret.StoredMethod.JobSchedules = new Array();
ret.StoredMethod.MethodFiles = new Array();
ret.StoredMethod.MethodLibraries = new Array();
ret.StoredMethod.CompilationLogs = new Array();
ret.StoredMethod.DebugLogs = new Array();
ret.StoredMethod.StoredScripts = new Array();
ret.StoredMethod.MethodProperties = new Array();